# 关于耦合和吸取过去的教训

> 原文：<https://dev.to/andywendt/on-coupling-and-learning-the-lessons-of-the-past-41jl>

> 那些不记得过去的人注定要重蹈覆辙——乔治·桑塔亚纳

对糟糕的编程实践的辩护通常来自于通过个人经历的镜头来合理化自己的行为。在最初的架构决策和实现之后很久，问题才开始显现出来。任务通常应该是小的，但是由于修改系统的实现和体系结构的困难，最终成为大的任务。

花费巨大的代价，教训往往是重新发明或根本没有标题。这通常会在个人和团队中造成认知不一致的情况:他们认为自己是有能力的或优秀的开发人员，然而他们并没有吸取过去的教训。

### 一场静态的长篇大论

在过去的几十年里，关于应用程序耦合已经有了一些经验教训，但是很少有人比那些关于静态方法的经验教训更加懒散。那些不了解这些课程的人基本上使用静态方法作为类命名空间函数，这些函数在整个应用程序中随处使用。

在某些方面，用这种方式编程可能更容易，因为它本质上通常是过程化的，并且类似于一个人在编程生涯早期学到的东西(函数)。因此，它们的使用通常需要较低水平的技能。然而，它们紧密地耦合了应用程序，使其几乎完全不可测试，因为依赖关系没有明确声明，并且它们可以在任何地方使用。

因此，如果您想牺牲可维护性来降低构建应用程序所需的技能，这可能是您的选择。然而，这样做会增加大量的技术债务。“只有走得好，才能走得快”，这是一个众所周知的原则。因此，您[应该](https://simpleprogrammer.com/static-methods-will-shock-you/)只使用静态来声明真正的全局常量(请注意，不是全局变量)并帮助创建对象。其他任何事情都是典型的自找麻烦。

### 服务愚行

然而，关于耦合的教训不仅在实现具体化时经常被遗忘，而且在设计应用程序和系统时在概念上也被遗忘。早在 90 年代初，四人帮(g of)就撰写了一本权威的书，*设计模式。他们在其中陈述了*“紧耦合导致整体系统”*。我们所知道的关于人性的一件事，特别是开发者，是他们倾向于成为时尚:他们追逐任何看起来最酷或最闪亮的东西。事实上，当面向服务的架构( [SOA](https://en.wikipedia.org/wiki/Service-oriented_architecture) )出现时，这种情况就发生了。团队不加选择地重新架构他们的应用程序，这样他们的边界被一个网络分开，表面上是为了避免一个单一的架构。然而，他们没有考虑是什么使得一些单片应用程序不可维护——紧耦合。*

 *许多人没有看到的是，真正的问题是缺乏层次或真正的界限。GoF 二十年后，Robert C. Martin 在他的书 [Clean Architecture](https://commandz.io/books/development/clean-architecture/) 中指出“微服务仍然可以通过共享的资源[或]它们共享的数据[相互]耦合。”此外，Martin 表示，这是一种应该尽可能推迟的架构决策，因为微服务本身并不能定义架构。微服务不会修复耦合——好的面向对象设计会。

微服务只是众多解耦策略中的一种(还有面向对象技术、包等。)虽然这是最难也是最明确的界限。马丁·福勒在他的作品《企业应用架构模式*】中，告诫他的读者*“尽可能地限制你的分布边界，因为它们很贵”*。马丁认为，微服务是一种应该尽可能推迟的架构决策，只有当你彻底质疑这种解耦方式时才使用。否则，“简单分离应用程序行为的服务只不过是昂贵的函数调用”(Martin)。*

### 坚持不懈的框架

最后，另一个无视教训、愚蠢的过度依赖和无视耦合危险的例子是对框架的迷恋。框架通常被用作定义应用程序的高层架构。根据 Martin 最近的一些文章，框架的高层目录结构和架构不能传达应用程序的意图，他认为应用程序的架构应该以用例为中心。

> 架构不是(或者不应该)关于框架的。架构不应该由框架提供。框架是要使用的工具，而不是要遵循的架构。如果你的架构是基于框架的，那么它就不能基于你的用例。

虽然不通过应用程序的高级目录结构来传达应用程序的意图本身并不是完全错误的，但是错误的是与框架的实用程序和结构类的紧密耦合。这样做会降低应用程序的可测试性、可移植性和灵活性。然而，这种想法并不新鲜。这主要是对现有原则的重复。在 Martin 撰写关于应用架构的本质及其与框架的关系(或缺乏关系)的论文的二十多年前，[四人组建议他们的读者](https://commandz.io/books/computer-science/design-patterns-gang-of-four/#frameworks-26)警惕与框架的耦合。

> 应用程序依赖于框架，因此，它们对框架接口的变化特别敏感。因此，应用程序应该只与框架松散耦合。

或早或晚，一切旧的都是新的。然而，是旧的是新的，还是我们忘记了过去的教训？

要构建伟大的应用程序和团队，您不仅需要研究过去，还需要应用从这些研究中学到的原则。如果你正在考虑忽略过去的教训，特别是那些像面向对象架构原则和行业最佳实践一样被深思熟虑的教训，你最好问问自己为什么，并且默认假设你是错的。*