# 用 TDD 改善你的生活

> 原文：<https://dev.to/franiglesias/improve-your-life-with-tdd-a5d>

作为雇员或自由职业者，我们向公司和客户出售我们的时间和工作。但是有一点使我们的职业与众不同，那就是我们出售智力劳动。有时甚至是高水平的智力工作。

因此，照顾我们的精神和智力健康似乎是我们应该经常练习的合理活动。

开发世界中的许多人认为，甚至说，测试很难，而且很痛苦，更不用说测试驱动开发(TDD)了。

但是我想证明，如果你想作为开发人员有一个更健康的生活，那么 TDD 是应该遵循的方法。

但是首先，让我告诉你一些关于我们大脑如何工作的事情。

房间里有人不知道如何使用门吗？确定吗？你见过有说明书的门吗？我有:那些拉或推提醒。

你有没有站在一扇门前却不知道如何打开它？我有。

事实上，外面有很多这样的门。

重点是门要好用。但是这并不总是发生。如何使用门是一件显而易见的事情，不是吗？

那么，开关呢？

我说的是那些大房间里的开关面板，它们与它们控制的灯的位置无关。它们有时位于灯光看不见的地方。你需要尝试几次，找到打开你想要的灯的秘密组合。

开关和它控制的灯泡之间的关系应该是显而易见的。

当我们谈论显而易见的东西时，我们谈论的是我们不需要在大脑中获取的知识。知识就在那里，在世界上。我们只需要在做其他事情的时候使用它。我们想开门和开灯，而不用考虑。

因此，当我们不得不考虑显而易见的事情时，我们浪费了部分精神资源，在我们的工作记忆中分配了我们宁愿用于其他目的的空间。

当我们使用一个对象所需的所有线索都存在于该对象本身时，知识就存在于这个世界中。所以，我们不需要关心，推理或者检索如何操作那个东西。当我们需要这样做的时候(推理、记忆指令等等)，我们需要把知识输入我们的大脑，以便实现我们的目标。

因此，当我们执行一项任务时，世界上的知识越多，我们头脑中需要的知识就越少，从而留下了自由空间，例如，我们可以用来更好地思考手头的任务。

我在工具中思考得越少，我就越能在用这些工具执行的任务中思考。

但是，有多少空间是可用的？

嗯……听起来很失望:不算太多。

我们的记忆容量实际上是无限的。你可以把它想象成一个巨大的智能硬盘，它可以保存多年的记忆和数据。它不是被动存储。事实上，它重建了我们的记忆，以便存储和检索东西。这很重要，因为当我们存储或检索东西时，我们需要使用我们的工作记忆来保存我们正在使用的数据。很像电脑，不是吗？

然而，我们的工作记忆和长期记忆是完全不同的。有人称之为“短期记忆”，有人称之为“工作记忆”……我认为你可以把它看作一个处理器，它有一些寄存器，在工作时可以存储有限数量的信息单元，称为组块。块可以有可变的大小，但是它们是有意义的。

你记得电话号码吗？我敢打赌，你分组的数字，只有两个或三个数字保留。

这是因为我们的处理器可以管理有限数量的块。大约 7(正负 2)，这因年龄和个人而异，但这是一个非常好的近似值。因此，我们试图保存尽可能多的“寄存器”,将信息分组，并留出一些空间。

如果我们填满所有的寄存器会发生什么？任务精度和性能下降，错误增加。一般来说，如果我们试图在工作记忆中同时保持许多事情，我们的表现会更差。

当然，这是一种过度的简化。然而，我认为你可以了解全局。如果我们把知识放在这个世界上，而不是保存在我们的头脑中，我们可以减少超载，这样做我们会在任何任务中表现得更好。

你可以通过实践把一些知识从工作记忆中剔除。这就是为什么当我们引入一项新技术，或一种新的语言功能，或一种新的工具等，我们需要走得更慢，我们在工作中会有更多的错误。我们需要时间在把知识放入世界的同时，让我们头脑中的东西自动化。

在我们的工作中，我们需要管理无法自动化的任务，我们通常每次都在处理新的任务。

现在，是时候回到这篇文章的主要目标了。先说一个开发者的人生。

让我们分析一下，当我们在没有测试的情况下编程时会发生什么…

事实上，我们总是做测试，但我们倾向于手动测试。这就是我们所说的调试。我们使用试错法:这行得通吗？没有…？再试一次。是的…？去吧。

这个过程在这幅图中得到最好的反映:我们试图编写代码，并在编写代码的同时验证代码是否如我们所愿地工作，直到我们认为它已经完成。之后，我们尝试验证代码作为一个整体工作，然后，我们记得我们忘记了一些细节…我们部署，我们发现新的细节不起作用，所以我们需要修复它们。

在一天结束的时候，我们会发现自己非常头疼，并且感觉自己错过了什么。

这是因为我们试图同时管理我们大脑中的所有信息(记住，这是有限的)，我们过度充电了。最好的策略是写下目标，子任务，用这些外部的帮助来帮助我们。

例如:一个简单的 API 端点可能需要很多东西:

1.  控制器动作
2.  此控制器动作的路由
3.  执行操作的用例或命令对象
4.  可能是一个实体(或者更多)和存储库
5.  存储库 DIC 定义
6.  也许是一种服务
7.  维修驾驶员信息中心的定义
8.  响应对象

我们的记忆变得超负荷。这解释了为什么我们感到疲劳和压力，感觉我们可能忘记了什么，对我们正在做的事情不安全，或者我们是否遗漏了一些重要的事情。

因此，让我们看看我们将如何执行相同的过程，这次是在最后进行测试。

好吧。这看起来很熟悉，但是现在在过程的最后有测试。我们自动化的测试。

最终结果更好，因为由于测试，我们对代码更有信心了。但是一天下来我们还是一样头疼。

是的，我们一直在做同样多的工作，同样的内存过载，还要写一堆测试，而我们的大脑却在尖叫:“嘿，伙计，工作完成了！你到底在干什么？”

在那种情况下，也许我们的测试不是世界上最好的测试…

事实上，当我们开始测试阶段时，我们已经很累了。这解释了为什么许多人认为测试很难，很痛苦。

因此，测试提高了我们对代码的信心，代价是大量的额外工作。我们的生活并没有因为考试而变得更好，即使我们晚上睡得更好…
怎么了？

要真正改善你的生活，你应该尝试不同的方法。你应该做 TDD。

这是 TDD 循环:一次做一件事(并推迟决策):

*   一个失败的简单测试(不要写代码，直到你有一个测试)
*   通过这个简单测试的代码(不要写任何多于或少于所需的东西)
*   审查代码以改进一些东西，如命名、架构、应用模式、减少重复，但不要实现任何新的东西，保持测试处于绿色状态。

这里你可以从我们工作记忆模型的角度来看这个过程。当我们写第一个失败的测试时，我们关注的是那个测试。所以我们不想关注任何事情。编写测试也意味着我们把我们需要的知识放到世界上。我们的记忆几乎是自由的。

接下来，我们关注于编写通过测试所需的代码。我们需要的知识在测试中，那恰好是我们任务的目标，所以它在世界上，而不是在我们的脑袋里。

我们只需要用一种方式来思考，使测试通过，所以，如果这是第一次测试，我们只需要编写可能的更明显的实现。即使实现简单到直接返回测试所期望值。不需要担心其他任何事情。

然后，一旦测试通过，我们可以看一下代码，看看我们是否可以通过重构来做一些改进。我们不必添加功能。我们必须保持测试通过，同时整理东西，删除不想要的重复，等等。

我们将重复这个循环，直到我们完全实现这个特性。我们不需要写额外的测试，我们没有忘记一些东西的风险。我们的头不疼。我们用大脑思考，避免记忆超载。

不是魔术，是 TDD。当然，要做到这一点需要一些训练。TDD 是一个智能工具，工具的使用需要自动化。因此，你应该做一些练习，比如形，既可以是为你自己，也可以在同事的帮助下，在一个练习团体中……做任何适合你或你的团队的事情。练习，练习，再练习。一旦你能够一步一步地前进，你会发现不仅事情变得更容易，而且从长远来看，你会更快乐，压力更小。

最后一个建议:

储存你在这个世界上需要的大部分知识:使用待办事项清单、便利贴、写下任务列表、绘制模式、模型、概念图…

解放你的头脑，为一次做一件事留出空间。

TDD 不仅仅是测试。就是把你需要的知识放到代码里(世界里)，解放你的思想。就是把决定推迟到你准备好做决定的时候。

真的，试试 TDD，你作为开发者的生活会改善。