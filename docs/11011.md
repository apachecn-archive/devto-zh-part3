# 网络分析的现状📊

> 原文:[https://dev.to/areknawo/the-state-of-web-analytics-5171](https://dev.to/areknawo/the-state-of-web-analytics--5171)

**这篇文章摘自[我的博客](https://areknawo.com)，所以请务必查看更多最新内容😉**

如果你曾经从零开始建立过一个网站，或者至少管理过一段时间，那么你很有可能确切地知道什么是 **web analytics** 工具，以及它们提供了什么好处。在今天的文章中，我们将探索一下网络分析的世界。这个特殊的市场是什么样子，它的走向是什么。此外，对于这项工作来说，最好的工具是什么？可以检索到关于用户的哪些确切的**数据**？最后，我个人认为理想的网络分析工具应该是什么样的。**让我们开始吧！**😁

# [](#why-web-analytics)为什么是 web analytics？

我认为在现代世界，几乎每个以某种方式访问过 WWW 的人都知道分析意味着什么。这个辉煌的世界被数据研究者所喜爱，而被用户所憎恨，它指的是从给定产品的用户那里收集、挑选并自然地**分析**数据。这种做法非常流行，在日常生活中很容易观察到。但是，这对广大的 web 开发人员社区意味着什么，我们为什么要关心它呢？

首先，让我们从用户的角度来看看所有这些东西。当你知道有人一直在监视你的活动并保存你的一些数据时，你很可能不会感到惊喜。当然，你可以通过不接受 **cookies** 或者直接离开给定的网站来轻松退出。可悲的是，一些网站将 cookies 作为一项要求，从而迫使你接受它们。从那一刻起，除非你真的担心你的**隐私**，否则你很可能会忘记一切，继续体验网络。至于收集到的数据——我们稍后再谈。

当你是一名网络开发人员时，很有可能你会走到障碍的另一边。管理一个公司网站、作品集、博客，甚至是一个 OSS 项目的特殊网站，你很可能会很快转向使用 web analytics。设置整个过程再简单不过了——使用市场上最受欢迎的选项**谷歌分析**，你只需为你的网站创建一个免费账户，复制并粘贴一段**跟踪代码**。然后你只要看看你的数据，庆祝任何形式的访客数量的增长。除此之外，你还可以看到不同网页的表现如何，你的访问者的一般来源是什么，等等...所有这些数据可以让你**从小到大改进你的网站**。但在现实中(我个人无法证明那种说法)，当涉及到个人网站时，当数字达到数百万时，许多人往往不再经常查看它们。不知道数据分析公司是怎么回事。🕵

# [](#how-does-it-work)它是如何工作的？

在我们继续之前，我想快速总结一下网络分析工具是如何工作的。我不会在这里做任何详细的教程(顺便说一句，让我知道你是否想在下面的评论中看到一个)，只是一个小的概述。我们将主要看一看**客户端方面的东西**，因为这是我们最感兴趣的——是什么以及如何容易地获得某些数据。📊

## [](#general-background)一般背景

网络分析工具，像许多其他工具一样，由几个特定的部分组成。这里我们可以将我们的软件解耦成**跟踪代码**(客户端)**服务器代码**和**仪表板**(后端)。只有将所有这些部分结合起来，它们才能提供完美的体验。

跟踪代码(也称为片段，许多人只是复制粘贴，并不真正关心)可能是网络分析软件最重要的部分之一。它的工作是存储、收集和发送用户数据到服务器。虽然收集数据是用不同的 JS 方法完成的，但是存储部分就是臭名昭著的**[cookie](https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie)**的用武之地。🍪为了知道哪些数据与哪个用户相关联，每个新访问者都会被分配一个**唯一 ID** 。它随后在 cookies 的帮助下被存储，并在需要将数据发送到服务器时使用，以便更容易地比较不同用户的会话。

当数据到达服务器时，需要对其进行处理。调用不同的方法、与旧会话进行比较、计算其他数据等。-都在服务器上进行。例如，我们可以检索关于用户屏幕尺寸的数据。然后，在服务器上，我们可以确定他是使用电视、PC、平板电脑还是手机访问您的网站。当然，我们不能忘记我们数据的某种存储方式- **数据库**。此外，保持这些数据的有序和安全也很重要。😉

最后，与服务器一起，您很可能想要一个漂亮的仪表板。你的数据呈现得越好，你能从中获得的信息就越多。越顺眼越好。显然，这部分不是强制性的，但通常是非常必要的。这并不是真的很难做到，而且好处是惊人的！😃

## [](#data)数据

有了这个快速的概述，我认为检查使用 JS 内置方法可以从用户那里收集哪些信息以及有多容易是一个好主意。

### [](#user-sessions)用户会话

你可以计算给定用户访问你的站点的数量，只需要客户端-服务器交互和我前面提到的用户 id。

### [](#timing)计时

你很可能想知道什么时候你的页面得到最多的访问。这就是为什么你可能需要跟踪用户的时间。了解诸如用户在你的页面上停留多长时间以及他们访问页面的时间等细节会给你带来很大的优势。为此，您可以利用 JS [Date](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date) 对象。这样你就可以检索用户进入和退出你的网站的时间。为了保持站点不同页面的时间，你可以通过 [localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage) 与 [onload](https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onload) 和 [onunload](https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onunload) 事件来节省时间。另外，记住用`.getTime()`获取的时间是用 **UTC 格式**获取的，所以如果需要的话，你必须把它转换成你选择的时间格式。例如，无论出于什么原因，如果您希望将这个时间显示为用户的格式，您必须使用`.getTimezoneOffset()`方法，然后应用检索到的值。

```
const date = new Date();
localStorage.setItem('startTime', date.getTime()); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#location)位置

如果你想知道你的用户大多来自哪里，你必须收集他们的位置。根据您的需求，简单的 **IP 定位**服务可能就足够了。它可以让你知道用户的原籍国。如果你想得到一些更准确的信息，你需要利用 **[地理定位 API](https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API)** 。这将给你用户的精确的纬度和经度坐标。请记住，如此敏感的数据需要用户的适当权限。

```
navigator.geolocation.getCurrentPosition(({coords}) => {
    coords.latitude;
    coords.longitude;
}) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#referrer)推荐人

无论你是否在社交媒体上分享和推广你的网站，你都可能想知道有哪些其他网站链接到你的页面，以及你从什么来源获得了最多的浏览量。获取这样的值真的很容易。你只需要读取`document.referrer`的值。

### [](#user-agent)用户代理

如果你对 JS 编程已经有一段时间了，你很可能知道臭名昭著的**用户代理**字符串。通过适当的解析，它可以为您提供有关用户浏览器、操作系统、架构的信息，有时甚至可以提供设备的名称。当然，原始形式的`navigator.userAgent`只是一个没有必要知识的冗长、无意义的字符串，需要从中提取数据。有相当多的 JS 库专门用于这个目的。

### [](#screen-size)屏幕尺寸

用 JS 知道用户的设备屏幕尺寸是相当容易和明显的。如果可以用来判断用户的设备类型。当然，这种信息也可以从操作系统名称中确定，但是这种方法可能更准确一些。

### [](#language)语言

用户的语言显然可以根据他的位置来确定。但是有一个更简单的方法——只需访问`navigator.language`属性。请记住，这将返回相应用户的首选语言代码，而不一定是基于位置的代码。

### [](#more)更

全局`window.navigator`对象提供了大量关于用户、他的浏览器和系统的信息。你可以用`navigator.platform`读取设备平台，用`navigator.hardwareConcurrency`读取设备核心数，获取浏览器等数据。JS 为您的数据提供了许多选项和可能的来源。也就是说，我上面提到的一切对于大量的用例来说很可能是足够的。

## [](#the-rest)休息

同样，当您的跟踪代码收集到足够的数据时，您可以继续将它发送到服务器。最简单的方法就是使用 **AJAX** 和[T3】XMLHttpRequestT5。你的服务器可以用 **PHP** 、 **Node.js** 或者其他任何编程语言编写。在这里，您可以监听传入的数据，分析它，应用您自己的算法，并将输出保存到数据库中。您应该记住将您的数据保持在一种结构中，这将有助于您在需要时方便地维护和访问它，例如仪表板图。](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest)

# [](#hey-google)嘿谷歌！

有了关于什么样的数据可以被分析工具读取的知识，让我们回到这篇文章标题的主题，即网络分析工具市场的现状。在这里，无需过多讨论，明显的赢家是 **[谷歌分析](https://analytics.google.com/)** (GA)。这是一款由谷歌开发的非常受欢迎的分析工具，每天对数百万个网站进行统计。而且是为了*【免费】*。为什么流传这么广*的**真实价格**是多少？*

 *## [](#the-pros)利弊得失

正如我前面提到的，GA 设置相当简单。您只需为您的域名创建一个免费帐户，将跟踪代码复制并粘贴到您网站的每个页面，就大功告成了。您将获得一个精致、现代外观的仪表盘，其中包含大量数据可供分析和探索。

GA 最有趣的部分之一是**实时**部分。在这里你可以看到关于用户现在访问你的页面的数据，只有几秒钟的偏差。就像在通用部分一样，你可以获得当前用户的**号**，他们的**推荐链接**，他们现在看到的页面地址，来源国等等信息。

您还可以访问**采集**部分。在这里，你可以看到关于用户访问来源的详细图表。它可以分为直接访问(来自搜索引擎和输入 URL 时)、社交(来自社交媒体)、推荐(来自推荐网站)和电子邮件(来自营销活动和时事通讯)等类别。这些数字刚好可以让你知道自己还需要进一步提高什么。

下一个重要部分是关于用户及其行为的部分。在第一种情况下，您可以在一个地方获得所有用户的一般信息。像 **OS** 、**设备类型**、**位置**、**语言**、浏览器、&等数据更多。更有趣的是关于用户行为的小节。在这里你可以比较**新用户和**老用户的数量，他们访问的**频率**以及他们在你的网站上花费的时间。

除此之外，GA dashboard 允许您做更多事情。您可以访问更多的数据，但是，这可能不是真正需要的。您可以创建自己的**对比图表**和图形，并查看**不同时间段**的数据。这个工具当然很棒，但是它也有代价。

## [](#the-cons)弊

你很可能知道我们将在这一部分谈论什么。谈到分析工具，隐私是 T2 的噩梦。更糟糕的是，不仅网站所有者有数据，谷歌也有，甚至可能更多！

但说真的，谁能为互联网隐私的现状责怪谷歌呢？用户和网站管理者决定自由使用他们的工具。没有人被迫做这件事。👏无论如何，一些陈述的不准确性和人们不想详细阅读每件事只是当今网络分析和隐私状况背后许多其他原因中的两个。

回到 GA。有一个功能，你可以通过 GA dashboard 获得更多关于用户**年龄**、**兴趣**等的数据。问题是怎么做？这些数据是怎么来的，从哪里来的？这不是你可以通过标准的网站访问获得的东西。我猜这与特定用户的谷歌账户有关。由于谷歌 Chrome 拥有约 60%的网络浏览器市场份额，谷歌账户的数量也可能非常高。这是数据的一个可能来源。自然，要获得这些信息，你必须同意更多的谷歌交易。我个人在一些页面上使用过 GA，从来没有激活过这些附加功能。对我来说不太可信。🤨

# [](#alternatives)替代品

所以，是的，谷歌分析并不完美。但因为它们如此受欢迎和免费(至少当我们谈到钱的时候)，对于一个好的有竞争力的产品来说真的很难。我个人理解 GA 的问题，并且想要改变，我已经在网上搜索了**最佳选择**。然而，我没有改变。主要原因是价格。所有类似的服务都是付费的，在某些情况下，费用很高！有一个更好的工具，不需要任何钱，只需要通过我的网站收集数据，这是一个诱人的提议。这也是很多人依然选择 GA 的原因。无论如何，这里是我偶然发现的一些报酬最好的工具。

## [](#adobe-analytics)[Adobe Analytics](https://www.adobe.com/analytics/adobe-analytics.html)

[![](../Images/3217fa4721a5fb92e24a9ccf7c92ef0c.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--1AGTxJCq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://areknawo.com/content/images/2019/03/Screenshot-from-2019-03-07-17-17-23.png)

## [](#statcounter)[Statcounter](https://statcounter.com/)

[![](../Images/da21fbd7e9f33e2c56ce0ca7e02b1a68.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--unXMHXGr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://areknawo.com/content/images/2019/03/Screenshot-from-2019-03-07-17-18-30.png)

## [](#simple-analytics)[简单分析](https://simpleanalytics.io/)

[![](../Images/450ae27ffa222eaa1316845946008517.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--YiBzaJFF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://areknawo.com/content/images/2019/03/Screenshot-from-2019-03-07-17-18-45.png)

以上只是一些付费网络分析工具，可以在那里找到。自然还有很多！我没有测试过上面的任何工具，就像我通常在整理列表时做的那样，所以，抱歉没有描述。我只是不会写我没用过的东西。他们在他们的网页上宣传有趣的功能，所以你可以访问他们并自己决定。

现在，某个东西没有被命名为 Google Analytics，这并不意味着它比 GA 更重视隐私。当然，甚至可以更糟！闭源、托管工具可以完全信任。这就是为什么我求助于**开源**、**自托管**的替代方案。以下是我找到的一些最好的。

## [](#owa)[OWA](http://www.openwebanalytics.com/)

[![](../Images/eb84a008c8af5096d55f5d0da6c4cd99.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--MOnQ5xIN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://areknawo.com/content/images/2019/03/Screenshot-from-2019-03-07-17-33-39.png)

开放网络分析为 GA 提供了一个很好的替代方案。但是，快速浏览一下它的登陆页面和 GitHub repo 就会发现它最大的缺点之一——它的**没有积极维护**。此外，它的集成仪表板看起来有点旧。我希望它会很快变得更好，但现在，我建议看看其他工具。

## [](#matomo)[Matomo](https://matomo.org/)

[![](../Images/6897a07b7a85786f9642a285b8f98cc5.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--DyCX-pFZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://areknawo.com/content/images/2019/03/Screenshot-from-2019-03-07-18-25-12.png)

Matomo 是一个领先的开源网络分析工具。它得到积极维护，并提供自托管和托管(付费)解决方案。它配有一个**漂亮的仪表板**，有一个非常简单的设置，收集的数据足够用于任何目的。

## [counly](https://count.ly/web-analytics)

[![](../Images/8907975a3fa2af5178c4f2a184df0d39.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--6kXrU1ov--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://areknawo.com/content/images/2019/03/Screenshot-from-2019-03-07-18-30-21.png)

Countly 是一个现代的、持续的网络分析项目。它有一个光滑的仪表板和**基于插件的架构**。因此，它可以很容易地扩展，以充当例如**移动分析**工具或活动管理器。可悲的是，许多插件和功能只能在 pro(付费)版本中使用(无论是否自托管)。😔

## [](#fathom)[揣摸](https://usefathom.com/)

[![](../Images/c533df6fbfec643d87dd4ee44a2716d3.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--f_ixeY9U--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://areknawo.com/content/images/2019/03/Screenshot-from-2019-03-07-18-32-01.png)

Fathom 是一个简单的、关注隐私的网络分析工具。凭借其——合规性，它提供尽可能少的数据，而不侵犯**用户的隐私**。它既有免费的、自托管的版本，也有付费管理的版本。同样，如果你想收集和分析关于你的用户的非常详细和具体的数据，它可能不是一个适合你的工具。这是给那些你关心隐私的人的——他们自己的和他们的用户的。

# [](#the-ideal)理想

到本文的这一点，我们已经探索了可以收集哪些数据，以及一些关于 GA 和其他工具的信息。所以，我认为这是一个思考完美的网络分析工具应该是什么样子的绝佳时机。

依我看，说到网络分析，最重要的是**平衡**。**用户隐私**和**收集数据**之间的平衡。用户不想分享太多，分析也不想得到太少。那么，如何达到这种状态呢？我觉得就是**不可能**。你不可能同时满足双方的需求。总有至少一个人会对你的选择不满意。那会是谁呢？

就个人而言，我会把控制权交给创建者/网站管理者。他是负责人。他应该得到一个专业工具，允许他只检索他需要的数据，从而保护用户的隐私。这件事可以用许多方法来做。通过一个系统的插件或可配置的跟踪脚本。可能性是**无尽的**！

为了更好地总结这篇文章，我列出了我理想的网络分析工具应该具备的所有特性:

*   **集成式仪表盘**(时尚的用户界面)，采用最新的网络技术(Vue 或 React)构建。
*   简单、可扩展且**可插拔的架构**，允许向仪表板添加功能并跟踪代码。插件 API 应该易于使用和实现(很明显)。
*   跟踪代码，以及整个工具应该是**可配置的**，从而允许网站管理员只选择和查看他需要的数据，从最小的默认值开始。
*   可选的**用户通知**集成了跟踪代码，让用户知道收集了哪些确切的数据。
*   100% **开源**和**仅自托管**。用 JS 和 NodeJS 构建，便于安装和设置(我在这里完全有偏见😂)

那只是我的设想。这也是非常可行的，我希望在不久的将来实现。你认为这个特性集怎么样？像这样的东西能满足你的需要吗？你愿意看到这样的项目出现在现实生活中吗？在下面的评论里让我知道**！😁**

# [](#fine-enough)够细了吧？

对于这篇关于网络分析和网络分析现状的快速文章，**你有什么看法？**你对这个市场的发展方向有什么看法？写在评论里。还有，你对这篇文章有什么看法？跟**说一声下面**的反应。无论如何，如果你喜欢这个帖子，可以考虑**分享它**并在 Twitter 上关注我 **[在我的脸书页面](https://twitter.com/areknawo)** 上关注我 和 [**以了解最新内容。🚀**](https://www.facebook.com/Areknawos-Blog-770620059945105)

# [](#resources)资源

*   [**30 个最好的网络分析工具**](https://shanebarker.com/blog/web-analytics-tools/) 来自【shanebarker.com】的*；*
**   **[Web 需要 OpenWebTraffic](https://staltz.com/open-analytics.html)** 来自【staltz.com】T4；*   **[数据隐私隐忧与谷歌](https://hackernoon.com/data-privacy-concerns-with-google-b946f2b7afea)T3【来自 hackernoon.com*；*****