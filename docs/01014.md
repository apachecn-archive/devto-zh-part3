# 在 Google Assistant 上使用 Dialogflow 为初学者构建聊天机器人

> 原文：<https://dev.to/jaydeepborkar/building-a-chatbot-using-dialogflow-on-google-assistant-for-beginners-433l>

在本教程中，我们将学习使用 Dialogflow 构建一个聊天机器人(一个虚拟助手)，它将在 Google Assistant 上工作。

但是什么是 Dialogflow 呢？
这是谷歌用来构建对话聊天机器人的工具。

**步骤**
1)转到 [Dialogflow 控制台](https://dialogflow.com/)——你会看到 Dialogflow 主页。
2)使用您的 Google 帐户登录。
3)登录后，点击*进入控制台*。
您将被引导至 Dialogflow 的主控制台。现在，单击最左侧列中设置图标旁边的下拉图标，然后单击创建新代理。

现在，这里的代理是什么？
Agent 是 Dialogflow 中的一个接口，它包含称为 intents 的不同部分，这些部分进一步包含对用户查询的所有响应。随着我们继续进行，我们将了解更多的意图。

**创建新代理**
点击创建新代理后，输入代理名称、默认语言、时区，然后点击创建。保持*创建一个新的谷歌项目*，因为它是在谷歌项目部分。它将为谷歌和谷歌云上的行动创建一个新的谷歌项目。我们将把 Dialogflow 与谷歌控制台上的操作集成在一起，这将有助于我们在谷歌助手上部署它。
现在，您可以在控制台中看到您创建的代理。我们现在将为我们的代理创建不同的意图。您可以创建任意多的意图。已经创建了两个默认意图——后退和欢迎。

**让我们来理解默认的回退和欢迎意图**
当机器人不理解用户触发/询问的查询时，回退意图就出现了。这意味着没有与用户询问的查询相匹配的意图。它会给出类似*对不起，我没听懂*的回应。实事求是地说——每当你对谷歌助手说一些非常不寻常的话时，它会说*对不起，没找到你*。在这里，当你说了一些奇怪的不是自然语言的话后，回退意图被触发并给出了这个反应。

一旦你的机器人被调用，默认的欢迎意图将问候用户。您可以使用想要的响应自定义这两种默认意图。

现在，单击+号创建更多意图。根据您的用例，您可以创建任意多的意图。假设你正在为一家冰淇淋店开发一个聊天机器人，用户想知道你提供的所有口味。在这里，您将创建一个意图，比如说*口味*。然后，您将添加培训阶段。

**训练阶段**
训练阶段是用户会问你聊天机器人的问题。您可以添加任意多的类似训练短语。这些是你认为用户最有可能问的问题。对于口味意图，您可以添加训练短语，如- *您有哪些口味？*、*给我看看口味*、*口味*、*我想看看口味*，不胜枚举。这些训练短语用于在内部训练自然语言理解模型。这是关于
Dialogflow 最好的部分，你不必写任何代码来训练模型。在需要实时结果的情况下，您可以编写一些 Node.js 代码，我们将在后面讨论！

**意向中的响应部分**
现在，在响应部分，您可以添加您想要向用户显示的响应。例如，对训练短语中的一个问题的简单回答- *告诉我口味*可以是*芒果、香草、巧克力*。确保你对你创造的每个意图都附加了一句*你还想知道什么吗？*，因为对于除了退出意图(用户退出时你会使用的意图)之外的每个意图，你的响应都必须有用户提示，否则这将违反谷歌发布的准则，你的应用可能不会发布。

以类似的方式，根据你的需要，你可以有尽可能多的意图。

不要忘了每次做打算的时候都要存钱。

**做出退出意图**
你还需要做出一个在用户离开你的应用时会被触发的意图，我们称之为退出意图。例如，如果用户说，*拜拜*，你可以用与*拜拜*相关的训练短语对此有一个单独的意图，并且在回复部分，你可以添加任何你喜欢的东西或者类似于*随时再次访问*的东西。不要忘记在意图底部打开*将此意图设置为对话的结束*，因为此意图将标志着与用户对话的结束。

**使用 Node.js 代码**
现在，如果你想给你的用户一些实时输出，那么你可以为同样的事情写一些 Node.js 代码。转到控制台左侧的 Fulfillment 部分，在那里您会看到一个行内编辑器选项，打开它以启用它。您可以在 index.js 部分编写代码。比方说，你正在为一家餐馆制作一个应用程序。餐厅的工作时间是从上午 10:00 到晚上 10:00，现在如果有人想在晚上 11:00 检查餐厅是否营业，而不是给出静态的响应，如“我们的时间是从上午 10:00 到晚上 10:00”，代码将获取实时参数，并将告诉餐厅在该特定时间是否营业。您可以将 Node.js 代码用于不同的用例，这只是一个例子。完成后，点击部署。

你可以将你的聊天机器人与不同的平台整合，比如 Slack、Facebook Messenger、Alexa、Cortana、Twitter、Viber、Skype、Telegram 等等。确保切换到你喜欢的平台。我们将坚持使用默认的谷歌助手。

**历史**
在控制台的历史部分，你可以查看用户是如何与你的应用程序交互的，以及他们都说了些什么。你可以使用这个工具来检查你的应用程序不能回答的具体问题，以便你能够解决它们。

**分析**
在分析部分，你会看到对你的应用表现的分析。
现在该测试应用了。让我们看看它是如何工作的。

**在 Dialogflow 控制台上测试应用程序**
，在右侧，你会看到*查看它如何在谷歌助手*上工作，点击它。一旦你点击它，你会看到测试模拟器。假设我们的应用程序名称是*测试应用程序*，那么您将在模拟器上看到调用短语 something with line*Talk to my test app*。您可以使用所有用于训练模型的训练短语/问题来测试您的应用程序。一旦你的应用程序被部署在助手上，你会对它的实际表现有一个更好的直觉。
现在，该部署了。

在模拟器页面上部署
，你会在左边看到一个概述部分。点击那个。在快速设置部分，您可以选择如何调用您的操作。在*准备部署*部分，您可以选择您希望在哪些国家提供您的应用程序。默认都是 215 个国家。你还可以选择在什么表面上运行你的应用，默认情况下是手机和扬声器。

现在，转到*部署*部分，转到*目录信息*——在这里您可以为您的应用程序添加简短和详细的描述、调用示例、应用程序的背景和个人资料图像、联系信息以及隐私和同意。这些都将对您的用户可见。随意点击*需要帮助创建隐私政策？*要了解如何制定隐私政策，请遵循下面的所有步骤。你可以使用各种免费工具为你的应用程序制定隐私政策。然后你可以选择你的应用程序属于哪个类别，以及它下面关于你的应用程序的一些其他相关信息。完成所有这些操作后，单击顶部的保存。

之后，您可以在 Deploy 部分添加表面功能和公司细节。之后，转到 deploy 部分中的 *release* 部分——在那里，您会看到一个在 production 部分提交生产的选项。点击这个按钮，你的应用程序将被提交给谷歌审核。如果它符合所有准则，它将很快在 24-48 小时内部署在谷歌助手上(一旦部署成功，您将收到谷歌的电子邮件；如果没有，在这种情况下，您会收到一封包含所有错误的电子邮件，以便您可以修复它们并再次提交制作)。您还可以选择您的应用程序的 alpha 和 beta 版本。

一旦部署完成，你的应用将可以在超过 5 亿台设备上使用，而无需任何安装，这不是很酷吗？

如有任何疑问或建议，欢迎发表！