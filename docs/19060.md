# 有效的数据库设计:第 2 部分

> 原文：<https://dev.to/adammc331/effective-database-design-part-2-2ben>

在[的上一篇文章](https://dev.to/adammc331/how-to-properly-design-a-database-part-1-2h6f)中，我们讲述了适当的数据库设计的重要性，并了解了标准化——我们可以遵循这一过程来确保数据库中的数据完整性。

规范化是通过确保您的数据库符合许多标准形式来实现的。每一种范式都建立在最后一种范式的基础上，每一种范式都让你的数据变得更好。在这篇文章中，我们将讨论如何实现第一范式(1NF)。

## 第一范式

为了确保一个表满足 1NF，我们需要三样东西:

*   每条记录都由一个唯一的主键表示。
*   每一列只有原子(单个)值。
*   没有重复的组。

我想从一个设计不太好的表格开始解释每一个要点，并解释我们可以采取的实现 1NF 的三个步骤。让我们创建一个表来记录学生、他们的年级以及他们所上的课。

| 名字 | 年 | 班 |
| --- | --- | --- |
| 圣经》和《古兰经》传统中）亚当（人类第一人的名字 | 新手 | 数学，编程 |
| 王子 | 新手 | 历史 |

## 主键

数据库表中的每条记录都应该有一个唯一的标识符，称为主键。在许多情况下，这将是一个数字。但是，在某些情况下，一个字符串就足够了(想想用户名或社会保险号——这些应该是人与人之间唯一的)。

主键通常是一列，但也不是必须如此。两列一起可以是记录的唯一标识符。

到目前为止，我们的表没有任何唯一的标识符。一个学生的名字不是唯一的，(姓名，年份)的组合也不是唯一的，(姓名，年份，班级)的组合也不是唯一的。要解决这个问题，我们只需添加一个唯一的 id:

| 身份证明（identification） | 名字 | 年 | 班 |
| --- | --- | --- | --- |
| one | 圣经》和《古兰经》传统中）亚当（人类第一人的名字 | 新手 | 数学，编程 |
| Two | 王子 | 新手 | 历史 |

## 原子值

当我们谈论原子价值时，我们的意思是它不能再分了。简单地说，这意味着我们不应该在一个列中有一个值列表。因此，我们的 classes 列不符合 1NF，因为我们不应该在一个单元格中有多个值。

对此的快速解决方案是将它们分成各自的列。

| 身份证明（identification） | 名字 | 年 | 一班 | 二班 |
| --- | --- | --- | --- | --- |
| one | 圣经》和《古兰经》传统中）亚当（人类第一人的名字 | 新手 | 数学 | 编程；编排 |
| Two | 王子 | 新手 | 历史 | 空 |

然而，我们在这里制造了一个问题。

## 重复组

表格不应有重复的列组。这意味着，我们不应该有`class_one`、`class_two`，...，`class_n`。这样做不好的原因是，对于不上 N 门课的学生，我们最终会得到很多空值，如果最终有一个学生上了 N 门以上的课，我们就必须修改表来添加一个新列。

对此的快速解决方案是将班级视为一列，并在学生每次上课时添加一个新行:

| 名字 | 年 | 班级 |
| --- | --- | --- |
| 圣经》和《古兰经》传统中）亚当（人类第一人的名字 | 新手 | 数学 |
| 圣经》和《古兰经》传统中）亚当（人类第一人的名字 | 新手 | 编程；编排 |
| 王子 | 新手 | 历史 |

## 进一步改进

这个设计*是否*符合 1NF。不过，这与我们在第一篇文章中的表完全相同，我解释过由于数据冗余和完整性问题，这个表设计得不好。

数据库设计的另一个关键概念是确保每个表只代表一个特定的实体。在这里，我们把学生和班级的概念放在一张桌子上。让我们将它们分成不同的表格:

一张`students`表:

| 身份证明（identification） | 名字 | 年 |
| --- | --- | --- |
| one | 圣经》和《古兰经》传统中）亚当（人类第一人的名字 | 新手 |
| Two | 王子 | 新手 |

一张`classes`表:

| 身份证明（identification） | 类别名称 |
| --- | --- |
| one | 数学 |
| Two | 编程；编排 |
| three | 历史 |

它们之间的关系可以在`students_classes`表中单独捕获:

| 学生 id | class_id |
| --- | --- |
| one | one |
| one | Two |
| Two | three |

在此表中，主键是由两者(student_id，class_id)共同组成的。

我希望这对你有所帮助！1NF 是数据库规范化的重要一步，即使进行这些快速更新，我们也有比开始时好得多的数据。没有冗余数据，我们也没有任何数据异常的风险。

在下一篇文章的[中，我们将继续添加这个数据库，并确保它符合 2NF。](https://dev.to/adammc331/effective-database-design-part-3-1113)