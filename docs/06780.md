# 到底什么是停机时间？

> 原文：<https://dev.to/am2/what-the-heck-is-downtime-anyway-31gi>

<figure>[![](img/2f9f392768acc6313e30590b53a6718a.png)](https://www.youtube.com/watch?v=XVggK-IpOvA) 

<figcaption id="caption-attachment-1756">如果服务器倒在数据中心，周围没有用户注意到，算不算停机？</figcaption>

</figure>

有很多关于防止停机的讨论。作为一名数据库管理员和 IT 专业人员，防止停机是我的职责。我通常这样描述我作为 DBA 的工作:“确保数据总是对需要它的人和应用程序可用，而不会对不应该拥有它的人和应用程序可用。”对于第一部分来说，防止停机当然很重要——但是你到底如何定义停机呢？

## “停机时间”对大多数数据库管理员意味着什么

当 DBA 考虑停机时，我们通常会想到“服务器离线”或“数据库没有响应查询”，甚至“数据库没有足够快地响应查询*”但那真的是停机时间吗？*

 *我们致力于尽可能确保系统始终在线。我们需要冗余存储、冗余服务器和冗余网络。我们为 [RPO & RTO](https://www.brentozar.com/archive/2011/12/letters-that-get-dbas-fired/) 而苦恼。但是有多少是必要的呢？我们真的在担心正确的事情吗？我们是否忘记了会影响我们的“停机时间”和恢复能力的其他场景？

*   如果我将 AG 故障切换到另一个复制副本，这是停机时间吗？
*   如果我的辅助 AG 复制副本离线，这是停机时间吗？
*   如果虚拟机重新启动，并“消失”3 分钟，这是停机时间吗？
*   如果虚拟机在凌晨 2 点重新启动并“消失”3 分钟*，这是停机时间吗？*
*   如果登录被暂时锁定，那是停机时间吗？
*   如果离线索引构建导致`dbo.transactions`一小时不可用，这是停机时间吗？
*   如果夜间处理不运行，那是停机时间吗？
*   如果夜间处理运行时间比平时长，这是停机时间吗？
*   如果计划停机，那是停机吗？

## “停机时间”对企业意味着什么

对于大多数业务用户来说，“停机时间”只是他们使用应用程序/系统的能力。他们不关心幕后发生的事情。他们不关心(至少他们不应该)任何给定的服务器是否启动，或者是否有驱动器故障。他们只关心自己能工作，公司能赚钱。

*   如果用户不能从你的网站上购买小工具，那是停机时间吗？
*   如果小工具从用户的在线购物篮中消失，那是停机时间吗？
*   如果 CEO 晚饭后不能登录系统，那算停机吗？
*   如果订单确认电子邮件没有发送，这是停机时间吗？
*   如果用户不能登录(但是登录的用户还是可以做事)，那是宕机吗？
*   如果财务部门在正常情况下不能处理工资单，这是停机时间吗？
*   如果应收账款不能生成发票，那是停机吗？
*   如果中午没有人登录系统，这是停机时间吗？
*   如果没有人在周日凌晨 3 点登录系统，那是停机时间吗？

## 这取决于你的业务

如果你希望我给你所有这些问题的答案，那么我很抱歉。我不能为你回答这些问题。您需要自己动手:为了您的环境、您的公司和您的业务用户。

我建议从与*业务*交谈开始，定义“停机时间”的含义。我曾经在一家公司工作过，在那里，我们衡量停机时间的主要标准是订单量。只要我们每分钟至少接到一个订单，就没有“停机时间”我还在一家金融公司工作过，在那里，交易执行过程中几秒钟的延迟都是不可接受的——但在那里，系统可能会在周末停机，如果有必要的话，每个周末都可以停机。

首先弄清楚你的业务目标是什么。现实一点。(“绝对零停机时间”可能不现实！)通常，企业会考虑收入损失、生产力损失和公司声誉。当你讨论重要的场景时，小心地将业务*想要的*和业务*需要的*区分开来。只有在你分离业务需求之后，你才能开始形成你的技术计划来支持它。你可以设定你自己的目标，这样如果你完成了你的目标，公司也会完成他们的目标。

甚至在服务器离线的情况下，您也可以实现“零停机”。

到底什么是停机时间？最早出现在[的安迪·M·马龙-安](https://am2.co)。*