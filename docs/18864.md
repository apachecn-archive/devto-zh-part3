# IPv6 32

> 原文：<https://dev.to/aewens/ipv32-5fi7>

# IPv32

有些人会看到“IPv32 有多少个地址”这个问题，并不认真对待。在正常情况下，我也不会这么做，但可能是这个问题的荒谬性和无聊的催化作用把我带到了 IPv32 的兔子洞。

在我开始之前，我想警告你，如果你不喜欢数学，这可能不适合你。对于任何可能遇到这种情况的统计学家来说，我只是一个业余爱好的数学家，但我很清楚，试图从两个数据点推断数据绝不可能提供可靠的数据，但我还是这样做了。现在，一切都结束了，让我们开始吧！

首先，要确定 IPv32 中有多少地址，了解现有 IP 模式(IPv4 和 IPv6)中有多少地址会有所帮助。对于 IPv4，我们有大约 40 亿个 2^32 地址，对于 IPv6，我们有大约 3 个 2^128 地址或 3 个 10^38 地址(对于那些不太懂数学的人来说，就是 3 后面跟着 38 个零，也就是很多)。在盯着这些数字看了几分钟并尝试了一些错误之后，我遇到了一个漂亮的等式，它可以使用它们的版本号导出相同的地址空间:

f(x) = 2^(2^(x + 1))

所以对于 IPv4，因为它是第四个版本，函数将是 f(4)，这是 2^(2^(4+1)或 2^32.使用 2^(2^(6+1 的 f(6))或 2^128.的 IPv6 也是如此记住这一点，获得 ipv32 应该只是将 32 插入到我的函数 f(32)中，然后我得到 2^(2^(32 + 1)、2^(2^33 或 2^8,589,934,592.以防你误解，那不是 80 亿，而是 2 的 80 次方。为了尝试了解这个数字到底有多大，我开始在计算器中输入“2^2^33 ”,它告诉我它是∞无穷大。嗯，这显然是不正确的，所以我试着插上了数字 [Wolfram|Alpha](https://www.wolframalpha.com/) ，因为我记得他们可以在他们的网站上用我过去尝试过的其他数学东西做一些奇特的东西。仍然没有爱，它只是坐在那里挂了一会儿，直到我的不耐烦得到了最好的我。

在没有其他选择的情况下，我决定尝试用代数来让计算机更容易地解决这个问题。我真正想要的是这个数是 10 的什么指数，所以我大概知道这里有多少个零(或者数量级)。对于那些记得代数的人，你可以使用我最喜欢的函数，对数，从一个数字中提取指数，因为我想要以 10 为基数的数字(在开始添加其他数字之前，你从 0 到 9 的计数系统)，我开始的等式是:

ln(2^2^33) / ln(10)

这是因为方程式的奇特性质:

y = ln(a^x) / ln(b)

我将以 a^x 为例，告诉你如何用 b^y.得到相同的数，所以从我们最初的方程，我可以用对数的性质简化这个函数:

ln(a^x) = x * ln(a)

建立我们的新方程式:

(2^33) * (ln(2) / ln(10))

虽然与之前的等式非常相似，但它不能在我扔给它的任何计算器上运行，这一个将会工作，并且大约是 2，585，827，973。因此，IPv32 地址空间的大小大约是 10^2,585,827,973，或者是后面有 20 多亿个 0 的 1。

如果这个数字看起来大得难以想象，那是因为它确实如此。在可观测的宇宙中，估计大约有 10^82 原子(如果你取上限估计)。使用 IPv32，你可以给已知宇宙中的每一个原子分配一个 IP 地址，但仍然没有减少它所能支配的地址数量。

现在我有了答案，我应该完成了，对吗？不完全是。

早些时候，我说这是一个兔子洞，因为在解决这个问题时，我开始有其他问题。首先，如果我想存储一个 IPv32 地址，需要多少存储空间？一个 IPv32 地址由 8，589，934，592 位或 1，073，741，824 字节组成(只需将它除以 8，因为 8 位构成一个字节)。由于数据的剩余度量是 1024 的量级，经过一点划分后，我愉快地发现，IPv32 正好是 1 千兆字节(1GB):

8589934592 / 8 / 1024 / 1024 / 1024 = 1

此外，像 IPv4 和 IPv6 一样，可能会有一个 IPv32 地址的可视表示，因此您可以将其提供给`ping`并查看该机器是否可以与该地址通信。这让我想知道一个 IPv32 地址会是什么样子。使用与 IPv6 相同的编码，基数为 16，我可以使用以下公式找到它的编码长度:

(2^33) * (ln(2) / ln(16)) = 2,147,483,648

所以用 16 进制编码 IPv32 需要 20 亿多一点的字符，但是我想我可以做得更好。目前可用的另一种常见编码格式是 base64 编码，它使用所有大小写字母、数字和一些符号，而不是 base 16 中的 0-9 和 a-f。这个等式类似于:

(2^33) * (ln(2) / ln(64))

这个数字略大于 1，431，655，765，所以我将取整为 1，431，655，766，因为我不想尝试表示一个字符的一部分。从 16 进制到 64 进制，到目前为止我已经得到了 16 进制的 1/3 或 33%的编码，这是一个好的开始，但我仍然觉得我可以做得更好。另一种比 base64 包含更多字符的现有编码是 UTF 8 或 Unicode，没错，我正在使用表情符号。目前，Unicode 能够编码 1，112，064 (7^216 - 2048)个字符，对我来说(不管我是对还是错)，Unicode 的基数是 1，112，064，因此我的等式是:

(2^33) * (ln(2) / ln(1112064))

大约是 427，683，174，大约是 64 进制的 30%或 16 进制的 20%。因此，我将尝试性地说，IPv32 将被表示为大约 5 亿个 UTF-8 字符。

虽然有趣，但我最初认为这是一种浪费，因为如果我想托管一个使用 IPv32 的网站，购买作为我的网站的二进制表示的 IPv32 地址可能比托管它更有意义...或者会吗？

虽然现在大多数网站都不是 1GB，但这些年来网站的平均大小一直在稳步增长(事实上，每年大约增长 573 千字节或 573kb)。目前，平均经常访问的网站大约为 3MB 或 3MB，因此我可以使用以下函数绘制网站随时间变化的预期大小:

f(x) = 1024 * (573x + 3072)

在这个函数中,“x”是从今天开始的年数,“573x”是我们的变化率,“3072”是 3MB(3 * 1024),“1024”将值换算成字节，因为 573 和 3072 目前是以千字节为单位。这个等式绘制了一个随时间稳步攀升的线性图，相比之下，对于给定版本的 IP，IP 地址空间的增长是指数级的。因此，IP 地址空间在某个时候肯定会比普通网站的规模更大，但这种情况会在未来多长时间发生呢？

显然没有办法真正回答这个问题，但根据我掌握的数据，我绝对可以做出一个有根据的猜测！要开始回答这个等式，我首先需要知道 IP 的新版本多久发布一次，以将它与我目前对网站增长的功能联系起来。通过快速搜索，我发现 IPv4 于 1983 年首次部署，IPv6 于 1998 年起草，并于 2017 年成为标准。虽然我倾向于在 1998 年使用 IPv6，因为我个人看到了 2017 年之前 IPv6 在野外的使用情况，但 1998 年和 1983 年之间的差异是 15 年，这意味着我们应该在 2013 年(1998 + 15)获得新的 IP 版本，但这肯定没有发生。因此，为了假装我有一个可以预测真实数据的模型，我将违背我的个人信念，使用 2017 年，使两个 IP 版本之间的时间间隔为 34 年，或者每一个 IP 版本的时间间隔为 17 年。回溯到 1930 年，这在理论上是非常重要的。有了这些，我现在就有了构建函数所需的所有信息，该函数用于绘制多年来 IP 地址空间的增长情况:

f(x) = (2^(x / 17)) / 8

这里的“x”代表过去的年份，除以“8”得到以字节为单位的数据，“/ 17”对数据进行归一化处理，这样，每推出一个新的 IP 版本，x 就会增加 1，然后“2^”就是 2^32 在 IPv4 和 2^128 在 IPv6 中使用的相同位。然而，我现在需要调整网站等式，从 1930 年开始，因为这是 IP 等式技术上的起点。由于我没有 1930 年的网页数据(出于多种原因)，我将使用 2012 年网站的大约 1MB 的指标，并使用 573KB 的偏移量来模拟 1930 年网站的大小:

2012 - 1930 = 82 [82 年]
573 * 18 = 10314[10314 千字节]
1024-10314 =-9290[-1930 年网页的 9290 千字节]
f(x) = 1024 * (573x - 9290)

是的，这意味着 1930 年网站的平均容量约为-9MB(负值)。然而，如果你不去想它，那是有道理的，这就是我在这里选择做的。

现在，我没有试图在纸上解决这两个函数的截距，因为我可以将它们扔进 [Desmos](https://www.desmos.com/calculator/bvgjqlgkcy) 中，以快速获得交点，并直观地看到两者之间的增长率。该交叉点出现在(529.838，3.014 * 10^8)，这意味着它将在 IPv0 问世(1930)后约 530 年，即 2460 年，其中 IP 地址和网站都约为 287MB。然而，由于“真正的”IP 版本每 34 年发布一次，这将在 IPv30 和 IPv32 的发布之间放置 2460，使 IPv32 成为第一个 IP 版本，使其成为购买 IP 地址的空间保守的选择，该 IP 地址是 2474 年(1930 + 17 * 32)您的网站的二进制表示。

* * *

如果你做到了这一步，感谢你花时间阅读这篇文章！