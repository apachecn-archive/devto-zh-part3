# 💻↔️🖥️在两台计算机之间传输文件

> 原文:[https://dev . to/schollz/transfering-files-between-two-computers-21m 8](https://dev.to/schollz/transferring-files-between-two-computers-21m8)

有很多方法可以传输文件。 <sup id="fnref1">[1](#fn1)</sup>

在传输过程中保存数据的基本必要性之上，共享数据应该是*快速*、*安全*，以及——最重要的——*容易*。我用过的大多数文件传输工具包含了这些品质的三分之二。我想做一个包含这三者的工具，而不损害其中任何一个。

## [](#relay-gt-uploading)中继>上传

文件传输应该尽可能的快——传输文件所花费的时间通常是在等待中度过的。更快的文件传输意味着更少的等待。

传输文件的一种常见方式是首先将数据上传到服务器，然后，一旦上传，链接将与下载它的人共享。 <sup id="fnref2">[2](#fn2)</sup> 这种方法很简单，但是很慢——文件的传输速率是上传和下载速度的调和平均值的一半，这使得它比仅仅上传或下载要慢。 <sup id="fnref3">[3](#fn3)</sup>

有比顺序上传下载更好的方法。相反，您可以使用一个**中继服务器**在两台计算机之间创建一个全双工实时通信层，以便“上传”和“下载”在两台计算机之间同时发生。这有效地提高了传输速率，因为它不是连续的，并且只受到两种传输模式(上传或下载)中较慢的一种的限制。

## [](#key-exchange-gt-passwords)密钥交换>密码

传输数据应该是安全的。每当你分享数据时，它都要通过一个可以“看到”数据的服务器网络，所以应该加密以保持私密性。进行端到端加密的一种常见方法是使用密码。您使用密码来加密您的文件，然后发送受密码保护的文件，之后其他人使用相同的密码来解密它。

密码很容易，但密码可能很脆弱。原来[许多人使用相同的密码](https://www.troyhunt.com/86-of-passwords-are-terrible-and-other-statistics/)，因此破解加密可以像尝试[一系列伪造账户中的每个密码](https://haveibeenpwned.com/Passwords)一样简单。

使用 [PAKE](https://github.com/schollz/pake) : *口令认证密钥交换*，弱密码可以用来制作强密码。PAKE 是一种加密方法，其中两个人共享一个密码，然后通过来回通信使用该密码来生成一个强密钥。然后，强密钥可用于所有进一步的加密。因为这两个人通过交换信息来生成强密钥，所以即使他们有原始密码，其他人也不可能知道该强密钥。 <sup id="fnref4">[4](#fn4)</sup>

还有其他交换密钥的方法，但一般来说，通过交换密钥比在两台计算机上使用同一个密码更安全。

## [](#no-port-forwarding-gt-port-forwarding)无端口转发>有端口转发

最后，传输数据应该简单，理想情况下只需一个命令，不需要维护或其他程序。

然而，这通常并不容易。

另一种传输文件的常用方法是使用 SSH 或 FTP。这两种协议无处不在，使用起来相对简单，但它们的简单性依赖于其中一台计算机运行服务器(如`openssh` ) **和**。它要求服务器计算机启用端口转发。几乎可以假设*大多数*的计算机对都不满足这些要求(比如说，咖啡馆里的两台计算机)，这使得这些常见的实用程序在大多数情况下很难使用。

通过消除托管服务器或端口转发的需要，文件传输会更容易。同样，使用**中继服务器**允许任何两台计算机相互连接，而无需求助于端口转发或摆弄服务器。

## [](#croc-fast-secure-easy)croc =快速+安全+轻松

我一直在开发一个开源工具，将这些想法铭记于心: [croc](https://github.com/schollz/croc) 。因为它是开源的，并且是用一种容易交叉编译的语言实现的，所以它可以在任何地方实现，因此(希望)将永远是一种快速、安全、真正容易的发送数据的方式。

AFAIK， *croc* 是唯一一款具有以下所有功能的 CLI 文件传输工具**:**

*   允许**任何两台计算机**传输数据(使用继电器)
*   提供**端到端加密**(使用 PAKE)
*   实现轻松的**跨平台**传输(Windows、Linux、Mac)
*   允许**多个文件**传输
*   允许**恢复被中断的传输**
*   *不*需要服务器或端口转发吗

在开发 *croc* 的过程中，我从其他 CLI 工具中获得了很多灵感，比如 [toss](https://github.com/zerotier/toss) 和 [magic-wormhole](https://github.com/warner/magic-wormhole) ，它们有一些但不是所有的上述品质。 <sup id="fnref5">[5](#fn5)</sup>

如果你想试一试，代码可以在 https://github.com/schollz/croc 网站上找到。

* * *

1.  我在 2017 年写了关于[发送文件的内容，并从那时起一直试图维护一个发送文件的方式列表。](https://schollz.com/software/sending-a-file/) [↩](#fnref1)

2.  一些好的基于服务器的文件共享工具:[https://send-anywhere.com](https://send-anywhere.com)，[https://send.firefox.com](https://send.firefox.com)，[https://ipfs.io/](https://ipfs.io/)， [↩](#fnref2)

3.  例如，如果您以 5 Mbit/s 的速度上传文件，然后在完成上传后以 8 Mbit/s 的速度下载文件，则有效传输速率为 1/2 * 2/(1/5+1/8) = 3.1 Mbit/s，比两者都慢。 [↩](#fnref3)

4.  帕克另外将防止窃听者。如果任何人“监听”信息交换，那么所有各方最终将拥有不同的强密钥，没有人能够解密它们之间的任何内容，从而警告用户存在窃听者。 [↩](#fnref4)

5.  [toss](https://github.com/zerotier/toss) 巧妙地将端口信息编码在密码短语中，使它变得简单，但它需要使用连接的计算机(没有防火墙),并且长而随机的密码短语很难“告诉”某人。 [magic-wormhole](https://github.com/warner/magic-wormhole) 几乎什么都有(目前它缺少多文件传输和文件恢复的功能)，但它需要安装大量的 Python 生态系统，这对非开发人员(和 Windows 用户)来说很棘手。 [↩](#fnref5)