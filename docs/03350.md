# 编码清洁器

> 原文：<https://dev.to/rickardengberg/coding-cleaner-bbm>

什么是干净代码？

你们中的一些人可能听说过干净代码的概念。它已经存在了一段时间，经常被像 Robert C. Martin 这样的人谈论，你可能读过他的《干净代码》系列丛书。如果你没有，你应该。有很多关于干净编码的书可以读，如果你不是一个很爱读书的人，你可以在博客、youtube、同事和社区(比如这个社区)上学习更多关于这个主题的知识。

那么，那又怎么样呢？什么是干净编码？嗯，这可能是很多事情，取决于你的团队、你甚至你的公司。有些团队比其他团队更严格地执行干净编码，有些团队根本不在乎。如果你谷歌一下，你会发现很多关于编码原则和代码模式的帖子，虽然这对构建干净、可维护的计算机程序非常重要，但当人们问我什么是干净的编码时，我首先想到的是一件事。

可读性。

代码读起来应该像一本书或者你喜欢的散文。它应该被正确地格式化，被很好地划分，你应该在很短的时间内掌握代码做什么。想想看，在一个程序的生命周期中(是的，我使用程序这个词，因为最终，我们程序员所做的一切就是编写程序)，从几个月到几十年(我第一手听说的最古老的程序是 1967 年开始的 COBOL 程序，所以它现在已经有 50 多年的历史了)，可能 20 %的时间花在编写程序上。剩下的 80 %，都是花在试图理解它上面。

这就是干净编码发挥作用的地方。如果我们能把编程中理解的部分减少五分之一，我们会把试图理解一个程序的部分减少到大约 60 %,把花在做我们都喜欢的事情——编程上的时间增加到 40 %。那不是很好吗？

那么，我们如何才能做到这一点呢？好吧，我们可以就一种使代码更易读的方法达成一致。因为我们希望减少编程的阅读/理解过程，所以我们需要增加可读性。我敢肯定，如果你曾经在一个团队中(一个真正团结在一起工作得很好的团队)，你会注意到成功编写可靠的、无错误的、可维护的代码的原因之一是团队采用了(或有意同意)一种编写代码的方法；模式、变量和方法命名、编码原则，比如单一责任原则等等。

如果你能在新的工作岗位上拿起一个程序，在你最喜欢的编辑器中打开它，直观地找到主过程，然后想，“嘿，这是写得很好的代码，在这上面工作会很棒”，这不是很好吗？

那不是乌托邦。这不是不可实现的，无论是对于旧的、遗留的代码，还是对于闪亮的新程序。你的团队可以采用一套行为准则来实现这一目标，我敢打赌你已经在使用其中的一些准则了。让代码变得更干净需要做的事情很多，但是如果你还没有做的话，你和你的团队可以做一些快速的事情:

1.  开始代码评审
2.  清除过时的注释、注释掉的代码等。
3.  命名政策；给变量、类、方法和常量起个好名字，这样读者就能立刻理解它们做了什么或者保存了什么。
4.  从编译器中去掉所有的提示和警告。
5.  重构以消除冗余和重复。
6.  将不同的功能分成模块和类。
7.  尊重团队同意的代码模式。
8.  试验
9.  快去

这个列表很简单，你可能会觉得奇怪，GIT 是最后一项，而像代码审查这样简单的事情是第一项。这是有原因的。它主要是按照最容易实现的顺序排列的。虽然我认为 GIT 应该是让编码更干净的首选，但它的引入可能非常复杂。从以前的版本控制方案切换到新的版本控制方案(我坚信任何不使用 GIT 的团队都应该这样做，不管他们现在使用什么)可能需要时间，团队成员需要时间学习，团队也需要时间就策略达成一致(我建议使用 git flow)。

至于这张单子上的其他项目，从最上面开始。审查代码是在团队中保持代码整洁和可读的绝对要求。没有团队中其他人的审查，任何代码的变更，不管有多小，都不应该提交给开发(或者你的开发分支)。永远不会。

我将这个概念介绍给前雇主的一个团队，在下班后的酒吧喝了一两杯后，一个开发人员找到了我。看来他已经准备了一段时间，然后说，“你真的认为每一个变化都应该被审查吗？”。
我回答，——‘是的，我真的很认真’。
——“即使只是标签上拼写的变化”，他继续说道。
我说，——‘是’。他不高兴，那天晚上我们没有达成一致，但是事实是如果你要在你的团队中成功地引入代码评审，*你绝对需要评审所有的东西*。幸运的是，这并不难。这么小的改变需要 30 秒来回顾。

——‘但是，我们没有审查代码的工具’，怀疑论者会反对。-“我们需要让 GIT 运行起来，还有 bitbucket 或 Gitlab 或 Github”

不，你不知道。你用编辑器来写你的代码，不是吗？嗯，只要拍拍同事的肩膀，让他或她回顾一下你最近的改变。一起经历它们，你们都会学到一些东西。

清单上的第 2 项和第 4 项很容易介绍，所以没有理由不做。最多，一个 45 分钟的会议(有明确的最终目标)就能解决这个问题。

其余的项目将需要更长的时间来实现，所以制定一个计划来实现它们。如果你不这样做，他们不会得到实施。

你可能会再次对第 5 到第 8 项的排序感到畏惧，尤其是测试是在重构之后。没有单元测试，你怎么可能重构呢？首先，测试项目不仅仅是关于单元测试。这是一个关于测试策略的问题(我会在后面的文章中补充我的想法)。重构可以在没有单元测试的情况下完成(天哪，我刚才是这么说的吗)。好吧，我这里不是说重构 30 %的应用程序，我是说去掉多余的或重复的代码。更改变量名或方法名来描述它们的作用。如果你仔细并且彻底地告诉测试人员在你完成之后要测试什么，这是可以做到的。

好了，暂时就这样了。将来我会在这里和我的博客[https://codingcleaner.com](https://codingcleaner.com)上深入讨论干净编码。我真的很想得到对此的评论和想法。这些是我对干净编码的观点，或者至少是冰山一角。如果程序员协会的目标是采用一种通用的方式来编写可读的、可维护的程序代码，我们需要讨论它的每一个方面，并且需要有很多人参与这项事业。