# 强制复制和粘贴

> 原文:[https://dev.to/scotthannen/mandatory-copy-and-paste-52g6](https://dev.to/scotthannen/mandatory-copy-and-paste-52g6)

我想大多数熟练的开发人员都明白为什么复制和粘贴代码是实现“重用”的一种可怕的方式从像 stackoverflow.com 这样的外部资源复制和粘贴代码是一件有其自身问题的事情。但是当我们开始在我们自己的仓库中复制和粘贴大量的代码时，这是另一个层面的不好。

但是还有更糟的。

我有时发现自己处于这样的环境中，为了开发软件，我需要从复制和粘贴整个库开始，然后只编辑其中的一小部分来满足特定的需求。那还不错。太邪恶了。为什么？

90%的情况下，认为复制粘贴整个应用程序并进行微小修改是个好主意的人是开发原始应用程序的人。这意味着你将从一个不懂避免代码重复这样基本概念的人编写的软件开始。因此，可以肯定的是，无论你复制和粘贴的是什么代码，都是糟糕的。如果是你自己写的，你可以让它发挥作用，或者至少承担责任。现在你要浪费时间研究糟糕的代码并修复它的错误。

根据上一点，复制和粘贴整个应用程序会迫使开发人员交付糟糕的代码。有什么比知道如何构建一个东西，却被要求用别人的糟糕代码来实现它更令人沮丧的呢？

我见过开发人员将这种方法描述为“使用框架”这里有一个新闻快讯:如果你能为特定的需求准确地写出你需要的代码，并把它插入到现有的代码中，你可以称之为框架。复制和粘贴糟糕的代码不是一个“框架”在多个 NuGet 包中展开多层次的继承，使得类以不可理解的方式与它们的基础交互，没有人能通过查看一个不是“框架”的类来判断它做了什么

他们告诉你这会很简单，因为所有的工作都已经完成了，你只是在复制它。但是如果这真的只是几分钟的工作，那你为什么要让别人来做呢？答案是，一旦您复制了代码，您就会开始发现无数其他问题，包括隐藏在几个库中多层专有代码下的未记录的行为和故障，因为您没有源代码，所以必须对这些代码进行反编译。重写整个东西会花费更少的时间，因为你理解语言和技术，并且你不知道的东西你都可以找到。但你不是在写软件。你正在做不必要的工作，没有提高任何人的要求，以获得没有人需要工作的代码。

真正有趣的部分是当你开始清理一些糟糕的代码时，不仅仅是因为你想签入干净的代码，而是因为如果不进行一点点重构，你就无法理解它做了什么。

所以你分解巨大的类和方法，给类起反映它们做什么的名字，删除 80%或更多的死代码，如果因为“模板”与你的需求无关，删除类级变量，这些变量被莫名其妙地当作局部变量使用，把三级继承合并成一个类，在你删除死代码后，这个类本身比三个类中的任何一个都小， 并删除不必要的可变状态，你很确定这导致了在使用相同代码的每个其他应用程序中没有人注意到的错误，因为最初的开发人员不知道他们的代码在多线程环境中运行，或者知道但不知道如何解释这一点。

结果:您被告知从模板中从头开始，因为您的代码不符合“标准”(没有什么比被一个人说教“标准”更好的了，他只是说“仅仅为了单元测试”而在类中添加单独的构造函数，并称之为“模式”。)问题不在代码，他没看。他解释说，做出改变意味着没有人能够支持它。移除应用程序*不使用*的类、项目、方法和变量将使*更难支持*。

翻译:我的代码很完美，你应该感激复制粘贴的荣誉。不要改变任何东西，因为我希望这个组织产生的每一行代码都类似于我自己的完美作品。

这就像一个音乐老师写了一首 cacaphonic，震耳欲聋的交响乐，教别人所有好的音乐都是从自己的作品开始，以自己的作品为模板，尽可能少的改动。这是自私自利的利己主义。

我不是势利眼。我写过糟糕的代码，回想起来，这些代码本可以做得更好。有时我会看到 StackOverflow 问题包含的代码块是如此难以理解和可怕，以至于没有人能够试图找到与他们的问题相关的部分。我并不轻视这一点，因为我们都经历过。

但是如果你的代码看起来像一个糟糕的 StackOverflow 问题，不要告诉其他人复制粘贴它。我不管你的职称是什么。当你学会如何编写更少的代码时，你会明白我们不应该通过复制和粘贴来“重用”它。

与此同时，如果你认为你猖獗的代码复制是一个“框架”，复制和粘贴它是软件开发的工作方式，那么这里有一个想法:自己复制和粘贴它。无论需要什么样的专门开发，都要给开发人员一个接口来实现，这样他们就可以编写代码，交给您，您就可以将它集成到您出色的框架中。

谢谢你，戴夫·托有一个叫“咆哮”的标签