# 编译代码的工作原理

> 原文：<https://dev.to/flippedcoding/how-compiling-code-works-51pc>

当你运行一个程序时，你知道不知何故，在某个地方代码正在被编译。在编译过程中，您可能会看到一些输出，但是大部分都是在幕后进行的。这就像我们都接受的小黑盒，没有多少人质疑它，这是可以的。但是对于那些想知道更多黑匣子内部情况的人来说，这里有些东西是给你的。

## 编译代码时会发生什么

简而言之，你写的代码被翻译成机器代码。这就是为什么我们通常在 IDE(集成开发环境)中编写代码。它们内置了编译器，可以接受你的代码并执行翻译。编译器采取几个不同的步骤来正确编译代码。

首先，它把你的代码转换成一系列的符号。这是一个叫做 lexing 的过程，lexing 是一个把你的代码转换成令牌的时髦术语。每个标记都包含对编译器有意义的符号、数字和字母。

一旦你的代码被 lex 化，编译器将解析这个标记序列，以确保你的代码符合编程语言的所有规则。当编译器解析你的代码时，这意味着它正在检查一切以确保它是正确的。这里是可能发现语法错误的地方。

解析完成后，编译器生成语法树。语法树只是你写的代码的语义的一种表示。使用这个树，编译器然后创建一些输出，即翻译后的代码。输出可以是机器代码或其他语言。

## 编译器如何工作

既然您已经确切地知道了编译代码时会发生什么，那么理解您的 IDE 是如何工作的可能会有所帮助。同样，编译器只是把你的代码翻译成另一种类型的代码。问题是编译器中有不同的层。

有单通编译器和多通编译器。这是我学到的一点历史课。在计算机和编程的早期，编译受到计算资源的限制。你能想象在一台只有 1GB 硬盘的计算机上编译你的代码吗？这就是单通编译器被创造出来的原因。

由于计算机没有太多的资源，很多老的语言，比如 Pascal，被设计成一次编译。现在我们有了能够接管世界的计算机，我们可以使用多遍编译器。多遍编译器可以分为三个主要部分:前端、中间端和后端。这些不像 web 开发中的前端和后端。

前端是您的代码得到验证的地方。所有的语法错误检查都在这里进行。这是你的代码第一次被转换成计算机可以理解的东西。接下来是中端，有点意思。这是您的代码得到优化的地方。

中端取前端的输出，让它更快。它可能会做一些循环转换或删除无用的代码。它只是从前端获取翻译，并让计算机更好地运行它。最后一部分是后端，非常简单。

后端从中端取优化后的代码，完成翻译成机器码。这就是计算机如何决定如何使用其资源以最有效的方式执行您的代码。这是你的编译器停止和你的程序开始运行的地方。

## 我们为什么要编译代码

真的要写机器码吗？你试过用汇编语言写吗？我犯了一个可怕的错误，试图学习汇编，它打破了我的大脑，我仍然不太确定我已经恢复了。如果你认为你已经准备好迎接挑战，试着用汇编语言写一个简单的 if-else 语句。我会在这里给你精神上的支持。

编译器是我们能够使用如此多不同编程语言而不用担心机器码的原因。这就是我们如何能够建立这些复杂的网站和系统，而不用处理 1 和 0。他们能够将任何编程语言翻译成计算机能够理解的语言。

下次你为你正在工作的网站写代码时，花一分钟看看代码编译后的输出。我从来没有真正想过他们为我们做了多少工作，直到我了解了一些编译器代码。那是件棘手的事，我很感激还有其他人能做这件事。

你试过为编译器写代码吗？我真的很好奇任何个人经历，因为我不明白你是怎么做到的。

* * *

嘿！你应该在推特上关注我，因为原因:[https://twitter.com/FlippedCoding](https://twitter.com/FlippedCoding)