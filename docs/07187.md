# DevOps 如何提高系统安全性

> 原文:[https://dev . to/ahawkins/how-devo PS-increases-system-security-1c gj](https://dev.to/ahawkins/how-devops-increases-system-security-1cgj)

在过去的五年中，由于研究、采用和试验，对 DevOps 及其在 IT 行业中的作用的看法已经发生了变化。Gene Kim、Jez Humble 和 Nicole Forsgren 撰写的《加速:精益软件和开发运维的科学》( Accelerate:The Science of Lean Software and devo PS)以数据为基础，预测开发运维的原则和实践如何以几乎任何可衡量的方式产生更好的软件和更成功的业务。他们的研究，以及其他人，如 James Wickett 和 Josh Corman，Sonartype 的前首席技术官和受人尊敬的信息安全研究员，都围绕着将信息[安全](https://cloudacademy.com/blog/category/security/)目标纳入 DevOps(他们称为“坚固的 DevOps”的一套实践和原则)的概念。Capital One 的董事兼平台工程技术研究员 Tapabrata Pal 博士提出了类似的想法，并将他们的流程描述为 DevOpsSec，打破了 DevOps 和系统安全是正交的神话。

其实恰恰相反。DevOps 实践*做得正确*增加了系统安全性，就像持续交付增加了稳定性一样。

DevOps 的三种方式描述了持续交付、从生产到开发的反馈以及不断学习。持续交付需要在增量的小变更中开发软件，并通过部署管道中的自动化[测试来验证每个变更。与没有自动化部署管道的软件开发相比，计算机化的管道为团队提供了多种提高安全性的方法。](https://cloudacademy.com/blog/testing-through-the-deployment-pipeline/)

安全问题就像任何其他软件回归一样。可以对它们进行测试，以便它们不会出现在生产中。对 InfoSec 应用自动化测试有多种方式:

*   扫描容器或虚拟机映像，查找已知的软件漏洞和包含已知有问题的软件包的失败版本
*   对具有潜在危险的系统调用运行静态分析工具，并相应地使构建失败
*   像 API 令牌或 SSH 密钥这样的纯文本机密的 Lint 代码会导致构建失败
*   针对构建工件运行端到端测试，就像那些来自 [OSWAP](https://www.owasp.org/) 的测试

将这些测试添加到部署管道中极大地提高了安全性，因为它是自动化的:这被称为“[左移](https://smartbear.com/learn/automated-testing/shifting-left-in-testing/)”。它从一开始就自动确保软件在整个流程中的安全性。

组织通常没有足够的信息安全工程师。这造成了负面的后果，因为 InfoSec 检查被推到了流程的末尾，并且可能只有在有足够的容量时才会发生。当团队中有一个额外的工程师时，考虑一下仅仅运行您现有的自动化测试套件。接受自动化功能测试的主张在现代 IT 中是可笑的，为什么允许同样的事情发生在 InfoSec 测试中呢？将 InfoSec 测试添加到管道中可以验证每一项更改，并随着组织的发展而扩展。部署管道是比几个工程师更大的变革力量。更重要的是，添加测试将问题暴露给每个人，并将修补回归的责任转移给代码作者。

自动化测试确保已知的回归不会进入生产。但是，它们不能防范生产中的攻击和其他恶意活动。团队需要跟踪遥测数据并发出警报，这些数据表明生产中存在恶意活动或其他危险信号。这是 DevOps 建立从生产到开发的反馈的第二种方式。团队已经拥有针对延迟、请求计数和活动用户等的生产遥测技术，因此还应该集成 InfoSec 遥测技术。例子包括:

*   SSH 连接
*   User logins
*   密码重置
*   恶意 SQL 查询
*   可能表示探测或其他恶意活动的格式错误的请求
*   电子邮件地址(或其他登录信息)更改
*   帐单或付款信息变更
*   基础设施安全组或防火墙更改
*   XSS 袭击
*   基础设施变更，如网络、新系统用户或修改的文件校验和
*   权限提升(例如，sudo 调用)

这种遥测数据对于了解系统在生产中的使用情况至关重要。基于这种认识，团队可以通过向已经识别出潜在问题的管道中添加回归测试来采取行动，从而提高生产的安全性。更重要的是，它增加了能见度。当团队意识到他们受到攻击时，安全性变化更有可能发生。

Etsy 的 Nick Galberth 在绘制了安全遥测图后也表达了同样的观点:

> 展示这个图表的结果之一是开发者意识到他们一直在被攻击！这太棒了，因为它改变了开发人员在编写
> 代码时对代码安全性的看法。

这种做法还有助于解决生产前测试和合规性检查不够的情况。Accelerate 包括一个令人不安的供应商案例研究，它展示了 production InfoSec 遥测技术的价值。他们注意到他们的自动取款机在计划外的时间进入维护模式。这使得攻击者能够从机器中取出现金。一个开发商几年前就装了后门。显然，这种类型的后门很难或几乎不可能事先检测到。然而，生产遥测检测到异常并向团队发出警报。该团队主动发现了欺诈行为，并在计划的现金审计流程之前解决了问题。

这些例子展示了 DevOps 实践如何提高系统安全性。首先，像软件的其他方面一样，将自动化测试添加到部署管道中。第二，将生产遥测添加到生产中，以指导开发变更。第三种方式要求学习和实验来进一步改进软件开发过程。不幸的是，有时团队会错过这方面。DevOps 建立反馈循环，第三种方法不断改进它们，以减少辛劳，减少错误，和/或适应变化的条件。

合规性和审计是一个常见的棘手问题。它减慢了过程，因为必须产生文档并且需要人工审查。这并不一定要停止进程。自动化可以通过消除繁重的工作极大地改进合规性和审计流程。谷歌 SRE 的书将辛劳定义为“与运营生产服务相关的工作，这种工作往往是手动的、重复的、可自动化的、战术性的，缺乏持久的价值，并且随着服务的增长而线性扩展。”Accelerate 包括 18F 和 Cloud.gov 的案例研究。

案例研究展示了一个政府组织实施自动化流程来编写系统安全计划(SSP ),并从指定机构获得操作权限。必须审查 SSP 计划。它们通常有上百页，非常详细。在动态云环境中，手动创建和维护它们是不可能的。18F 开发了一个工具，可以将 SSP 自动生成为 YML，可以将其转换为 pdf 或发布为 GitBooks，供内部和外部审阅，从而节省了大量的工时(并在此过程中增加了快乐)。私营部门的 IT 公司往往有一个更宽松的监管水平。无论如何，可以并且应该利用相同的法规遵从性和审计技术来减少持续的工作和辛劳。

类似的方法可以用在下游审计和遵从过程中。考虑到生产遥测系统包含 InfoSec 数据，它们可能会在审查期间以自助方式暴露给审计员。审计员可以检查控制，如适当的日志记录或特定的事件处理。部署管道还为生产中的应用程序提供了完整的更改历史。可以使用代码、部署管道和其他自动化来生成合规性报告。这种方法再次减少了所有相关人员的工作量，提高了准确性，并在理想情况下导致更完整的审计。

DevOps 是现代 IT 构建、测试和发布软件的最佳方式。三种方法为理解如何以及为什么处理软件开发问题提供了一个框架。改变和改进 InfoSec 与云计算和持续交付对软件的影响没有太大的不同。一切都源于[增加频率降低难度](https://martinfowler.com/bliki/FrequencyReducesDifficulty.html)的想法。它见证了团队从每季度部署到测量每个开发人员每天的部署。这是一个惊人的速度提高。它可以通过将三种方法应用于 InfoSec 成果来影响同样的变化:自动化测试、生产遥测以及持续学习和改进。应用所有这三个要素构建了一种持续验证的文化，最终提升了整个行业的安全底线。这听起来像是一个教科书般的案例，说明了当今和未来安全性的提高。