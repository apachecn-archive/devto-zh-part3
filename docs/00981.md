# Rails 是一种崇拜

> 原文:[https://dev.to/arturmartsinkovskyi/rails-are-a-cult-51b](https://dev.to/arturmartsinkovskyi/rails-are-a-cult-51b)

这将是一场咆哮。但是很好。这是一个绝望的邪教成员的想法，他想让他心爱的语言变得更好，想让他的崇拜者摆脱邪教令人窒息的控制，变得更加自由，思想更加多样化，对他们周围的生态系统问题更加无知。

# [](#love-bombing)爱情轰炸

我第一次有价值的商业体验发生在 Rails 上。当我进入家乡一家小公司的训练营时，我就开始使用这个框架了。我是一名大二的学生，聪明但不勤奋。我知道一些 C++编程，一点 Python 和 Java，但是由于各种原因，每一次尝试开始实际的应用程序开发都失败了。有时候，在与编译错误和错误的测试输出斗争了几天后，我的动机就消失了，而在其他时候，我开始一个项目只是为了在几天不看代码后扔掉它。我无法建立足够好的技能，让我有持续更长时间的欲望，并对事物保持兴趣。幸运的是，Rails 是完全不同的一块蛋糕。

在修复了一些红色的 500 屏幕和数据库设置之后，我的第一个博客终于建立起来了。我被它的顺利程度逗乐了。启动第一个应用程序一点也不像 Spring 或者 Django。它开箱即用。它很美。起初，我真的被约定胜于配置的想法迷住了。框架已经为我完成了整个智能设置。我有模型、控制器和视图，这就是我让我的应用程序完成工作所需要的一切。你有框架没有解决的问题吗？查阅文档，很可能你还不知道内置解决方案。有时我甚至会猜出我需要的方法的名字。纯魔法！如果你有一个不符合框架限制的问题，比如身份验证、管理面板、货币处理、与 Google Maps 或 Stripe 的集成——只需 Google a `gem`就可以了。很可能你会找到一个适合你的需求。软件包管理器是先进的，有一个很好的界面，在我使用 Java Server Faces 处理了所有样板文件之后，搭建是一件好事。

这个社区看起来很不错，我在 StackOverflow 和论坛上得到了我的问题的答案，大多数问题都是在我之前问的。好人在做好事，我在他们中间感到温暖和受欢迎。此外，还有个性。这个框架的创建者 DHH，活跃在 Twitter 和他的博客上，总是为你提供建议，并指引着 Rails 的航船朝着正确的方向前进 Yehuda Katz，Ember.js 的联合创建者，也是许多关于 Rails 及其周围环境的书籍的作者 Avdi Grimm 和 Gary Bernhardt，我非常感谢他们的截屏。

# [](#appointment-with-disappointment)失望的约会

过了一会儿，第一印象开始消失。大约六个月后，我意识到我对 Ruby 还不够了解(我对 Rails 本身没有任何问题，但是我开始觉得我可以做得更多)。我学到了更多的 Ruby 和通用 OOP，并开始意识到一些奇怪的事情。首先，我在 Rails 中使用的很多东西，比如`#transform_keys!`、`in?`、`delegate`，都不是 Ruby 核心库的一部分。他们是 ActiveSupport 的一部分。它们也不健康，变成了一堆粗糙的猴子补丁，有时会与我试图使用的一些宝石相冲突。

其次，Ruby 原来有一个`require`方法，所有东西都不需要像 Rails 那样挂在全局名称空间中。我知道这是为了方便起见，但是我觉得大内存占用和加载问题很糟糕。从那以后，我的控制器被业务逻辑弄得臃肿不堪。我谷歌了一下这个问题，找到了座右铭`thin controllers - fat models`，于是就跟着做了。但是模型也开始膨胀。我开始使用关注点，但它们也没有多大帮助，把应该在类本身中的逻辑放在单独的文件中，从 OOP 的角度来看，没有真正正确地解决问题。Rails 本身没有任何抽象，所以我开始用我读过的书中的 POROs 和模式自己制作它们。Rails 隐藏了许多您可能需要理解和更改的复杂性，深入到用户抽象层之下，使得开发人员在不符合 easy vision 的情况下使用杂乱和错误的解决方案来完成工作，而 easy vision 认为这些功能应该按照惯例来完成。当你离开传统的道路时，配置似乎并不存在。Gems 也像 ActiveSupport 一样混乱了全局命名空间，所以有时它们在试图重新定义相同的方法时会意外出错。这看起来不像是为了干净而努力，而是为了完成工作而努力，不管脏不脏。处理更新/创建回调动作的标准方式，当应用程序变得更加全面和充满业务逻辑时，也变成了一片混乱。

挫折感开始增加，我的感觉就像是我在做一些根本不打算用那个框架来做的事情。另一方面，ORM 的问题也随之而来，每个查询都比一个简单的计数连接更难，where 中的一些条件超出了 ActiveRecord 的标准方法，所以我不得不手工编写 SQL，或者坚持使用一种非常奇怪的语法。Rails 也不支持任何视图抽象方式。全球帮手，雇员再培训局，和部分-这是你必须处理的一切开箱即用。难怪我开始寻找更好的方法来处理日益复杂的问题。当我上网的时候，我已经看过 Sinatra，Hanami，ROM-rb，洛达和其他一些好的图书馆，但是它们没有那么受欢迎。有不同意见的声音，有凤凰的灵丹妙药，有 Clojure 的，有 Crystal 的，但是他们都在试图让 Ruby 的态度和文化脱离 Ruby 的生态系统，而原来的生态系统被 Rails 大量占据。大多数 Ruby 开发人员都是 Rails 开发人员，对于框架本质上是语言的工作主体和经济存在似乎没有任何问题。他们喜欢 DHH 说的话，并遵循实践，即使有时会伤害他们。他们说，约定胜于配置，TDD 已死，Rails 是你的应用程序，你用错了 Rails，如果你有问题，就用另一个 gem。然后我意识到我参加了一个邪教。

[![Cult](../Images/58541041b845456ca13b4f941031cb01.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--b0KQE3Bq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/8bo64tn9vcm3vcjctc3b.jpg)

# [](#cult-of-easy)祭礼之易

让我们开始讨论基本问题。什么是邪教？正如罗伯特·杰·丽芙顿所说，邪教有三个主要特征。

*   一个魅力四射的领导者，随着最初支撑团队的一般原则失去效力，他越来越成为崇拜的对象；
*   强制说服或思想改造的过程；
*   领导者和统治集团对群体成员的经济、性和其他剥削。

当然，DHH 是一个领导者。他是一个伟大的企业家和福音传播者。我喜欢他写作和表演的方式。他创造了 Rails(不是单枪匹马，但仍然是)。但是他的话的主体是什么呢？他强加给我们什么？以下是他的几条推文，供你掌握其中的窍门。

> [@paulca](https://dev.to/paulca) 操。那个。妈的。完全一样的手淫。“Rails 不是你的应用”。如果你正在构建一个 web 应用程序，它当然是。—DHH(@ dhh)2012 年 6 月 29 日
> 
> 你好，我叫大卫。我不会在白板上写冒泡排序。我一直在网上查代码。我不猜谜语。-DHH(@ dhh)2017 年 1 月 21 日

这些是不言自明的，所以让我们继续讨论 Rails 和 DHH 在 Ruby 社区中创造的文化。比起简单的解决方案，他更看重简单的解决方案。当您可以将整个领域逻辑放入模型中并收工时，为什么要使用分解您的应用程序呢？当你可以比以前更容易地做事情时，为什么要使用 SOLID 和 GRASP，不管将来会有什么代价。在一片混乱中把所有的东西都放在手边，总比多跳几下就能找到功能要好。这些解决方案在短期内有效，但从长远来看，你最终会陷入一片混乱，需要彻底重写。采用这种由领导者决定的方法，Rails 在认知上和资源上都不能很好地伸缩。但是上帝仍然受到称赞，他的 Rails 愿景不仅污染了 Rails，还污染了 [Ruby 生态系统](https://solnic.codes/2015/06/06/cutting-corners-or-why-rails-may-kill-ruby/)。

这就引出了下一点。强制说服的过程。Rails 不仅膨胀了他们自己和使用他们的开发人员的思想。它们会传染给生态系统。主动支持特性慢慢地融入到 Ruby core 中，大多数 gem 需要与 Rails 兼容才能获得流行。很久以前 [Rails 干掉了 Merb](https://yehudakatz.com/2008/12/23/rails-and-merb-merge/) 。现在，Rails 实际上是 Ruby 领域的垄断者，所以当库被 Rails 细节污染时，新框架很难流行起来，大量的 Ruby 爱好者实际上是 Rails 的拥护者，Rails 已经存在了 10 多年，记住，企业喜欢成熟的、经过时间检验的解决方案。Rails 是一个牢笼，这个牢笼改变了开发人员的想法，要么放弃并拥抱 sloppy，要么去一个安全的地方，比如 Trailblazer，要么离开 Ruby 社区，去那些创建了 Elixir 和 Clojure 的杰出 Ruby 爱好者那里。

剥削。铁路像吸尘器一样吸干社区的人才。当你已经有了最流行的解决方案，为什么还要做别的事情呢？当您的 gems 的 90%的用户都在使用 Rails 时，为什么还要创建通用的解决方案呢？如果 Rails 是一个默认的选择，为什么要这么麻烦呢？有些人逆水行舟，但大多数人不会。所以 Rails 的流行就像滚雪球一样。流行的框架越来越流行，因为人们选择它是因为它的生态系统和支持(Stackoverflow，Github issues 等。)然后对生态系统做出贡献，使其成为更理想的选择。如果不是垄断者强加的有害影响和简单做法，许多其他的愿景、其他的图书馆会被创造出来，现有的图书馆也会被创造出来。人们要么遵守规则，要么离开。只有少数人留下来表示异议。[这里的](https://www.lesswrong.com/s/M3TJ2fTCzoQq66NBJ/p/ZQG9cwKbct2LtmL3p)很好地解释了它是如何工作的。

Rails 是一个邪教，尽管它们没有剥夺睡眠，也没有声称很快就会发生灾难。Rails 拥抱和崇拜有害的实践，这些实践在当前的世界中并不合适。Rails 很容易开始，但是一字一句地遵循它的最佳实践是回到地狱和复杂性失控的好方法。Rails 为了眼前的便利，标准化了猴子补丁、拒绝 SOLID、GRASP、LoD 和其他好的 OOP 实践，这让开发人员更加糟糕。Rails 启动了 Ruby 最初的流行，但是他们现在在成为 Ruby 国家的好公民方面做得不好。

# [](#ruby-without-rails)没有铁轨的红宝石？

我希望在这方面有一个解决方案，但我没有。Ruby 的受欢迎程度在过去几年似乎停滞不前，Rails 也在以同样的方式前进，只采用不可避免的或 Rails 核心团队和 Basecamp 需要的特性。虽然有不同意见和新框架的声音，但它们并没有像 2010 年那样广受欢迎，让 Rails 几乎像 2010 年一样成为垄断者。一些 ruby 主义者离开，一些人留下来，面临着现有态度、流失和框架结构无法解决的问题。会有解决办法吗？我们会得到更好的生态系统和更多的选择吗？邪教徒会挣脱锁链吗？我希望如此。但是只有未来会告诉我们。

# [](#sources-of-aspiration)吸取的来源

丰富的吻痕使简单变得容易

Zed Shaw 的《Rails 是一个贫民窟》

[Piotr Solnic 的《我与 Rails 相处的时间到了》](https://solnic.codes/2016/05/22/my-time-with-rails-is-up/)