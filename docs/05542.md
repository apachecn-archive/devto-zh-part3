# 我的 Linux 之旅(2015 年 9 月至今)

> 原文:[https://dev . to/herald of solace/my-journey-with-Linux-2015-9-至今-ieo](https://dev.to/heraldofsolace/my-journey-with-linux-september-2015-to-present-ieo)

(这是从我的博客转贴的，我认为在这里贴会是个好地方)

Linux——当你听到这个词时，首先想到的是一个讨厌的、留着胡子的人的形象，像火焰一样运行一个又一个命令。

我也有这样的印象，老实说，我曾经害怕 Linux。我周围的人对 Linux 有(现在仍然有)模糊的想法。没有人知道这是什么，并告诉我不要尝试它。

所以，我试了一下。并爱上了它。

这个故事记录了我的 Linux 之旅，从 2015 年我得到第一台电脑开始，到现在，再到未来。在这个故事中，你会看到一个 noob 正在走向完美

*P.S:尝试过 Linux 之后，我真的是一个书呆子，留着胡子的家伙，一个命令接一个命令的敲(不像火焰)。*

## 尝试它的理由

2015 年想给手机做个定制 ROM。在 XDA，所有的导游都使用 Linux。当时我是一个 Windows 爱好者(是的，我是)，对 Linux 毫无经验。然后我发现了 Cygwin Linux emulator。但 XDA 线程说，它的错误，不稳定，它安装了大约 1gb 的软件。我那时候没有无限上网，Ubuntu 也差不多大。所以我想如果两个都一样大，为什么不下载稳定的呢？毕竟，我只知道学习。

* * *

## **初试——小狗 Linux**

我决定使用 Ubuntu(2015 年 9 月)，但是注意到我没有足够的数据。因此，在寻找一些轻松的东西时，我遇到了 Puppy Linux (250mb)，并决定尝试一下。

小狗的安装有关于“满”和“节俭”安装的说明，这超出了我当时的理解。尽管如此，还是启动了 live CD，为了创建一个分区，打开了 GParted。我对文件系统一无所知，将整个驱动器格式化为 ext4。结果呢？我的窗户无法启动。已尝试重新安装 Windows，但安装盘未列出任何分区。不知何故，我设法将驱动器格式化为 NTFS 并安装了 Windows 7。

**我学到了什么—**

在没有一个好主意的情况下，不要试图改变你的分区。

* * *

## **第二次尝试- Ubuntu**

2015 年 10 月，决定再去。这一次，Ubuntu 生动的黑脸 15.04

这一次，一切都很顺利，并设置了一个工作装置。一开始有点不舒服，尤其是工具栏左侧的按钮。但随着时间的推移，我已经习惯了。尽管如此，我还是喜欢窗户。有些事情(如通过 CLI 安装应用程序)对我来说是新的，没有足够的知识导致许多事情无法工作。但我没有失去耐心，继续学习。

**我学到了什么—**

Linux 基础，简单的终端命令。

* * *

## **第三次尝试- Kali Linux**

2016 年 2 月，用 Kali Linux 2016.1 滚动替换 Ubuntu。这是让我爱上 Linux 的发行版。与此同时，windows 开始出现一些错误。所以我开始花越来越多的时间在 Linux 上。使用 Kali Linux，我甚至从零开始构建了我的 Linux。另外，kali 中的故障排除让我对 Linux 有了深入的了解。

**我学到了什么—**

Linux 的更多命令和概念。

* * *

## **第四次尝试——从零开始的 Linux】**

利用 Kali，我从零开始制作了一个 Linux，并以我妈妈的名字命名为 Papiya Linux。虽然它从未上市，但它给了我一个巨大的知识。

**我学到了什么—**

*   Linux 的概念——软件包如何工作，两个软件如何相互通信以及如何与内核通信，进程的不同状态。
*   更多命令。
*   sed、grep 和 find 的使用。
*   使用 if、while、for、head、tee、cut 等编写复杂的 bash 脚本。
*   从源代码编译软件。
*   分析 make 的输出并排除故障。
*   使用 aclocal、configue、autoreconf 和 make。
*   维姆。

* * *

## **Arch Linux**

从去年 8 月份开始，我就一直用 Arch 作为我的主要 OS。Windows 还在。还有一个空的分区，我可以在那里试用新的操作系统。

我真的很喜欢 Arch，因为它有超快的 pacman，一个巨大的知识库和一个很棒的 Wiki。

然而，去年 10 月，我遇到了一个问题。我将我的 ext4 安装转换成 btrfs。对于那些不知道的人，btrfs 提供了一个在不丢失数据的情况下从 ext4 转换到 btrfs 的工具，它还创建了一个备份映像，以防您想要恢复。

试用 btrfs 一周后，觉得没有恢复的必要，于是删除了备份镜像。错误的选择！！

出于某种原因，我打开了 Windows，作为 Windows，它不能识别我的 btrfs 分区，并破坏了它。阿奇也不开机。

我通过使用 btrfs 提供的工具(btrfs — check-extent-tree 和 btrfs — init-csum)保存了它，但是几天后，Windows 再次破坏了它，这一次非常严重。

我所有的可执行文件都损坏了，而且无法修复，我唯一的选择是重新安装。但是我会丢失所有的数据。

我的主分区和根目录在同一个驱动器上，如果我重新安装，我会丢失所有的东西。但是由于“重新安装并从头开始”是如此的 Windows 风格，我想出了一个办法。

我必须保存我的主目录。

因此，我启动了一个 live cd，挂载了另一个分区，并同步了这个驱动器中的主目录。现在我可以重新安装操作系统了。但是我安装的应用程序呢？

嗯，是 Linux。

我发现 pacman 将关于包的数据存储在/var/lib/pacman/local 中。每个包都有自己的目录，格式如下- **包名-版本-修订版**所以，我可以这样做-

```
for i in /mnt/var/lib/pacman/local
do
echo $i >> list
done
```

This would create a file called “list” which would contain the list of packages to install, but it would contain the version numbers too, which I don’t want. So, I used Bash’s string splitting to split the string from the second last hyphen. This would get only the package name -

```
for i in /mnt/var/lib/pacman/local
do
i = ${i%- * }
i = ${i% — *}
echo $i >> list
done
```

还有其他方法可以做到吗？在评论里告诉我。

这就创建了所需的列表。剩下的就很简单了，启动 Arch live CD，把这个文件给 pacman，然后把 pacman 指向安装路径。在安装完所有东西之后，创建了用户，并恢复了我的主目录，但这次是在一个单独的分区上，所以万一根分区出了问题，我可以保存我的主目录。

**我学到了什么—** 1。切勿删除备份。2.永远不要相信 Windows。3.请始终将您的主目录放在单独的分区上。4.用你该死的脑子。5.你自己解决吧。

今年 4 月，我又搞砸了一次。我决定彻底抛弃 Windows 和 Fedora，让 Arch 成为唯一的操作系统。此外，我想清理我的硬盘，这是一个混乱的分区地狱。

所以，我将我的根分区和主分区同步到另一个 NTFS 分区，当我意识到我的错误时，已经太晚了。是的，你能猜到发生了什么。当我备份到 NTFS 时，我失去了所有权限。所有文件都被设置为 rwxrwxrwx。

在我的头在桌子上撞了几个小时后，我想起 pacman 可以检查文件的完整性。所以，它必须把数据存储在某个地方。在查看数据库(/var/lib/pacman/local/)后，我发现 pacman 将元数据存储在包目录下的 mtree 文件中。这些 mtree 文件只不过是一个 gzipped 数据文件。

我尝试用 BSD mtree 恢复权限，但它出现了一些错误，因为格式无法识别。所以，我用 Bash 写了自己的解析器(抱歉丢了代码)。它从 mtree 文件中解析权限数据，并应用它们。有 5 或 6 个边缘情况，我的编码魔法不起作用，但我可以手动修复它们。

**我学到了什么—**

备份很重要，并且要确定你在哪里备份。

* * *

## 【2018 年 1 月

2018 年才过了 1 个月，但是 Linuxer(那是一个词吗？)我内心在强烈要求更好的东西。所以我决定“升级”我的装置。

我注意到的第一件事是，我仍在使用 BIOS 和 MBR，在我不知情的情况下，这是在我买笔记本电脑时安装 Windows 的人选择的。

我的第一个目标是将其转换为电喷和 GPT。

第一部分很简单—

1.  创建一个 ESP 分区。
2.  将它挂载到/boot/efi
3.  安装 grb-EFI。
4.  更新 grub 文件。

最后两个部分我已经做过了，没有办法我可以搞砸，我做到了。

在 1 个小时的 grub 未被识别后，我意识到我必须将 grub64.efi 复制到 ESP/EFI/Boot/BOOTx64.efi。

在我这样做之后，grub 被识别出来了，但是它没有启动。

在 grub 找不到内核和 initrd 文件两个小时后，我发现这是由于不正确的挂载路径造成的。

成功配置 grub 后，我很满意，也很自信。所以我销毁了 grub，安装了 Refind，并让它在第一次尝试中运行:)

接下来的部分更容易，我只是使用 gdisk 将 MBR 转换为 GPT，它工作得完美无缺。

我还将 zsh 作为我的默认 shell。在多年的热爱狂欢之后，我终于开始了新的旅程。

**我学到了什么—**

有时候改变是令人耳目一新的。

## **2018 年剩余时间**

2018 年我没有做太大的改变。我得到了一份实习工作，后来又得到了一份在家工作，所以不可避免地，我会抵制这种突破性的改变。一路上很少打嗝，但并不太具有挑战性。

但这并不意味着我没有学到新东西。我在工作中担任系统管理员和后端开发人员，必须广泛使用 Linux。特别是，我学到了-

1.  坞站和 Gitlab CI/CD
2.  服务器部署以及 Apache 和 Nginx 配置。

## 【2019 年 1 月

然而在 2018 年 12 月，我造了一台新的 PC，这意味着我有了一个从头开始的地方。虽然我在 12 月份构建了它，但主板出现了一些问题，所以我不得不等到 1 月份才能让它工作。

这一次不像前几次，我知道自己想要什么，也知道怎么做。我用两个 LV 建立了一个 LVM——一个用于 root，一个用于 home，并安装了 Arch Linux。

安装不是很顺利，因为我的 WiFi 适配器需要一个驱动程序，默认情况下内核不提供这个驱动程序。谢天谢地，它在 AUR 可以买到。

我也换成了鱼壳。它不兼容 POSIX，所以我最喜欢的功能很少不能用(例如，尽管在我开始使用它几周后，他们就把它们添加到了 fish 中。活着是多么美好的时光)，但改变是件好事。

我的桌面上也只有等离子，而不是像笔记本电脑那样的每一个窗口管理器。我对工作机器也有严格的禁止实验原则。

我做的一件好事是定制 Vim。我从[这里](https://github.com/amix/vimrc)得到了灵感，改了几样东西——把病原体换成了 Vundle，把一些老插件换成了更好的，又加了几个，改了一些配置，把 Vim 换成了 Neovim。最终的结果是，我的 Vim 不亚于一个 IDE。史诗 Linux 盖伊时刻！

## 【2019 年 4 月

我最近开始了解 NixOS。它有一个独特的包管理方法。有点像亚斯特，但更好。这个想法是，你在一个中心位置写下你所有的包和配置，操作系统会根据它来构建自己。升级是原子性的，您可以随时回滚。并且软件包是沙箱化的，因此您可以安装同一个软件包的多个版本而不会发生冲突，或者安装软件包而不用担心依赖性。

所以我在笔记本电脑上告别了拱门，安装了 NixOS。到目前为止，这是一个有点不合常规的工作，但希望我会很快适应它。

* * *

## **结论**

人们会说，“Linux 是狗屎。”“它没有很多软件”，“我以前在 Windows 上有这个，但在 Linux 上没有。”等等。相信我，前两个月我也有同样的感觉，但我没有失去耐心，因为我正在切换操作系统，所以我**必须**期待事情不会像以前一样。我去过 Linux 的阴暗面，我看到了它能做什么。

我学到了很多东西。我获得了很多经验。在没有任何指导的情况下自学很难，但是如果我能做到，任何人都可以。

我会用新的里程碑来更新这个故事。