# TIL: Python 理解使矩阵工作

> 原文:[https://dev . to/rsdesoto/til-python-comprehensions-make-matrix-work-1ge 1](https://dev.to/rsdesoto/til-python-comprehensions-make-matrices-work-1ge1)

你好世界！

首先，简单介绍一下:我叫 Ry，我正在芝加哥参加一个 web 开发训练营。在过去的 5 年多时间里，我是一名顾问；我写了大量的代码，但主要是为了 SAS 中的数据分析/数据操作，以及按照我的意愿使用各种微软产品。现在我正在参加这个训练营，同时也在钻研我的 Python，希望能从事某种软件开发/数据工程师/？？？？？咨询以外的事情。我仍然是一个新手(充其量)在任何不是 SAS 或 VBA，但我正在努力工作，学习了很多，变得更好！我打算用这个博客来记录我学到的东西，我遇到的很酷的东西，我特别兴奋的项目等等。

作为我 git gud 努力的一部分，我第一次做了《代码降临》!这就是为什么我最终发现 Python 处理创建列表的方式很奇怪。

## [](#the-problem)问题

代码问世的第三天一群人试图分割一块布，但他们对在哪里剪以及剪多少都有不同的想法。为了把它转换成不那么可爱和与故事相关的术语，我通过创建一个 2D 矩阵并从提供的坐标中找到矩阵中所有重叠部分的坐标来解决这个问题。

本质上，我想要创建的如下:

```
[[0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0]] 
```

其中每个 0 代表一平方英寸的织物。

## [](#the-solution-take-1)解:取 1

我遍历了输入中提供的所有坐标；在切片覆盖的每平方英寸处，我在矩阵中相应的 0 上加了+1。最后，列表中值为 2 或更大的每个元素都被重叠的片覆盖。

这一切都很简单；一旦我首先完成了理解问题所需的空间推理，编写代码来循环遍历一切就相对简单了。然而，我花了很长时间才开始创建矩阵。

我的第一个想法是列一个空白清单。或者:

```
sleeve = [0] * 5
shirt = [sleeve] * 5 
```

它为您提供了一个列表，如下所示:

```
[[0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0]] 
```

为了确保我的坐标工作正常(如果不是真的需要，我不相信正则表达式)，我输入了我天真地认为可以改变单个单元格的内容—

```
shirt[2][1] = 500 
```

从逻辑上讲，它提供了:

```
[[0, 500, 0, 0, 0],
 [0, 500, 0, 0, 0],
 [0, 500, 0, 0, 0],
 [0, 500, 0, 0, 0],
 [0, 500, 0, 0, 0]] 
```

…当然！好吧！也许 sleeve 乘以 5 的结果有什么好笑的？

那么，让我们用整块布来做这个—

## [](#the-solution-take-2)解:取 2

```
shirt = [[0] * 5] * 5

[[0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0]] 
```

所以现在一切都一步到位了。围绕“袖子”的定义不可能发生任何奇怪的事情，对吗？

```
[[0, 500, 0, 0, 0],
 [0, 500, 0, 0, 0],
 [0, 500, 0, 0, 0],
 [0, 500, 0, 0, 0],
 [0, 500, 0, 0, 0]] 
```

…好的，当然！我们试试别的吧-

## [](#the-solution-third-times-the-charm)答案:第三次的魅力？

```
sleeve = []
shirt = []

for j in range(5):
    for i in range(1):
        sleeve.append(0)
    shirt.append(arr)

[[ 0, 0, 0, 0, 0],
  [0, 0, 0, 0, 0],
  [0, 0, 0, 0, 0],
  [0, 0, 0, 0, 0],
  [0, 0, 0, 0, 0]]

shirt[2][1] = 500

[[ 0, 500, 0, 0, 0],
  [0, 500, 0, 0, 0],
  [0, 500, 0, 0, 0],
  [0, 500, 0, 0, 0],
  [0, 500, 0, 0, 0]] 
```

[![here we are again](../Images/1ec4911f4872cae34ee4ac73583b98fe.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--pmXbyH0R--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/0o1vizx29791qzl1c05c.gif)

此时，我上了网，问到底是怎么回事。答案显然是“使用 NumPy”，但我很固执，决心自己找出答案(错误！).

我——实际上我还是不太清楚发生了什么。我怀疑和指针有关？不知何故，当列表“sleeve”乘以“shirt”列表时，它只是在单个 sleeve 数组中复制，而不是复制 sleeve；不过，我还没有找到任何解释，所以如果你知道很多关于 python 和指针的知识，以及它们是如何工作的，请(拜托，看在上帝的份上，这快把我逼疯了)告诉我解释！

(是指针吗？我在大学的一门计算机科学课上得了流感，错过了指针周，我想我所有的痛苦都是由它造成的)

总之——理解被介绍给我时是这样的，“基本上是一个 for 循环，有一些小的不同，你不必担心”。原来你不必担心的小差异是*让这该死的东西工作*。

## [](#the-solution-sure-why-not)解决方案:肯定为什么不！！！

```
shirt = [[0 for i in range(1000)] for j in range(1000)] 
```

我生命中的几个小时我再也回不来了。

[![w h y .](../Images/db590048b34819b0e37dfbfcc5ea89ec.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--RED7t-K8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/1bt1ct8u4tnvoo19rjr3.jpg)