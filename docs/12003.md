# 如果部署不当，你可以做的 10 件事

> 原文:[https://dev . to/flipped coding/10-things-you-can-do-if-you-have-a-bad-deploy-h7g](https://dev.to/flippedcoding/10-things-you-can-do-if-you-have-a-bad-deploy-h7g)

想想这个。您刚刚完成了网站或项目的一些更新。你当然很兴奋，因为你修复了很多错误，并且你可以向一些人展示当你在本地运行它时有多棒。

如果您在一家小公司或为自己工作，您可能需要自己将这些更改部署到生产服务器上。所以你清理你的代码，在 Git 中进行所有的提交，并部署那些让你看起来无所不能的更改。

然后就不管用了。一点也不。现在你有愤怒的人告诉你去解决它，而你不确定问题出在哪里。这里有几件事你可以快速检查，以帮助找出问题所在:

## [](#check-the-connection-strings)检查连接字符串

像这样简单的事情真好。确保您连接的是生产数据库，而不是开发数据库。根据您的部署方式，连接字符串可以自动更新以匹配其所处的环境。这可能会弄乱字符串值并导致奇怪的问题。

## [](#check-the-cors-settings)检查 CORS 设置

如果您有任何对没有连接到您的站点的 API 的调用，您肯定需要检查您的 CORS。您的跨来源资源共享设置可能会阻止您预期的任何传入数据。因此，如果你在使用谷歌地图、Stripe 或 SendGrid 等服务，一定要仔细检查你的 CORS 设置。

## [](#check-the-username-and-password-for-everything)检查用户名和密码的一切

有时候是一些小事。确保你的网站使用了正确的用户名和密码。这包括数据库、任何 API 认证或内部认证。最好检查一下这些简单的事情，以确保你没有浪费时间去看其他不是问题的事情。

## [](#check-the-publish-procedure)检查发布程序

有些人喜欢使用构建管道来运行最后一分钟的测试或检查，如果你能做到这一点，这并不是一个坏主意。您可以包含在管道中的一个部分是，一旦新文件通过所有测试，就自动发布它们。确保此发布过程在客户端和服务器端都引用了正确的文件夹和文件。

## [](#check-the-published-files)查看发布的文件

这可能并不总是可行的，尤其是在您将文件分块的情况下。虽然如果你可以选择查看文件，这是一个很好的方法来找出是否正确的文件被发布。您可以随时检查日期戳，但有时它有助于查看您所做的更改是否确实存在。也许你不小心发布了错误的站点分支。它发生了。

## [](#check-the-appsettingsjson)查看 appsettings.json

这里的一个值有可能在本地测试期间被更改，并且在部署之前没有被改回。服务器根地址在您的实时站点和本地站点上可能会有所不同。IsEnabled 值可能需要为 false 而不是 true，才能在实时站点上工作。快速浏览一遍，确保没有异常。

## [](#check-the-config-files)检查配置文件

这是你的网站的许多幕后规则的地方。你错过了什么重写动作或者其他什么吗？您可能有一些不太正确的路由。同样，只需检查所有内容并检查值。此外，如果你有另一个类似的项目，你可以看到它有什么价值。

## [](#check-the-changes-you-made)检查您所做的更改

是*你*弄坏的吗？这还不是最不可能的情况。我们都疯狂地尝试让我们不会**故意部署的东西在本地工作。检查您的代码，看看您是否删除了类似的内容，因为这很可能是您的问题。即使它在你的机器上运行，也要检查你的修改，看看你是否做了一些奇怪的事情。**

## [](#look-for-version-differences)寻找版本差异

你网站的前端和后端还兼容吗？后端还和服务器兼容吗？对库或整个框架的更新可能会导致一些噩梦，因为它们需要最长的时间来弄清楚。节省自己大量的时间和脏话，并检查这些版本的兼容性。

## 重新发布一个旧的工作版本

在你弄清楚为什么站点不能使用你的最新修改之前，可以重新部署一个旧的、可以使用的站点版本。任何时候网站关闭，拥有网站的人都在赔钱。你不想那样，因为那样你会赔钱。向你的人解释，你必须回到旧版本，直到你发现新版本的问题。他们明白。有时候…

你有没有这样的恐怖故事:你知道一个项目可以工作，但是当你部署它的时候它却不能工作？我肯定有几个。

* * *

嘿！你应该在推特上关注我，因为原因:[https://twitter.com/FlippedCoding](https://twitter.com/FlippedCoding)