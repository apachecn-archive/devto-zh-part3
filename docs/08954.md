# 有状态的 Acres 为长期独特的家

> 原文:[https://dev . to/wired ferret/stateful-acres-home-for-the-chronically-unique-380 p](https://dev.to/wiredferret/stateful-acres-home-for-the-chronically-unique-380p)

## [](#a-nokill-shelter-petting-zoo-and-ufish-trout-pond)*一个不杀生的收容所，宠物动物园，和 U-Fish 鳟鱼池塘*

声明:我不是一个真正的系统管理员，但我确实和他们中的许多人交谈过，这个幽默的演示旨在强调遗留机构经历的向云迁移的问题。

[![A green, sunlit field with a fence and gate](../Images/1da3e8c76b626fcafed9f05e5ddd71b3.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--tZbYFUar--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/http://www.heidiwaterhouse.com/wp-content/uploads/2019/03/image-1.jpg)

# [](#the-setting)设置

Stateful Acres 是一个遗留机构。你知道这种人——这里有些人有一位数的电子邮件地址，可以追溯到 gopher 协议的网站，以及一堆数据库，所有这些都是专有的和锁定的，有时有特定的硬件加密狗。钱不够，因为从来没有足够的钱做维护。

组织的不同部门有着非常不同的收入来源、威胁模型、团队结构，有时他们会派年轻的同事去网络储藏室偷东西。整栋楼里只有一个人懂电话系统，她 6 个月后就要退休了。有一个衣着惊人的团队在做商业情报，而这个组织甚至不是真正的企业，对吗？

一个新的副总裁来了。他想和 Stateful Acres 的居民和管理员谈谈云。当他说云的时候，有一点点定音鼓的效果。没人知道那是怎么发生的。他承诺，在云中，每个人都有一个环境，永远不会有天气。在云中，管理所有动物将变得容易，因为它们都有相同的需求，并且易于复制和自动扩展。很多管理员和 BI 人拍手称快，因为他们以前在云中工作过。这比 Stateful Acres 现在工作的方式铲干草要容易得多。

# [](#the-characters)人物

鱼。没有人问鱼任何事情，或者担心它们。它们很容易照顾，而且你不会说出那些随时可能被捕捞和吃掉的东西的名字。你所关心的只是池塘有利于鱼的生活，这没有问题。

家禽。有 6 只鸭、6 只鸡和一只鹅的翅膀断了，一直没有痊愈。这可能会没事的。鸟类有足够多的对称性，以至于把鸭子变成小鸡，或者反过来，都不会是一个大问题。即使是单独的鹅也可以基于 avian 模板编写脚本，而且她是一个斗士，所以无论如何有一个备份是很好的。没有警报鹅的宠物动物园算什么？

[![A lamb and a goose face each other through a wire fence](../Images/e2fd1b018af22b9ad730431ca3610922.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--AH3v82vA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/http://www.heidiwaterhouse.com/wp-content/uploads/2019/03/image-2.jpg)

山羊昌西。昌西是一种邪恶的动物。我的意思是，所有的山羊看起来都很邪恶，但 Chauncy 会用头撞任何没有正确权限的人。他的一只角裂了，他的左后腿也不见了。我们在他的兽皮上纹上了所有的会计准则，这是一个不杀生的庇护所，所以在他死之前，我们必须确保他不会跑掉或者惹上太多麻烦。我们可以编写他的脚本，但这需要几个小时，如果我们只保留一个冷存储备份可能会更好，因为当一个卑鄙的老色鬼向你投来邪恶的目光，系统抱怨缺乏会计原则时，建立所有的数据库连接只是…我们永远不要再这样做了。

Dougal 也是一种三条腿的反刍动物，但这是他最像 Chauncy 的地方。道格是那种喜欢抚摸动物园里的驴子，最后总是戴着雏菊花环，小孩子们试图喂它草，它从不介意。我们需要留住道格，因为他负责农场的交通。我想我们可以给他写剧本，但是我们从来不需要一次超过一头驴，我们都有点希望当他走了，我们可能会找到一匹需要爱和照顾的设得兰矮种马。

# [](#the-dramatic-tension)戏剧性的紧张

那个声音像定音鼓的人说我们要去云端。所以我们要去。首先是鱼，因为它们很简单。许多人，尤其是那些从未进行过大规模迁移的人，认为这意味着问题会很简单，一切都会顺利进行。鱼被脚本化，上传，甚至没有人注意到这个信号。U-Fish 指南带着他们去帮助孩子们在不刺穿自己的情况下上钩。

接下来，家禽上升。让除了老前辈之外的所有人吃惊的是，这只鹅是个问题。鸭子和鸡非常简单，但是鹅实际上是一个网络服务器，它有一堆在出版的教科书中的 URL。终身教授非常喜欢这只鹅，经常来看望她。他们问，如果鹅在云中，他们怎么能得到如此神奇的鹅毛笔呢？没有人告诉云团队他们必须提供羽毛笔！这不在操作规范里！教授们耸耸肩，提议把这只鹅养在附近的校园池塘里，但我们都知道，这只鹅是 Stateful Acres 上需要的，以便继续生黄铜蛋(我们养了一只廉价的鹅，这就是为什么她和我们这些不合群的人在一起)。我们不能复制这只鹅。嗯，我们可以，但那样我们会有两只鹅，其中一只仍然不在云中，这并不能解决任何问题。

该小组同意不去管这只鹅，直到他们能解决鹅毛笔的问题。

他们看着乔西。Chauncy 回瞪。他们看着昌西的兽皮，如此珍贵，如此…贴在山羊身上。他们看向别处。后来，他们告诉自己，他们正试图在转型中获得足够的经验，以正确地做好困难的事情。

队员们看着道格。道格温和地回头看。如果有帮助的话，他完全准备好变得云里雾里了。队员们围着他走，给他和他的菊花链拍照。有人说，“如果我们只是在云中建造一匹设得兰矮种马，并让老道格在这里逗少数出现的人开心，即使大多数人都在云中，这不是更容易吗？”。这个团队想到了可爱的、毛茸茸的、四条腿的设得兰矮种马，并没有把多米尼克移到云端。他们把他留下来“维持传统关系”。他做到了。一切都很好，直到 6 个月后的审计时间，当审计员问谁在照顾多米尼克，他是否得到了他的镜头和病毒更新和蹄修剪，没有人有一个答案。

农场的工作人员分散在不同的地点，不在云端的人永远不会体验到它应该如何工作的简单部分，在云端的人不明白为什么农场的人不会停止抱怨一只愚蠢的山羊，与池塘里成千上万的鱼相比，这有多难？单单氮的管理问题就比一只肮脏的动物难多了！

* * *

这是一个愚蠢的例子，但它说明了我看到的许多组织遇到的一个问题。有很多东西可以放入云中，很多服务和服务器都很牛，很容易编写，随时可以轻松启动或关闭。但是仍然有很多很多的组织使用三条腿的山羊作为服务器。

他们现在可能生活在 VMWare 上，但他们仍然太单一，太受供应商限制，任何人都无法在云中轻松复制他们，即使是云中的一个不错的虚拟机。如果你的许可证是按 CPU 的，你怎么翻译呢？如果程序和数据是有状态的，不能被分离，你如何管理？如何监控一个多模态的体系结构，有些仍然在数据中心，有些在其他人的数据中心？如果服务器是有状态的，并且写入日志，即使它是完全虚拟化的，您仍然需要某种警报系统在您的日志填满磁盘空间时向您发出警告，而这不是云供应商一直热衷于构建的那种警报。

当有人告诉你，他们有一个数据中心，或者一个传统产品，或者他们不能升级到你正在销售的新版本，我向你保证，这不是因为他们没有考虑他们的选择。他们有，这是他们给他们的资源的最佳选择。

不久前，在 Twitter 上有一个关于“坏代码”的讨论，因为无论是谁写的，都是在我们不理解的约束下运行的。基础设施也是如此。对于我们这些为云原生的、SaaS 风格的公司工作的人来说，很容易对系统管理感到不耐烦，但它永远不会消失，不管它叫什么，范围是什么。某个地方的某个人正在让服务器保持运行，监听警报，随时待命，执行备份，并了解磁盘和电缆故障的百分比。

可能是在一头驴瞪着他们的时候。

[![A field of lavender with the sun setting behind a tree](../Images/3bb4d8f0b58c03c29c97f20e4a72c644.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--7MD0HhRM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/http://www.heidiwaterhouse.com/wp-content/uploads/2019/03/image-3.jpg)