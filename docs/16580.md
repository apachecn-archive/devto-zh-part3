# 做后备训练

> 原文:[https://dev.to/bizzard4/do-backup-drills-290e](https://dev.to/bizzard4/do-backup-drills-290e)

故事时间！不久前，(读圣诞节)我们有一个不幸的事件，我们所有的主要生产数据被抹去，因为墨菲是顽皮的。电话响了，短信发了，最后我们把备份转换到主数据库。这并不理想，因为现在我们在没有实际备份的情况下运行，如果一个磁盘出现故障，我们就有丢失一切的风险。我们这样做的原因很简单，**没有人知道备份系统是如何工作的**。

现在我们回到办公室，首要任务显然是解决问题。没有人知道它是如何工作的原因很简单，做它的人离开了公司，我们从来没有在真实的场景中使用它。更糟糕的是，该解决方案是在我们的 Kubernetes 堆栈之前构建的，所以我们没有使用花哨的复制工具，而是使用了一堆自定义脚本。

作为一个团队，我们不得不花费大约 30 个开发人员小时来理解、提出和解决问题。在那次练习之后，一半的团队成员了解了备份系统是如何工作的，如果没有适当的备份，我们可能会花费更少的时间。

这件事让我反思，我们从来没有像应对火灾那样演练过备份恢复。我强烈建议任何拥有真实生产服务器的团队都应该进行备份练习，其中:

1.  使用了一个真实案例。例如，在系统运行和服务用户时删除 PostgreSQL 数据文件夹。
2.  演习应该以新的团队成员为目标，作为一次学习经历。
3.  随着时间的推移，练习应该突出潜在的混乱或更好的方法。

像消防演习一样。