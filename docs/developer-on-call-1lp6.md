# 开发人员随叫随到

> 原文：<https://dev.to/henrikwarne/developer-on-call-1lp6>

对于工作中的系统，我每七周中有一周是随叫随到的。在过去十年的大部分时间里，我一直在为我开发的系统组织待命轮换。我认为随叫随到是对工作负责的合理方式。你也能从中学到很多。然而，这是有压力的和不方便的，所以你应该为此得到报酬。[![](img/61ee2965c3fb10efcf4c336341e14bd3.png)](https://henrikwarne1.files.wordpress.com/2018/12/dsc_8891-e1543679260354.jpg)

# 为什么开发人员应该随叫随到

许多系统需要 24 小时可用，因此*某人*必须随叫随到以获得支持。在我看来，开发它的人自然也支持它。

**游戏中的皮肤**。作为一名开发人员，对你的代码负责意味着不仅仅是写代码，还要测试它，确保它做它应该做的事情，即使它在生产中运行。当你知道如果有问题，你可能会在半夜被吵醒，你会变得更加小心编码和测试。在他的书《T2》中，纳西姆·尼古拉斯·塔勒布提到罗马工程师不得不花一些时间在他们建造的桥下——以确保他们做得很好。

**整体观。**对系统进行故障排除会迫使你很好地理解其工作原理。如果你不与支持一起工作，很容易结束真正了解一些部分，但看不到所有部分如何连接和交互的全貌。此外，您可以直接看到客户使用该系统的所有方式。

**推动改进。**当您致力于修复系统中的问题时，如果日志记录或故障排除工具没有达到它们应有的水平，这一点会立即变得清晰。作为系统的开发者，你可以在遇到这些问题时解决它们。您可以通过添加更多相关信息或删除只会阻塞日志的日志语句来改进日志记录。您可以编写脚本和其他工具来帮助解决问题和恢复。您可以消除假警报。随着时间的推移，许多这样的小改进累积起来成为一个更好、更有弹性的系统。

# 报警

**电话和闹钟。**在 [TriOptima](https://www.trioptima.com/) ，我们有一个紧急号码，如果系统出现问题可以拨打。该号码将被转接给待命的开发人员。随着时间的推移，我们还增加了越来越多的监控功能，例如，对抛出的异常、队列长度和内存、CPU 和磁盘利用率的监控。该监控将生成警报，该警报将在呼叫时唤醒开发人员。这些天来，我们几乎从来没有被电话吵醒，因为我们在大多数客户注意到问题之前就收到了监控警报。

**心跳工作。对于两个主要的交互系统，我们定期运行心跳作业(每分钟和每五分钟)。如果它们没有按预期执行，就会发出警报。事实证明，这些方法非常有用，因为它们可以捕捉到一系列问题。例如，最近给我们发送数据的服务器用完了线程。其中一个影响是我们的心跳作业没有运行，所以我们得到了一个警报。在其他情况下，我们已经通过心跳作业意识到连接问题。在[这本书里发布吧！迈克尔·t·尼加德称这些为合成交易。](https://henrikwarne.com/2016/10/27/book-review-release-it/)**

**轻松回滚。**在工作中，我们会在新功能和错误修复就绪时部署它们。这意味着全天有许多小型部署。如果我们因为某个问题在晚上被吵醒，解决方案通常是回滚最近的部署。多亏了 Kubernetes，这是一个简单快捷的操作。一些更改(如数据库迁移)可能更难回滚。但是因为我们知道这一点，并且在游戏中有皮肤，我们试着写这些尽可能容易回滚。我们还在早上进行高风险部署，以便全天监控系统。

**改进警报。**我们正在不断调整警报，使其更加精确，并剔除虚假警报。一个例子是队列长度警报。如果过去 10 分钟内的平均长度超过阈值，我们就发出警报。然而，在修复了这些问题之后，队列长度警报直到平均值低于阈值才被清除。不立即清除它可能会掩盖新问题的发生。因此，我们将它改为一旦达到阈值就引发，并且一旦队列长度降到零就清除它。这使得特定警报更加精确和灵敏。就在上周五，我还调整了另一个闹钟——一些同步问题可以等到正常办公时间，这样就不会再吵醒任何人了。

# 补偿和调度

**付钱。随叫随到的人应该得到额外的报酬。如果你在一周内的任何时候都要准备好登录并解决问题，这对你的生活会产生重大影响，所以你应该为此得到补偿。我认为最好的制度是，无论是否发生事故，你们都可以因为随叫随到而获得固定的金额，而且每次被叫出去都可以获得报酬。取而代之的休假也是一种可能。**

**调度。**当我随叫随到时，每次都是一周，我认为这是一个很好的持续时间。最好提前(提前几个月)制定时间表。这样就更容易计划你生活中的其他活动。能够与团队中的其他开发人员交换时间也是非常好的。很难说随叫随到的理想周期是多少。太频繁了，很难过正常的生活。太少，你没有得到足够的实践和生锈。每七八周对我来说是一个很好的间隔。

**升级。**如果真的发生危机，总会有升级的途径。如果整个系统都瘫痪了，而你在解决问题上没有任何进展，你就需要更多的帮助。通常情况下，经理会成为上报点，他们会试图找到任何可以提供帮助的人。我还告诉我的同事，如果有什么我能帮忙的，我不介意被叫，即使我那周不值班。十年来，我只接到过几次电话，但只要知道如果有必要，你可以给其他团队成员打电话，这有助于降低随叫随到的压力。

**入职。**团队中的新成员在加入随叫随到轮值之前，需要时间来了解系统并练习故障排除。之后，我们与新成员配对，一起进行为期一周的随叫随到，然后再安排他们自己的时间。

# 结论

尽管随叫随到有时会很有压力，但我认为这真的很有好处。随叫随到意味着对你开发的东西负责。在这个过程中，你学习系统如何工作(或不工作)，并可以使用反馈来改进系统。然而，随叫随到的负担需要在团队成员之间分担，你应该为此获得适当的报酬。