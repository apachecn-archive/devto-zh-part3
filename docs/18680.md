# 在 Go 中存储数据

> 原文:[https://dev.to/ivan/storing-data-ingo-17me](https://dev.to/ivan/storing-data-ingo-17me)

大多数程序通常处理某种需要持久化的数据——从不同类型的用户输入到内部应用程序状态、运行时缓存，再到程序配置。

在本文中，我将提供 Go 中可用选项的概述，基于我们用来区分不同用例的数据库类型的一些标准。无论你从事的项目是桌面应用、服务器程序/微服务、嵌入式系统/物联网解决方案，你都应该能够找到符合你需求的存储解决方案。

在一个项目中使用多个数据库系统并不罕见，因为每个系统可能适合不同的目的，例如一个用于记录/跟踪，另一个用于用户数据。但是，请记住，这可能会成为维护的负担，因为与任何其他类型的依赖关系一样，总有一个学习曲线，在更新期间您需要跟踪更改，最后但同样重要的是，安全和许可影响。此外，如果您发现自己需要来自同一个地方的两个数据库的数据来执行某个操作，您可能需要重新考虑您的架构选择。

* * *

### [](#where-the-data-is%C2%A0stored)存储数据的地方

从局部性的角度来看，根据您构建的应用程序类型和应用程序需要存储的数据类型，有两种主要的选择。

*   **远程(服务器)存储**——一个数据库服务器或者其他形式的 API 服务器，你从你的程序连接到它。在多个客户机访问一个公共数据的情况下，或者有时在多个服务与一个数据库服务器一起工作的情况下，这是很有用的(并不是说后者被认为是面向服务的体系结构中的反模式，因为它打破了服务隔离)。

*   **本地存储(嵌入式)** -当数据仅特定于一个应用程序安装，或者数据需要离线可用时，最好将数据保存在本地。在嵌入式模式中，数据库是程序的一部分，处理数据不需要任何服务器/服务(既不是本地的也不是远程的)。

**半本地存储**——与本地存储类似，这个类别中的“半”来自于使用与程序运行在同一台机器上的数据库服务器，而不是嵌入式库(因为这不是一些数据库的选项)。

* * *

### [](#how-the-data-is-stored-and%C2%A0accessed)数据是如何存储和访问的

**SQL 数据库**——在表格中存储结构化数据(每行一个条目)，并提供一种查询语言来访问和创建新的集合。

*   **键值存储** -使用一个关联数组(映射/字典)将任意数据存储为数值(通常是序列化的)，可由数字/字符串键访问。

*   **文档存储**——存储“文档”(JSON、XML 或任意数据)，并提供基于各种标准对这些文档进行分组和搜索的方法。

*   **对象数据库**——结合了上述类型的方法，支持将数据表示为对象，通常与对象紧密集成(Go structs)。

*   **图形数据库** -将数据表示为节点和边的集合-在多层关系是数据最重要部分的应用中非常有用。

* * *

### [](#the-way-the-data-is-used-most-of-the%C2%A0time)数据的使用方式(大部分时间)

在这一类中，实际上最常见的是您的项目以多个数据库结束，因为它实际上区分了您的应用程序所需的目的和功能。

*   **数据入口数据库** -记录、追踪、监控、时间序列，

*   **缓存存储** -提高性能和减少延迟的操作缓存，

*   **分析数据库** -对执行数据分析最有用，通常带有用于这些目的的工具。

* * *

### [](#usecases)用例

我为最常见的使用场景选择了一些有趣的数据库。

#### [](#monitoring-tracing-analytics)监控、追踪、分析

*   [**普罗米修斯**](https://github.com/prometheus/prometheus) -远程服务器，数据入口，分析
*   [**InfluxDB**](https://github.com/influxdata/influxdb) -远程服务器，数据入口，分析
*   [](https://github.com/jaegertracing/jaeger)**-远程服务器，追踪，监控**

 **#### [](#general-sql-storage)通用 SQL 存储

*   [**TiDB**](https://github.com/pingcap/tidb) -远程服务器，分布式，可扩展，符合 ACID，兼容 MySQL 协议
*   [**cocroach db**](https://github.com/cockroachdb/cockroach)-远程服务器，分布式，可扩展，符合 ACID
*   [**rqlite**](https://github.com/rqlite/rqlite) -远程服务器，分布式，可扩展，基于 SQLite

和 ORM，所以如果您已经有一个现有的 SQL server 基础结构，那么连接到它应该没有问题。

#### [](#keyvalue-stores)键值存储

*   [](https://github.com/dgraph-io/badger)**-本地/嵌入式，符合 ACID，事务**
***   [**BoltDB**](https://github.com/boltdb/bolt) -本地/嵌入式，符合 ACID，事务**

 **#### [](#object-stores)对象商店

*   [**对象框**](https://github.com/objectbox/objectbox-go) -本地/嵌入式，符合 ACID，事务，查询

这个类别在 Go 中似乎很少出现，但是，对于键值存储和 SQL 数据库，有相当多的 ORM:

*   [**GORM**](https://github.com/jinzhu/gorm) -远程服务器，支持 MySQL、PostgreSQL、SQLite、MS SQL
*   [**BoltHold**](https://github.com/timshannon/bolthold/) -本地/嵌入式，通过 BoltDB 提供序列化

* * *

我希望这能给你一个开始下一个项目的地方。如果你觉得你最喜欢的图书馆应该被列出来，或者你错过了什么，请在评论中告诉我。****