# 我们如何为汽车市场创建多站点设置:第 3 部分

> 原文:[https://dev . to/codica com/how-we-created-a-multi-site-setup-for-a-vehicle-market place-part-3-oln](https://dev.to/codicacom/how-we-created-a-multi-site-setup-for-a-vehicle-marketplace-part-3-oln)

*这篇文章最初发表在 [Codica 博客](https://www.codica.com/blog/time-tracking-with-slack-bot/)上。*

今天，我们想为您提供我们文章的最后一部分，致力于[为汽车市场](https://www.codica.com/blog/multisite-vehicle-marketplace/)创建多站点设置。在这里，我们涵盖了最后的挑战，如**添加新网站**和**监控**。如果你错过了第二部分，这里有供你参考。

让我们开始吧。

## [](#adding-new-websites)添加新网站

目标:开发一个简单的网站添加流程

然后这个平台发展迅速，所以我们知道网站的附加问题会经常出现。但是当你想添加/删除某个网站时，这并不像你添加/删除 80 多个网站那样困难和费时。

因此，我们的主要目标是开发一种有效的方法，在需要时快速添加新网站。为了实现这一目标，我们采取了两个步骤。

**第一步。新数据库准备**

首先，我们的开发团队已经构建了一个脚本来生成一个新的网站数据库，并用初始信息填充它。

**第二步。开发简单的网站添加流程**

其次，我们想澄清这个过程。为了实现这个目标，我们的开发团队构建了一个 Rails 生成器——一个包含模板的脚本，用于生成新的网站配置。事实上，在这台发电机的帮助下，我们节省了很多时间。目前，添加新站点只需 1-2 小时，而不是 1-2 天。

该脚本产生:

*   现场
*   配置(例如`newsite.yml`)
*   基于徽标颜色自动配色的 CSS 文件
*   将图像放在正确的文件夹结构中
*   通过将标志重新涂成白色来添加水印。

开发完脚本后，我们只需要调整第三方服务，如 [AWS](https://aws.amazon.com) 、 [Mailchimp](https://mailchimp.com) ，并将网站 URL 添加到脸书白名单中。

如果我们需要删除一些网站，那么我们应该运行`rails destroy site *hostname*`。

## [](#monitoring)监控

**目标:实现自动化监控**
监控如此大的平台工作容量并检查其漏洞是非常重要的，因为许多网站都非常大。我们团队面临的主要挑战是以最省时的方式组织监控。我们过去常常手动检查网站或每天监控它们。

随着平台的发展，我们的开发人员决定使用 [Uptime Robot](https://uptimerobot.com) -一种自动化工具，它为我们提供了 4 种监控类型:

*   HTTP(S) :这非常适合网站监控。该服务定期向 URL 发送请求(就像访问者正在浏览您的网站一样),并根据网站返回的 HTTP 状态(200-成功、404-未找到等)决定它是打开还是关闭。).
*   **ping** :这有利于监控服务器。发送 Ping (ICMP)请求，并根据是否收到响应来决定启动/关闭状态。Ping 不太适合监控网站，因为网站(其 IP)可以在关闭时响应 ping 请求(这意味着网站关闭，但托管网站的服务器启动)。
*   **关键字**:检查网页上是否存在关键字。
*   **port** :适用于监控 SMTP、DNS、POP 等服务，因为所有这些服务都从一个特定的端口运行，并且 Uptime Robot 会决定它们是否响应请求。

准确地说，你可以找到许多选项来从 Uptime Robot 获得通知。

由于我们使用 Slack 进行公司沟通，我们已经调整了针对 Slack 聊天的提醒。如果任何网站关闭，负责平台支持的编码人员会立即收到通知。以下是该通知的一个示例:

[![](../Images/78687bf1a527c3b1ee655f57225892f4.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--NlLr83YM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/o7n44mtbcdduaey9nzc4.png)

因此，我们总是与时俱进，并准备立即解决任何问题。

## [](#conclusion)结论

总的来说，我们想指出的是，对于试图建立一个覆盖多个地理区域的市场的商务人士来说，多站点设置是一个完美的解决方案。

这个选项非常节省时间和成本，因为您可以轻松有效地控制和管理所有站点。配置系统给你一个机会去改善某个网站，并获得整个平台的结果。

**我们为自己取得的成绩感到自豪，以下是我们的成果**:

*   89 个地方汽车市场成功运营(而且数量还在增加！)
*   实现了 15 种语言和 72 种货币的本地化
*   实施移动优先的方法
*   常规的服务器响应是 100-150 毫秒
*   2-3 秒内的平均页面加载
*   平台的高稳定性和安全性
*   减少工作量——我们的开发人员已经找到或创建了工具，可以快速轻松地进行本地化、配置、测试、部署、监控和添加新网站。

想知道更多关于软件开发和市场的信息吗？查看[我们的博客](https://www.codica.com/blog),了解来自我们经验丰富的团队的更多内容。