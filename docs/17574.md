# 如果你不能维护它，就不要建造它

> 原文:[https://dev . to/gtanyware/if-you-can-maintenance-it-don-build-it-39aa](https://dev.to/gtanyware/if-you-cant-maintain-it-dont-build-it-39aa)

## [](#the-titchmarsh-effect)蒂奇马什效应

英国读者将会熟悉艾伦·蒂施马奇，一位电视名人园丁，他的特别之处是在不知情的受害者被一些合适的借口引诱离家时，对他们的花园进行改造。在几天的时间里，艾伦的团队将一片荒野变成了一个展示花园，不断面临不可能的截止日期和意想不到的困难。当受害者回来时，他/她总是对结果感到高兴(或者至少假装高兴)。这些都是很棒的电视节目。

事情是这样的，虽然；如果主人是一个热衷于园艺的人，那么它首先就不会是一片荒野。如果他们想要一个展示花园，并能负担得起园丁，他们肯定会这样做。所以问题是:谁来照看这个花园？

该方案在若干年后重访这些花园的情况相对较少，但我担心，如果他们重访，在大多数情况下，我们会发现它们很快恢复到原来的状态。

我希望与软件的相似之处很明显。网站有很长的寿命，所以当我们建立一个网站时，它是长期的。在我们开始之前，我们应该考虑谁来维护它。黄金法则是

“维护不了就不要建。”

## [](#maintenance-and-tco)维护和 TCO

正如电视花园改造一样，互动网站通常由非常熟练的团队来构建。一小部分网站所有者有一个长期掌握专业知识的内部团队，但更多的时候，维护工作会委托给那些在软件细节和所用框架方面没有受过培训的人。而且很多情况下根本没有维护团队；只是网站的所有者，每次需要维护时，他都必须召集一个团队。

几年后，维护者几乎肯定不是最初的开发人员。无论谁接手，都需要花费惊人的时间来掌握一个复杂的网站，而且偷工减料的诱惑非常强烈。经常会出现代码不断退化和维护成本不断上升的情况，直到被认为无法修复，需要完全重写。

当使用框架时，问题变得更糟。与主流网站相比，这些网站的寿命很短，而且不断受到更新、更时尚的模式的威胁。即使是同一个框架也可能在不同版本之间发生重大变化(参见 Zend 和 Angular ),这需要程序员进行彻底的思想重新定位，以选择旧版本。

这些问题应该在一开始就被预料到，并被考虑到 TCO(总拥有成本)中，但是通常很少考虑正在构建的东西的维护。

## [](#dsl-as-the-way-forward)DSL 作为前进的方向

从上面可以得出各种各样的结论，但是我有我自己的结论。第三代语言(C、Java、PHP、JavaScript 等)应该尽可能地对客户隐藏，尤其是在编写业务规则时应该避免，因为在产品的生命周期中，大部分更改都是在这里进行的。相反，您应该始终致力于拥有一个计算机和领域专家都可以操作的层。这方面最著名的例子是 SQL，它虽然容易被数据库专家阅读和编写，但也是可以由计算机运行的代码。该文氏图显示了 DSL(领域特定语言)如 SQL 的运行空间:

[![Where machines meet humans](../Images/f4bcb9ba8515a406f5fd30048111d868.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--tmE-gl6d--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/oto628m0oq9r144opxij.png)

类似英语的 DSL 不难写。首先，你需要设计一个清晰的语法，它足够接近英语，能够被任何一个在这个领域有丰富知识的聪明人理解。没有歧义是计算机语言的第一个先决条件，所以这里我们有一个交汇点。

我在这里说的是我的经验，我用 Java 和 JavaScript 构建 DSL 已经超过 20 年了。它们可能不是有史以来最高效的程序，但随着时间的推移，这变得越来越不重要了。JavaScript 在现代硬件上的强大力量是显著的；即使是我的效率相对较低的编译器，也能在每毫秒处理 3 到 10 行脚本*(这只是在编译时；运行时间更快)。因为一行脚本通常代表一个相当复杂的过程，所以一个脚本通常比完成同样工作所需的 JavaScript 要小得多。*

这种策略的效果是将编程工作分为系统编程和用户级编码，在系统编程中，任何可用的技术都可以，因为一旦构建好，就很少会有重大的改变，而用户级编码则使用词汇表与领域相匹配的 DSL 来完成。当框架(如果使用的话)过时了，它就不再重要了，因为在一个精心设计的系统中，所有的变化都将发生在用户层面。因此，产品的寿命更有保证，而且因为它不再依赖于高水平的技能，错误更少，维护成本也更低。

## [](#authors-credentials)作者的全权证书

注:我上面提到的 JavaScript DSL 是 ***EasyCoder*** ，实现为 WordPress 插件，发布在 WordPress 插件库中。在 [EasyCoder 软件](https://easycoder.software)中可以找到它的使用示例，它的源代码在 GitHub 上的 [EasyCoder Source](https://github.com/gtanyware/EasyCoder) 中。

米哈尔·姆罗泽克在 [Unsplash](https://unsplash.com/search/photos/gardens?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) 上的照片