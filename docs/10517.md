# 为 Linux 创建可用的备份设置(ElementaryOS 5)

> 原文:[https://dev . to/nathan bland/creating-a-usable-backup-setup-for-Linux-elementaryos-5-5b 75](https://dev.to/nathanbland/creating-a-usable-backup-setup-for-linux-elementaryos-5-5b75)

# [](#creating-a-usable-backup-setup-for-linux-elementaryos-5)为 Linux (ElementaryOS 5)创建可用的备份设置

创建备份解决方案是我们大多数人在需要时才会想到的事情。

这是一个指南，目的是在问题发生之前一步一步地解决问题。

注意:这是为 elementaryOS 设计的，但是应该可以在任何基于 Debian 的 Linux 发行版上运行，但是如果你使用的是其他版本的话，可以使用 YMMV。

## [](#step-1-backup-media-device)第一步:备份媒体设备

在我们开始使用一些备份软件之前，我们需要有一些东西来备份。这可以是一个网络位置，如 samba 共享，系统本身的辅助磁盘，或可移动磁盘，如外部硬盘驱动器。

就我而言，我使用的是 4Tb 的 Western Digital Passport 硬盘。

## [](#step-2-install-the-software)第二步:安装软件

就 Linux 软件而言，有大量的备份解决方案，大多数基于 rsync 或 duplicity。在本指南中，我们将使用名为 *Déjà Dup 备份工具*的工具。它基于双重性，这意味着我们可以备份到任何类型的文件存储(甚至 NTFS)并保留权限，进行快照备份，并保留文件历史记录，这对我们来说是一件非常好的事情。在我的例子中，它允许我从我的 windows 安装和 Linux 安装备份到保存驱动器，而不需要不同的分区。*值得一提的是 Timeshift，如果它为 NTFS 驱动器提供任何支持，我都会使用它*

在小学安装这个是很简单的。首先，我们需要打开`AppCenter`，要么在 dock 上找到它，要么转到 applications 选项卡并键入名称。

打开后，我们将在 AppCenter 右上角的搜索栏中键入`Backup`。这将提供许多许多应用程序的列表，其中大多数是“非策划的”。`Déjà Dup`也属于这一类，对我来说是排名第五的。

找到列表后，单击最右边的`Free`按钮，这将提示您输入管理员(sudo)证书来安装软件。输入它们并点击`Authenticate`。

你将会看到一个下载和安装的进度条。安装完成后，您可以关闭应用中心。

## [](#step-3-configuring-backup)第三步:配置备份

现在我们已经安装了备份工具，我们需要打开它。点击左上方的`Applications`菜单按钮，寻找`Backups`或输入进行搜索。

迎接我们的是一个只有两个可见按钮和几个菜单项的界面。按钮`Restore...`和`Back Up Now...`提供了快速启动的方法。

在我们点击其中一个之前，让我们检查一下我们的菜单项:

*   概述-我们现在所处的位置
*   要保存的文件夹-我们想要备份的内容，默认情况下，只备份您的个人文件夹。
*   要忽略的文件夹-不希望包含在备份中的内容。
*   存储位置-您的备份将存放在哪里。
*   计划-您希望系统多久备份一次

### [](#31-scheduling)3.1:调度

让我们从最后一个菜单项目开始，一步一步来。首先，打开`Automatic backup`。现在，我们希望它运行的频率可以有所不同。

这将取决于您的需求和可用存储空间。如果您有更多的存储空间，您可以每天进行备份并永久保存，或者如果您的存储空间少得多，您可以每周进行一次备份，并只保存少量备份

这在很大程度上取决于您认为什么适合您的数据。你多久换一次电脑上的文件？这些数据是保存在 google docs 或 GitHub 之类的其他地方吗？

就我个人而言，我在 Linux 中做的大部分工作都是代码，我用 git 来做这些。然而，我仍然有很多个性化设置，需要花费很大的努力才能恢复，所以对我来说，我将设置我的设置为每`Week`备份一次，并在`At least six months`保留一次。这给了我一个合理的数据量，而不会超出我所做的。请记住，该软件使用快照备份，因此它们不会像您可能认为的那样占用太多存储空间。

### [](#32-storage-location)3.2:存放位置

`Déjà Dup`的一个很酷的功能是，如果你愿意，你可以备份到一个云账户(Google Drive 或 Next cloud)。我只是要做一个本地备份，但如果您愿意，可以随意使用其中的一个选项。请记住，备份到远程服务器可能会慢得多。

在`Déjà Dup`这一点上，我们有两个选择，`Storage location`和`Folder`。您应该至少调整您的存储位置以指向您的外部驱动器。

在我的情况下，`Storage location`被设置到我的`Passport`外部驱动器，文件夹只是我的计算机名，`nathan-Z170XP-SLI`。您可以随意更改文件夹名称。

### [](#33-folders-to-ignore)3.3:文件夹忽略

这份菜单有点欺骗性。任何以前处理过 Linux 备份的人都会知道，如果你想成功地进行系统备份，有些系统文件夹是你应该*绝对*忽略的。幸运的是，`Déjà Dup`提供了更大的列表，那就是*总是被*忽略。您可以通过点击右上方的图标、选择帮助并浏览至`Settings`来查看该列表。帮助指南通常是有用的，写得很好，如果你有任何其他问题，我会推荐它。

我将通过点击加号`/media`来添加一个额外的条目，因为我将包括我的整个系统，并且我不想将我正在备份的驱动器*备份到*。

### [](#34-folders-to-save)3.4:文件夹保存

默认情况下，`Déjà Dup`仅备份您的个人目录。我希望在我的备份中包含更多内容，因此我将点击界面底部附近的加号图标，并为 root `/`添加一个条目。

这将告诉它备份系统上的所有内容(不包括忽略列表中的文件夹)，所以您可能不想将备份设置为这个级别。

### [](#35-backup)3.5:备份。

单击返回到`Overview`部分，我们现在可以运行我们的备份。点击`Back Up Now...`，系统会提示需要`duplicity`，并在右上角有一个安装选项，点击`Install`。就像之前一样，系统会提示您输入管理员凭据，并显示一个进度条。

安装完成后，系统会询问您是否需要备份密码。根据你的工作性质，以及你记住或忘记密码的倾向，我建议你用密码保护它。如果你没有使用密码管理器，你应该开始。但是，如果您觉得不需要或不记得密码，则选择`Allow restoring without a password`。

在我的例子中，我给出了一个密码。一旦你选择了一个选项，并给出了一个密码，`Forward`按钮就被激活，点击它。

这将启动备份本身。根据您拥有的数据量以及您选择的存储位置，这将需要很长时间。

如果您想查看它正在做什么，您可以展开详细信息。

### [](#step-4-testing-the-restore)步骤 4:测试恢复

*不要在原始源驱动器上进行测试*

这可能不是每个人都有实际用途，因为不是每个人都有多余的驱动器来尝试备份。如果可能的话，你应该试着用你的备份来恢复系统，以确保它能正常工作。这个特殊的解决方案要求您首先安装操作系统*，然后恢复您的备份。从那里你可以选择一个完整的系统恢复，或者挑选个别文件来恢复。*

 *请尝试一下。这不仅给你使用恢复功能的经验，让你知道当你需要的时候，时间应该如何出现。它可以让您解决遇到的任何问题，因为您知道您的数据在原始驱动器上实际上仍然是安全的。这让你可以创建一个行动计划——即使它只是在 google keep note 或 dropbox 中——当你需要进行真正的恢复时，可以帮助你在这段时间内大大减轻压力。

## [](#conclusion)结论

我们做到了这一点，如果您的硬盘(或 ssd)决定明天不醒来，您将有一个地方来保存您的数据，您现在可以稍微安心地睡觉了。

我希望这个指南对你有用，我绝不是备份领域的专家，这只是我使用的一个解决方案，而且足够简单，运行起来不会碍事。如果你有建议/更正/评论，请随时告诉我！

感谢阅读。

*克里斯·耶茨在 Unsplash 上拍摄的照片**