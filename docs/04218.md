# CTO 建议:安全使用云数据库的清单

> 原文:[https://dev . to/firm house/CTO-advice-a-check list-for-use-cloud-databases-securely-1mia](https://dev.to/firmhouse/cto-advice-a-checklist-for-using-cloud-databases-securely-1mia)

云提供的托管数据库非常棒。尤其是当你像我一样是一家小公司的 CTO。不会因为(不存在的)备份程序、静态加密、防火墙、关键软件更新而失眠。只需几分钟，生产、企业级 Redis 和 PostgreSQL 唾手可得。

听起来很容易，但有几件事你需要考虑。数据库不是**你的**，而是**他们的**——所以要小心你把你的(客户)数据托付给谁，以及你把它放在什么地方以使它尽可能安全。

以下是我的“托管数据库提供商”清单上的 8 条建议，没有特定的重要性顺序。下面是我们在[事务所](https://firmhouse.com)的风险管理评估和安全基线文档的复制粘贴。随意使用(否则后果自负！)

## [](#ensure-compliance-with-legislation-and-ensure-secure-standards)确保符合法规并确保安全标准

仅仅因为某个提供商提供最简单、最便宜的“一键式安装”云数据库，就选择他们，这实在是太天真了。始终确保这些提供商有一些信息管理认证，如 ISO27001。还要确保他们的物理数据中心在 PCI 标准下运行，并提供 SOC2 Type II 报告。

最重要的是，如果你不能公开访问他们的安全程序或文档，这是一个不好的迹象。

哦，能够签署一个 GDPR 兼容的数据处理协议/附录也是一个非常必须的！如果你是一家欧洲公司，这是必不可少的。如果你不想让你的公司跳过整个欧洲市场，随时等着为你的服务付钱，这是非常重要的。

我们使用 [Aiven.io](https://aiven.io) 作为我们的托管数据库服务，他们在合规文档(【https://aiven.io/security-compliance】)和关于安全、存储和备份程序的详细信息日志(【https://help.aiven.io/security/cloud-security-overview】)上都有非常详细的信息。

## [](#service-accounts-and-rolebased-authorization)服务账户和基于角色的授权

总是为使用它的每个系统的数据库创建一个服务帐户/用户。如果您只有一个读取和写入数据库的应用程序，请为该应用程序创建一个到您的特定数据库的用户。

是否有一些外部或第三方报告工具，只从您的数据库中读取信息用于仪表板或商业智能？继续在数据库上为该用户创建一个只读服务帐户。

底线，就像任何其他帐户一样:**永远不要在多个用户或服务之间共享一个帐户**。

## [](#backup-snapshots-and-pointintime-recovery)备份快照和时间点恢复

没有自动备份的数据库不能称之为真正的托管数据库服务。确保您的数据库提供商提供自动备份快照，并且它们还支持时间点恢复。使用时间点恢复方法，您可以快速将数据库恢复到几个小时前的状态，而不会丢失太多最近的数据。

幸运的是，我从来都不需要它，但是我现在输入这个肯定是搬起石头砸自己的脚。

## [](#have-offvendor-backups)有供应商外备份

是的，备份很棒。但是，如果您的供应商破产了，或者由于某种法律诉讼，需要停止他们提供的任何活动服务，该怎么办呢？出于这些原因，请始终将数据库快照导出到第三方位置，并在那里保存 14 到 30 天。如果您的供应商因为某种原因被扫地出门，您至少可以通过这种方式向不同的供应商启动恢复程序。

现在，让我们确保攻击者不能对数据做任何事情，以防数据以某种方式被盗。

## [](#encryptionatrest)静态加密

确保实时数据和备份是必须的。这是一个很好的安全措施，可以防止一生中只发生一次的情况，即某人**确实**未经许可访问硬盘并将其从服务器中取出。但这也只是一些实际的东西:如果你想向企业和公司出售软件，这只是一个重要的安全需求。

加密“静态”数据非常重要。但是在传输过程中对其进行加密更为重要。翻到下一段。

## [](#sslmode-enabled-by-default)SSLmode 默认启用

所有重要的数据库(如 PostgreSQL 或 Redis)都允许您通过 SSL 连接到它们。如果您的托管提供程序不支持此功能。快跑吧。对传输中的数据进行加密是保证您的数据安全，防止他人窥探您客户的数据的必要手段。

但是，不要认为仅仅使用数据库连接的 SSLmode 就已经完成了！如果您不配置下一段中的内容，就会发生糟糕的事情。

## [](#configure-ssl-certificate-pinning)配置 SSL 证书锁定

大多数托管数据库服务器都会生成一个自签名证书来保护与数据库的连接。如果我们的应用程序不验证他们正在对话的数据库是否确实是他们**想要**对话的数据库，SSL 加密就没什么用了。

您需要确保您的应用程序将**仅使用与它们期望的**完全相同的 SSL 证书连接到数据库服务。如果您的应用程序允许使用 SSL 证书连接到任何数据库服务，您就会被“中间人”抓住。利用这种技术(以及您的网络中/周围的一些额外的攻击),有人可以欺骗数据库服务并收集它需要的所有连接信息。当这种情况发生时，如果您没有应用下一个也是最后一个安全措施，那么“中间人”实际上可以访问您的整个数据库。

## [](#private-networkingfirewallip-whitelisting)专用网络/防火墙/IP 白名单

最后但同样重要的是:确保我们的托管数据库服务允许某种网络约束。这可以是一个私有网络，其中数据库与应用程序服务器位于同一个(虚拟)网络中。或者，如果通过公共互联网访问服务，它可以是一个真正的带有 IP 白名单的公共防火墙。

* * *

暂时就这样吧！希望你喜欢这篇文章，并且这个“清单”对你的日常工作有所帮助。或者它让你意识到你在某个地方有安全漏洞。没什么大不了的！只要平静地填满这个洞，你就可以再次睡个好觉了。