# 这是 6 个代理

> 原文:[https://dev.to/gugadev/es6-proxies-en-prctica-4heb](https://dev.to/gugadev/es6-proxies-en-prctica-4heb)

随着 ECMAScript 2015 (aka ES6)的出现，出现了一股特征的雪崩；有些人已经被要求大声尖叫，有些人感到惊讶，就像很久以后你遇到一个老朋友一样。

上述最后一组的特点之一是与*元编程*有关的特点。是吗？今天我不是很健谈，所以让我们去找我们无可挑剔的朋友*【维基百科】。*

 *> 元程序设计是指编写程序，将其他程序(或自己)作为数据写入或处理，或在编译时将其作为工作的一部分，否则将在运行时完成。这使程序员可以节省代码生成时间。

我们可以把*元编程理解为一个程序在编译时和运行时操纵他人或自己的能力。这种功能几乎从一开始就添加到编程语言中，现在我们也可以通过 web 条幅语言 JavaScript 使用。*

JavaScript 中的*元编程*基于两个特征:**代理**和**反射 API** 。在本出版物中，我们将讨论第一个问题。

## [](#proxy)代理

Proxy 是一个新的 API，允许我们在运行时截取、修改和扩展对象。就这么简单：通过这个 API，我们可以执行以下操作:

*   效能分析与除错日志。
*   截获对属性的调用。
*   Validaciones *“在运行中”*。

还有很多其他的。

Proxy 是一个构造函数，它接受两个参数:源对象，即充当源对象处理程序的对象。后者包含称为陷阱的方法。

Un *Trap* 是一种* *改变*对象某部分行为的方法*。例如，陷阱`get`和`set`分别截取属性调用以获取和设置值，可以在此过程之前和期间放置逻辑。

> 你可以在这里看到完整的清单。

为了更好地了解代理的用处，让我们做些小练习。

* * *

### [](#ejemplo-loggingprofiling)Ejemplo:日志记录/分析

我们还 17 岁，正处在青少年时期的花朵中，~~在学习和体验新生活的时代，倡导性、香烟和酒精~~。我们即将满 18 岁，我们希望我们的节目在满 18 岁时自动向我们表示祝贺为此，我们可以使用代理。

[https://codesandbox.io/embed/103rpp07l4](https://codesandbox.io/embed/103rpp07l4)

我们不仅可以做日志，正如我一开始所说，我们可以做到语言限制我们的程度。在这里，我们可以根据年龄进行验证，例如，如果从 100 岁增加到 100 岁，会给我们带来错误:

```
if (value < 13 && value > 99) {
  throw new Error('La edad debe ser entre 13 y 99')
} else {
  Reflect.set(target, property, value)
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#ejemplo-acceso-seguro-a-propiedades)例:安全获取财产

[https://codesandbox.io/embed/znpq440r23](https://codesandbox.io/embed/znpq440r23)

### [](#ejemplo-query-array)示例:查询数组

我们已经看到了一个例子，其中陷阱`get`和`set`是最常用的。为了加强，我们再进一步，使用嵌套代理。本练习将尝试将常规数组转换为一个*【可查询】*，以便使用 SQL 经典**等有用的运算符。**

 **为此，我们需要两个输入参数:

*   `collection`:我们将要扩展的对象数组。
*   `groupKeys`表示要分组的属性(名称、类别、价格等)的字符串数组。）

[https://codesandbox.io/embed/j322xkqm89](https://codesandbox.io/embed/j322xkqm89)

* * *

## 结论

代理可能不是中最常用的功能之一，但它与 Reflect API 一起无疑是最重要和最有趣的功能之一。它的灵活性使我们能够在多种情况下采用它，而且最好的是，它易于实施。***