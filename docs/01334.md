# 带 ng-packar 的角度库

> 原文:[https://dev . to/nishugoel/angular-library-with-ng-packar-1o5c](https://dev.to/nishugoel/angular-library-with-ng-packagr-1o5c)

注意:这篇文章与 Angular 的早期版本相关，在版本 7 和更高版本中，我们可以使用命令 ng generate library 在 Angular 中创建一个库。关于这一点的更多信息，请参考这里的文档:[https://next.angular.io/guide/creating-libraries](https://next.angular.io/guide/creating-libraries)
当你有一个由三个或更多组件组成的小应用程序时，当涉及到通过组件通信共享数据时，它们之间并不共享关系。对于这样的组件，我们已经看到了服务的使用。当我们必须在多个组件中使用相同的数据时，服务就变得非常有用。然后通过依赖注入在组件内部使用这些数据。
这是指我们在一个包含服务的模块中包含组件。但是，如果我们希望在多个模块中使用来自服务的数据，更好的办法是将这些数据放在服务内部的某个地方，这样您就可以将数据导入到您希望的任何模块和组件中。
现在，这是关于一个应用程序，如果你希望最大的应用程序使用相同的数据，并且你肯定不想为你的每个应用程序复制粘贴代码，该怎么办。此外，您不希望任何应用程序相互通信，而是希望所有应用程序共享来自外部源的一些数据。
这就是库和包出现的原因。在这篇博文中，我们将看到如何创建一个 Angular 库，以及创建一个 Angular 库的要求是什么。在研究更多关于 Angular libraries 的内容时，我看到了朱里·斯特鲁普弗洛纳的精彩演讲《像专业人士一样创建和发布 Angular libs 》,他在演讲中解释了使用这张图片创建库的必要性。它解释了我们的应用程序如何由不同的 javascript 文件和其他外部库和工具组成，以及它们是如何组装在一起的。
首先，让我们看看创建库时需要考虑的要点。
一个库应该是:
分布式
平台无关
捆绑
支持提前编译
工作，用 TypeScript 做类型检查、自动完成等。

所有这些需求一起构成了一个完美的 Angular 库，它提出了一个名为 Angular Package format 的解决方案来支持构建 Angular 库。这种格式是构建 Angular 库和分发包的推荐方式。使用这种格式构建的库将由 Angular 应用程序、节点包和 npm 正确处理。这是 Angular 团队用来分发包的一套指导方针，如果我们在开发 Angular 库时遵循这些指导方针，我们就处于安全的一方，因为我们的库受到 ng 生态系统中使用的许多工具的支持，包可以很容易地与这些工具集成。它还具有优化的包大小和构建时间，这些都是非常重要的因素。
生成 Angular 库的步骤
由于该库应该一次性打包，第一步应该是内联所有外部模板。
下一步是用 ngc 编译器编译它，NGC 编译器是 tsc 的一种包装器。ngc 将从类型脚本文件中生成 javascript 文件，并通过为这个库创建元数据来生成 d.ts 文件以进行提前编译。
打造不同的 ESM2015，UMD 格式。

我们可以使用 ng-packar 开发库，这是 nom 和 Github 上的一个项目。这些库可以放入 Angular 包格式中。这些库为我们创建了所有的包。它由不同的模块加载器使用，自己内联模板，创建类型定义(. d.ts 文件)
使用 npm 安装 ng-packar，这样就可以从命令行全局使用它，

在这里阅读更多:[https://medium . com/@ nishu 0505/angular-library-with-ng-packgr-13 f 20 ed 202 BD](https://medium.com/@nishu0505/angular-library-with-ng-packagr-13f20ed202bd)