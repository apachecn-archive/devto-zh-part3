# 面向非程序员的 DSL 是一个骗局

> 原文:[https://dev . to/arturmartsinkovskyi/dsls-for-non-programmers-are-a-hock-3m 47](https://dev.to/arturmartsinkovskyi/dsls-for-non-programmers-are-a-hoax-3m47)

# [](#the-bright-future)光明的未来

在软件工程中，总是有自动化和通用性的想法，这将导致该领域的工作主体被提升到这样的环境中，在该环境中，不知道特定领域的来龙去脉的人会降低执行任务和轻松实现所需功能的结构和基础。相信一根万能的魔杖能够让这个领域的大多数专业人士变得过时。可视化编程、代码生成——有许多风格迷惑了该领域每一代新的程序员和主管。每次失败都是有原因的——领域是复杂的，软件工程也是如此。任何简化和受约束的过程，如果不需要实际编写就能神奇地让你创建软件，当功能的复杂性增加，细节从业务团队模糊的头脑中浮现出来时，迟早会发现它是低效和不合适的。

# [](#kings-in-their-domain)君王在自己的领地上

另一个似乎与之前所说的大相径庭的想法是领域特定语言的概念。领域特定语言是通用语言的扩展，或者是一种全新的独立语言，存在于特定领域的上下文中，试图模拟该领域中使用的结构、概念和词汇，以便让人们以高度抽象的方式编写代码，忽略技术细节，专注于重要的主题和实际功能。听起来很棒，是吗？程序员根据需要扩展 DSL，业务团队编写自己的代码，并按照开发团队编写需求的方式配置程序，一切都开发得更快，更符合实际意图，每个人都很高兴，世界变得越来越好。

# 【A-Z】* L 在野外

就像任何银弹一样，这个理论看起来很神奇，但在实践中却完全是胡扯。为什么这样还记得 SQL 吗？[实际上](https://dl.acm.org/citation.cfm?doid=800296.811515)它是为非程序员设计的，比如工程师、会计师或建筑师(不是软件人员)。

> 然而，也有一大类用户，虽然他们不是计算机专家，但他们愿意学习用一种相当高级的非过程化的查询语言与计算机交互。这类用户的例子有会计师、工程师、建筑师和城市规划者。SEQUEL 就是为这类用户设计的...

上次我有一个业务分析师想写 SQL，他被一个连接绊倒了，让我来做这项工作。SQL 被广泛使用，但是对于不是程序员的人来说，它并不那么好用。HTML 和 XML 最初也是为非程序员设计的——它们现在在哪里？他们有时被业余爱好者或爱好者使用，但是大多数时候程序员做这项工作。

# [](#domain-specific-madness)域特定的疯狂

这些是由委员会开发、思考和研究的现有语言，或多或少是通用的。它们没有在商业人士和其他职业中广泛流行，因为它们需要用户的一些关注、学习和理解才能有效。最后，当重要的事情发生时，雇佣真正了解自己在做什么的人总是更好的选择。从某种意义上说，他们成功了。但是，每隔一段时间，执行官、CTO 或其他处于半技术/半管理职位的人就会有一个绝妙的想法，为项目的业务流程编写自己的 DSL。让我们开始吧，伙计们，写一种语言，这样每个人都可以更容易地在这个项目上工作。他们选择 Ruby、Python、某种风格的 LISP 或 JVM 系列，并开始编写看起来必须与该领域的标准英语相似的代码。业务人员开始使用它，处理大量关于不匹配、愚蠢的东西和文档不足的投诉。程序员修复并扩展 DSL，但是抽象开始泄露一些关键情况和重要的技术细节。越来越多的工作和实际的领域代码编写是由程序员完成的，项目以团队内部开发的另一个轮子结束，这个轮子并没有被业务真正使用，但是程序员必须为它编写代码，因为代码库已经足够大了，重写将需要很长时间。

为什么会这样呢？有多重原因。商业是复杂的，领域时不时会发生变化。领域特定语言旨在表示领域的主体，为了同步，它需要像真实世界中的对应物一样频繁地变化。它覆盖了编写方便使用的流畅界面的需求，这使得任务更加困难。实际的语言是由不太了解领域的人编写的——软件工程师。会有遗漏重大细节，措辞不当，各种理解上的问题。这种语言的用户是商务人士，而不是软件工程师，所以当现有的语言不足以满足某些功能时，它将不可避免地导致另一种语言的扩展和对代码库的更多更改，这可能会导致它自己的错误。领域语言是受约束的，而思想则不受约束。不幸的是，退化和腐烂是内在的，所以迟早支持成本和由一千个扩展创建的怪物蜿蜒开始超过 DSL 表面上的好处。

# [](#not-all-dsls)并非所有 DSL

经过这一切，你可能会认为我认为 DSL 是一个完全糟糕的想法。我不知道。我不喜欢它们，只有当它们被开发来显示一些业务领域或者被交给普通用户，非程序员的时候。如果它是为程序员或不经常改变的领域开发的，那就再好不过了。有 AWK、RSpec、EJS、Emacs Lisp、bash scripts 和许多其他很酷的软件，因为它们的领域很稳定，并且被专业人士使用。

我讨厌小黄瓜，黄瓜和其他让你写出“像英语一样读”的测试的 DSL，但那是另一个故事的内容。