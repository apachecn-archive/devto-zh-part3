# 测试驱动开发的三起三落

> 原文：<https://dev.to/mikefreedman12/3-ups-and-3-downs-of-test-driven-development-7ka>

下面是我喜欢测试驱动开发的三个优点和三个烦恼。我试图避免任何与单元测试相关的好处或烦恼。我们都知道有很多这样的例子。这里的优点和缺点都与遵循 TDD 的严格指导方针有关。

## **3 个不间断电源**

### 它去掉了“我如何开始”的决定

有时，当给你一个项目或特性要开发时，你不知道从哪里开始最好。通过遵循测试驱动的开发，您需要做的决定就少了一个。你的任务是写一个测试，而不是整个软件。仅仅通过遵循这个原则，我们已经把我们的软件分成了可管理的块。

编写一个测试，然后编写另一个测试。然后另一个。

### 让我们考虑如何使用它，而不是它应该如何工作

我相信我们每个人在某个时候都会遇到这种情况。我们构建了一个功能，它可以处理我们要求它做的所有事情，但是剩下的有点难看。我们只剩下一个方法签名，它只接受少量的对象，而忽略了许多实现细节。

这是可以避免的。它从假装开始，好像每次你写一个函数，它都会神奇地做它所描述的事情。这个函数看起来像什么？当你以这种方式开始时，你只会在必要的时候增加复杂性。

TDD 通过首先从调用代码开始来驱动这个过程。

### 它防止你的项目离开你

我们都这样做。我们编写产品代码，并习惯于这种模式。我们不想通过切换上下文来编写调用代码，从而打断我们的思路。我们向自己保证，我们会记得回头写一些测试，以确保代码正常工作。

TDD 的规则是防止你在测试之前写太多代码。它实际上阻止你在测试之前写任何代码。当你写了太多代码时，你很少会记得所有你认为需要写的测试。

## **3 次下降**

### 坚持“最简单可行的方法”

遵循 TDD 的规则需要编写代码来做最简单的事情。这是一个很难遵循的原则。可能有效的最简单的事情通常是故意添加你知道从长远来看不会有效的代码。它经常给你带来麻烦，因为发现你刚刚犯的错误的唯一方法是确保你有足够的测试，但是你什么时候能确定呢？

这需要思考“我知道通过的测试是错误的，我需要提出一个新的测试来证明它是错误的”。你在这里的发展过程中处于一个尴尬的状态。如果你从你的工作中休息一秒钟，你会记得你做了最简单的事情可能是故意的吗？

我明白这个规则，它是为了防止你的思想超前。它可以防止您跳过步骤。然而，添加 bug 以便以后可以消灭并删除它们是一个有点冒险的过程。

### 快速运行测试的假设

当你碰巧开始一个绿地项目时，你并不经常开始使用 TDD。更常见的是，你知道这种做法有众所周知的好处，并希望将其应用到你当前的工作中。

这里困难的部分是将 TDD 应用到不适合单元测试的代码中。即使您正在编写新的功能，您也可能依赖于依赖于数据库或 web 服务调用的库，而您对此无能为力。

这一点很容易被忽视，TDD 的支持者认为红绿重构是一个快速反馈循环。如果您受制于不适合经常运行的遗留代码，您的效率可能会受到影响。

### 可测试的代码总是更干净吗？

当遵循 TDD 时，测试规定了 API。这避免了编写新的功能，然后在事后尝试创建一个测试。普遍的看法是，可测试的代码是高质量的代码，所以按照这种顺序开发的限制会产生设计良好的软件。

这往往会让位于许多注入的依赖性。这通常是一个好的实践，但是绝对的需求会导致软件不可维护。很多时候你不得不说服自己“最终会更干净”，但事实总是如此吗？

我们也知道，作为开发人员，我们并不完美。我们将会走上 TDD 无法纠正的弯路。就像故意添加错误的代码一样，当我们知道有些事情感觉不对时，我们不应该盲目地继续下去。