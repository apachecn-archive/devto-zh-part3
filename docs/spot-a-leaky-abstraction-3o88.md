# 发现有漏洞的抽象

> 原文：<https://dev.to/stereobooster/spot-a-leaky-abstraction-3o88>

让我们玩一个游戏。谁会发现更多泄漏的抽象？我最近写了关于抽象的文章。概括地说，泄漏的抽象是暴露实现细节的抽象。

我将在关系数据库中开始索引。抽象包括关系代数(以 SQL 的形式)、实体关系图(作为建模的一种方式)、范式，对吗？你建模了你的数据库，得到了第三范式，你写了一些查询——一切正常；然后看起来有些查询很慢，你需要使用 EXPLAIN。可能会出现查询分析器的实现不理想的情况，您需要稍微调整一下您的查询以使其令人满意，或者您需要添加索引(您可以在不了解它是什么和它如何工作的情况下这样做——一些魔法使您的选择更快，插入更慢)。好的。然后你需要实现文本搜索，你有索引，你使用`LIKE "abc%"`，它工作很快，但是`LIKE "%abc%"`很慢？还有你的反应 WTF。您开始阅读，似乎索引是 btree 数据结构(通常用于字符串列)，因此您可以从上到下快速遍历树，例如优化文本搜索“开始于”，但不是“包含”。在这一点上，实现是公开的，我需要理解它是如何实现的，以理解它为什么以这种方式工作。幸运的是，我不需要理解它是如何处理并发性或如何与文件系统一起工作的，所以它并不是那么糟糕。

不要将泄漏的抽象与错误的抽象混淆。重述错误的抽象，当你不能精确地用抽象的术语陈述你的问题时，这意味着抽象不适合，它是用不同的用例编写的，或者它已经过时，或者需求已经改变，等等。例如，SQL 不适合存储图(可行的)和遍历图(真的很糟糕的想法)，SQL 只是这个任务的错误抽象。使用图形数据库，像 Neo4j 使用 Gremlin 或 Graphit 代替 SQL。

轮到你了。每个评论举一个例子。使用开源项目或公开可用的东西作为例子。

> 照片由 Unsplash 上的 Nine Kö pfer 拍摄