# REST API 设计的另一个良好实践列表

> 原文：<https://dev.to/jmir17/yet-another-list-of-good-practices-for-rest-api-design-4nk6>

*REST API:可以公开数据或逻辑的 web 服务，由一系列端点组成*

这里是我的技巧汇编，帮助我设计成功的 API 来公开 web 服务。这不是我发明的，我在工作的时候从互联网上不同的资源收集了所有的信息，所以这是我微薄的贡献:

提示 1:很好地记录你的 API
只要你在构建一个别人会与之交互的东西，你就应该非常谨慎地编写使用说明。相信我，写一份适当的文档比用你的电子邮件或电话作为帮助台要好。有一些非常酷的工具可以做到这一点。

技巧 2:修改你的 API
第一次你因为改变了 API 的行为而破坏了别人的应用程序，也许什么都不会发生。但是第二次，那个家伙可能会查找你住在哪里或者你在哪里工作…为了避免这些风险，适当地版本化你的 api，这样，一个端点中的功能变化可以在不同的版本中共存。当您更改了 api，并且有两个功能相同但行为不同的端点时，避免奇怪的端点名称也是一个很好的做法。

有不同的方法来解决这个问题，一种是将版本添加到路径中，就像:

`yourdomain.com/api/v1/bikes`
T1】

或者在请求中使用报头:

`GET /user/1 HTTP/1.1`
`Host: myapplication.com`
`Accept: application/json`

**提示 3:使用自我解释端点**
当然，这不是最简单的一种，但这一点需要考虑一些因素:

3.1: 只用复数名词，不要用动词

`/cars`
T1】

使用相应的 http 动词来定义动作

`POST /cars - to create new cars`
`PUT /cars/32 - to update the data form car #32`
T2】

**3.3:** 使用子资源访问相关数据，但避免超过 3 层

`POST /parkings/556/cars - to add cars to the parking #556`
T1】

**3.4:** 为查询提供过滤、排序和分页(需要时)

`/cars?color=red&doors=3&fields=price,mileage&sort=-postedDate,+mileage&limit=10&offset=40`

提示 4:回复时要有礼貌
永远不要回复纯文本，并正确设置标题，这是最起码的。为了更好地理解，请在所有响应中使用 http 状态代码。同样，如果你在所有的回答中保持一致，并且在所有的端点上使用相同的格式，这将会对你有很大的帮助。

提示 5:返回有意义的错误
在错误回复中也要有礼貌，不要在这些困难的时刻抛弃你的用户。解释和详述发生的事情，最重要的是帮助用户从他们自己的错误中恢复过来。

`{`
`status: 400,`
`httpMessage: Bad Request,`
`apiStatusCode: 215,`
`message: Zip code format is not valid, it must be a 5 digit number,`

`}`

技巧 6:使用无状态认证
API 中的认证和授权应该在请求本身中得到保证。它不应该依赖于任何其他先前的请求。为此，你可以使用 JWT 或 OAuth2，或者至少模仿他们的行为。

技巧 7:你听说过 HATEOAS 吗？
老实说，不太喜欢。当我不需要时，我不想执行额外的请求或接收额外的东西。但是我会考虑在 alter requests (POST，PUT 和 PATCH)的响应中返回一个 url 链接。例如，位置标题可用于此目的:

`HTTP/1.1 201 Created`
`...`
`Content-Length: 0`
`Location: /api/v1/cars/412`
T4】

**提示 8:使用缓存并设置限制**
您不想承受新循环函数的后果，您的一个客户刚刚在比您的更大、更强大的云基础架构中实现并部署了该函数。这只是一个例子，但是您必须处理并准备好 api 的意外使用。

**青铜提示:准备端到端测试**
找到您系统的不同用例，并复制用户可能执行的所有步骤和调用。不仅要分析响应内容，还要检查性能、安全性、可靠性等。

**银提示:监控一切**
不仅要测量服务器上 CPU 或 RAM 的使用情况，还要测量响应时间、每个端点的请求量、执行这些请求的时间、数据库负载……所有这些跟踪和日志将有助于您在未来提高 api 的性能，还可以防止和检测异常，甚至修复错误。

**黄金提示:设计**
时要用常识不要对其他开发者不尊重，想象一下你将要成为自己 api 的消费者。你能不能不准备好用的？API 是开发者的 UI，一个好的设计者应该提供一个尽可能清晰和简单的界面，保持所有服务的稳定性和一致性。