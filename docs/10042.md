# 为什么使用基础设施作为代码

> 原文：<https://dev.to/klauenboesch/why-use-infrastructure-as-a-code-3793>

我相信基础设施即代码(也称为 IaaC)将成为未来基础设施管理的一个核心方面。在本文中，我将概述 IaaC 的一些优点和缺点。

#### **IaaC 的优势**

首先，我认为与任务本身不同步的文档往往会过时并被忽略。如果您的工作需要您记录 wiki 页面(或类似页面)中的更改，您可能很容易忘记跟踪该更改。这导致有效实施和假定实施之间的差异，从而导致服务失败、安全性或合规性问题。

第二，我相信自动化。常规任务的自动化使得执行这些任务更容易、更安全、更有弹性。自动化需要所需输出的结构化定义，通过使用 IaaC，输出以某种形式的代码定义。自动化使得比较期望状态和有效状态变得更加容易，通常计算机比人类更容易出错。

第三，我相信灾难恢复。如果一个人从未尝试过恢复备份，那么备份是没有用的。这同样适用于基础设施。知道一个全新的和最新的基础设施只是点击一下，人们可以有一个灾难恢复到位，没有额外的成本。

但是也有一些反对 IaaC 的理由。

#### **IaaC 的弊端**

第一点很明显:一种尺寸不能适合所有人。拥有一个异构的 IT 环境，可能没有适合所有用途和硬件集的工具。大多数 IaaC 工具集倾向于只支持“云”,所以不将应用程序放在云中可能会打破将 IaaC 用于所有事情的想法。

其次，合并现有流程并不容易。假设您的所有应用程序都已经在云中，那么从您的提供商那里提取信息并生成 IaaC 所需的源代码是几乎所有工具集都可以为您做的事情。没有一个工具集能够轻松地适应已建立的过程和程序。他们不仅可能需要一些调整，而且肯定需要。自动化一个复杂的过程并不容易。

#### **供应商**

IaaC 有几个提供者和工具集。我们 Global Elements 相信 IaaC 最早的供应商之一 Terraform 的实力。使用 Terraform，您可以用与 JSON 非常接近的领域特定语言编写代码。

像几乎所有的 IaaC 提供商一样，Terraform 使用一种叫做“状态”的东西。状态描述了基础结构定义的最后应用版本。它用于比较最新应用状态、期望状态和有效状态。这允许通过向基础设施应用期望的状态来确保检测到(然后覆盖)手动更改。使用此过程，手动更改会被自动覆盖。这要求工程师总是对地形定义进行修改。

Terraform 支持几乎所有知名的云提供商，包括亚马逊、微软、谷歌、Cloudflare、DigitalOcean 和[更多的](https://www.terraform.io/docs/providers/)。

#### 总结

通过使用 Infrastructre-as-a-Code，您将获得当前基础架构的结构化和自动记录的定义。您可以通过将所需状态应用到当前状态来检测(并覆盖)手动更改。通过这个过程，您将确保每个人都被迫使用已定义的 IaaC 工具集。IaaC 并不是什么新东西，但它仍然没有被广泛采用。拥有混合基础设施有一些缺点，但是 IaaC 工具集提供了更多的优点。