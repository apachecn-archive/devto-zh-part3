# 数字丝绸之路的多云？

> 原文:[https://dev . to/solace devs/multi-cloud for-the-digital-silk-road-29fh](https://dev.to/solacedevs/multi-cloud-for-the-digital-silk-road-29fh)

[![](../Images/b90af3fd7494da4d185fe3b9b13fdb8c.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--k8FtalOn--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2ASPuVm1u4Gq8O6Q3HtSUxug.png) 

<figcaption>数字丝绸之路地图:伦敦到北京与阿里巴巴、腾讯、华为的云互联</figcaption>

对于在 mainland China 做生意的西方公司来说，当你不得不应对限制或减缓跨境互联网连接的“中国防火长城”时，数字连接可能是一个巨大的挑战。

多重云解决方案有帮助吗？我决定调查一下…

### [](#gt-what-is-the-digital-silk-road)>什么是数字丝绸之路？

丝绸之路是一个连接东西方的古代贸易路线网络，可以追溯到公元前 114 年。然而，最近丝绸之路一词被重新使用，代表中国政府为加强国际贸易和互联互通而实施的大规模[8000 亿美元](https://www.bloomberg.com/news/articles/2018-10-24/how-to-travel-the-new-800-billion-silk-road)外国投资计划。

在这个整体计划中，*数字* *丝绸之路*是一个[2000 亿美元](https://www.sciencefocus.com/future-technology/the-digital-silk-road-chinas-200-billion-project/)的大范围项目，专注于[数字方面](https://www.economist.com/china/2018/05/31/china-talks-of-building-a-digital-silk-road)，如新的海底互联网电缆、人工智能、量子计算甚至替代卫星导航系统的进步。

### [](#gt-the-connectivity-challenge)>连通性挑战

尽管所有这些投资都是为了促进和改善国际贸易，但影响所有跨境互联网连接的**'****'**中国长城防火墙仍然牢牢地留在原地。这种防火墙能够审查和阻止某些流量或内容，其净效果是严重减缓所有进出 mainland China 的数据流。

(作为一名 2017 年去北京的游客，我不得不忍受我妻子对她社交媒体访问缓慢的不断沮丧！)

[![](../Images/331ec2170b7a7fd89c57c17941b65787.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--sOUgQy35--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AQLMaED75XHc5vAStq2yyqA.jpeg) 

<figcaption>在中国长城(慕田峪)的一个了望塔上的照片</figcaption>

现在想象一家假设的西方公司希望在中国做生意。比方说，一家欧洲智能联网汽车制造商正在繁忙的北京道路上行驶。为了支持该车辆中的数字服务和应用程序，it 需要与部署在现有内部数据中心的应用程序和服务建立健康的双向连接。一种假设的服务是你的车辆能够重新安排你的旅程，以避免前方发生已知的事故。诸如事故地点和车辆实时位置等信息需要及时处理才能有效。

[![](../Images/4b8cee7f4f18e66ff9355707f8a359c2.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--AdHCzjuQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/640/1%2A7S0XE7hDRcLUBIxa4hNJTg.jpeg) 

<figcaption>具有智能互联服务的车辆</figcaption>

其中一些数字服务可能是由亚洲附近的区域“中枢”数据中心提供的，而另一些则是由更靠近公司总部的欧洲数据中心提供的。

为了有效地向联网汽车提供响应服务，需要在中国建立数字存在——作为到达内部数据中心的第一站。

### [](#gt-enter-alibaba-tencent-and-huawei-clouds)>进入阿里巴巴、腾讯、华为云

正如亚马逊 AWS、微软 Azure 和谷歌是西方公共云服务的主导者一样，对于中国，你可以考虑[阿里巴巴](https://www.alibabacloud.com/)、[腾讯](https://intl.cloud.tencent.com/)和[华为](https://intl.huaweicloud.com/)也是如此。

由于他们每个人都在许多国际城市维护数据中心(或“云区域”)，为外国公司进入 mainland China 提供数字接入服务是一个“唾手可得”的用例。

阿里巴巴和腾讯是最大的两家公司，它们组成了一个双头垄断的局面，陷入了对整体主导地位的持续争夺:

> “忘了谷歌对脸书吧。忘了优步对 Lyft 吧。忘了亚马逊对…好吧，每个人。科技界最激烈的霸权争夺战正在中国展开。” *—* [纽约时报](https://www.nytimes.com/2018/05/31/technology/china-tencent-alibaba.html)

我在这里关注的是从伦敦到北京的连接，阿里云实际上比腾讯略胜一筹。阿里云在中国以外有 11 个地区，而腾讯有 10 个。更重要的是，欧洲最近的云区域对阿里巴巴来说也在伦敦，对腾讯来说在法兰克福，对华为来说在巴黎。

[![](../Images/e7ebf24e5f71d8a364ad761c60509282.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--itisv5A4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/706/1%2AoLXtRaoiaJ_QTp_Z6oGhxQ.png) 

<figcaption>阿里巴巴、腾讯和华为的国际“云区域”可用性汇总</figcaption>

(当阿里巴巴在 2018 年底推出他们的伦敦地区时，我对他们与 AWS、Azure 和谷歌的对比进行了分析。你可以在这里找到:[阿里云——数据驱动的分析](https://dev.to/solacedevs/alibaba-cloud-a-data-driven-analysis-1eeb-temp-slug-7316379)。)

### [](#gt-the-investigation-parameters)>调查参数

在研究这一问题的过程中，我对以下项目感兴趣:

#### [](#1-what-exactly-does-slow-connectivity-mean)1。“慢”连接到底是什么意思？

这将通过使用流行的通信模式([请求-响应](https://en.wikipedia.org/wiki/Request%E2%80%93response))模拟简单的应用程序交互来量化，该模式在部署于我们伦敦“内部”数据中心和北京“云”数据中心的一对服务之间延伸。

这将每隔 5 秒钟进行一次，以建立一个长期图，显示完成这些交互的完整“往返”需要多长时间。即应用层连接的**延迟**。

[![](../Images/254afb1003f8d58c0e19ce4aed10156d.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--wtPkMznC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/975/1%2AEL35v8IvkXrFome58dwYpQ.png) 

<figcaption>在伦敦和北京部署的 Solace PubSub+活动经纪人促成的请求-响应交互</figcaption>

此外，借助用于这种连接的多云“[事件网格](https://solace.com/what-is-an-event-mesh/)”架构，北京的“响应”服务可以在三家云提供商的每个北京云“区域”中一式三份部署在**。这将具有在三者之间并行“比赛”交互的效果，因此我们还可以评估当时哪个提供了最快的连接，并确定该比赛中的到达排名。**

[![](../Images/bfd0d77fc46057204bf622cb7f8ec222.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--1F_vkIIw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AEWKFUUpuTtDOvd9NQSD0xw.png) 

<figcaption>应用程序一式三份地部署在一个多云事件网格中的阿里巴巴、腾讯和华为云上。</figcaption>

#### [](#2-does-an-indirect-connectivity-via-the-cloud-provider-add-value)2。通过云提供商的间接连接是否增加了价值？

我们可以通过两种不同的方式将伦敦的应用程序与北京的应用程序连接起来:

1.  第一种是从我们的伦敦本地网络到北京云提供商网络的**直接**连接。
2.  第二种是**间接**路径，首先在云提供商的“欧洲”地区增加一个额外的中间中继站，然后继续连接到他们的北京地区。

[![](../Images/1250aaa6afab44505287c8699f899b7e.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--HwCB9vpI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2ABHf2217MfowG_ugcrYqOSQ.png) 

<figcaption>伦敦至北京的直接与间接事件网状连接架构</figcaption>

打个飞机的比方，这里的选择要么是直飞北京，要么是先在欧洲转机。

与直觉相反，额外的一跳实际上可能有助于减少整体通信的延迟，并提供更可预测的服务。这一跳不是直接被视为跨境互联网流量，而是通过一条不同的、更优化的路径将流量导向跨境。

事件网格的架构现在有了新的维度。除了在三家云提供商之间提供竞争性服务部署，我们还可以在每家提供商的两条连接路径上展开竞争。

#### [](#3-do-increases-in-latency-affect-all-6-traffic-paths-to-beijing-at-the-same-time)3。延迟增加会同时影响到通往北京的所有 6 条流量路径吗？

这一项是整个调查的关键。如果应对“防火长城”是与中国开展数字业务不可避免的一个方面，那么多云方法是否有助于防范(或“对冲”)它呢？

换句话说，如果一条连接路径和部署的服务突然变慢，另一条路径和服务会在同一时刻表现得更好吗？如果在减速期间路径之间没有相关性，特别敏感的企业可以选择运行“多路径”方法来连接到 mainland China。

### [](#gt-the-live-results)>现场结果

上述连续应用程序“请求-响应”交互的结果，以及具有多云和多路径的事件网状架构，可在以下现场演示中查看:

[**http://london.solace.com/multi-cloud/digital-silk-road.html**](http://london.solace.com/multi-cloud/digital-silk-road.html)

 **下面是以毫秒为单位的实际往返延迟的示例结果:

[![](../Images/d53377b37f25d78fe9e22ce8f107b817.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--CeOzac5n--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AofSQieP9qcDwGzri733pTA.png) 

<figcaption>示例结果显示腾讯云通过法兰克福作为到达北京的最低延迟路径。</figcaption>

[![](../Images/4f113d7d663ed958e2b85258c82a0fb7.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--a5ihJxId--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AMzACYYj1Q7kZG9g0QgV4aA.png) 

<figcaption>另一个示例结果显示阿里云通过其伦敦地区作为到达北京的最低延迟路径。</figcaption>

### [](#gt-the-findings)>调查结果

#### [](#1-even-snails-move-faster-than-this)1。连蜗牛都比这跑得快！

这项调查和现场演示建立在[早期工作](https://solace.com/blog/first-step-enabling-cloud-arbitrage/)的基础上，测量 AWS、Azure 和谷歌在英国、美国和新加坡的全球通信。在针对中国部署之后，延迟有时很高，打破了我的演示的图表逻辑！令人尴尬的是，高延迟暴露了一个很容易修复的逻辑错误，但这是一个很好的例子，说明了以前工作的应用程序在面对如此具有挑战性的连接环境时会以奇怪的方式失败。

应用程序的逻辑如下:

1.  发送一条请求消息，由 [PubSub+](https://solace.com/software/) 事件代理在多个路径和云提供商之间复制
2.  等待最多 5 秒钟，等待多个响应到达
3.  计算每个响应的延迟，并确定响应到达顺序的总体排序
4.  用新的请求消息重复

我没有预料到的是响应消息比晚了 **5 秒。从目前其他全球地区的经验来看，延迟很少突破 1 秒大关，更不用说 5 秒了。**

中国最快的反应大约是 160 毫秒。(不到五分之一秒。)然而，在上端，响应可能会在几十秒内**高出 100 倍**，例如下面的 14 秒示例:

[![](../Images/d2e6e4b905160b29afe6757451d3e2db.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--1UrpBRoi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AiF8J6YvMvYH3Y2xDnwaGaA.png) 

<figcaption>示例延迟结果在数十秒的范围内。</figcaption>

我们上周末刚刚举行了伦敦马拉松，所以我们将用它来帮助解释逻辑错误。由于延迟超过了 5 秒的测量窗口，其效果就像一名马拉松运动员在周末出发，但在第二个月的很晚才到达终点。此时，所有其他参与者都已离开，所以当他到达终点线时，只有他一个人在场。然后，当把他按先后顺序排列时，由于没有其他人在场，他似乎是“第一个”!

简单的解决办法也可以借鉴马拉松的类比。每场比赛都有一个“步行者”的反应，将永远存在。当决定最终排名时，如果你到达时步行者在场，你只能得到一个分配。

#### [](#2-dont-take-the-direct-flight)2。不要坐直达航班

一个看似一致的结果是，从伦敦“内部”直接连接到北京是迄今最慢的。

在下面的延迟图中，虚线代表**间接**连接，实线代表**直接**。

对阿里巴巴和腾讯来说，最佳连接路径是通过欧洲最近的云区域增加一跳。使用这种方法，延迟最多可降低**36%**。

[![](../Images/b7c87879e8568896594fe6ba33d91bc2.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--aXRZCBso--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2ApZqmGSn5dNycixhfBBKQsQ.png) 

<figcaption>直接模式与间接模式的延迟明显不同的结果示例。</figcaption>

请注意，对于华为来说，无法进行直接与间接的比较。虽然公共网站将巴黎列为他们的“弹性云服务器”的可用区域，但经过询问，我被告知该区域目前不完全可用。因此，演示保留了华为通过巴黎连接的占位符，如果它变得可用的话。

[![](../Images/609e002cd6215a9c0435f27fa4d6651a.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--i7quf-8g--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/726/1%2A5NAKztry-pvy6kWp0ZEbKA.png) 

<figcaption>华为云的“EU-巴黎”地区虽然列在他们的网站上，却不见踪影。</figcaption>

#### [](#3-its-yes-to-multicloud)3。这是对多重云的肯定

这里的主要发现是，虽然有一些连接速度变慢(延迟峰值)的情况在多个提供商之间完全一致，但在大多数情况下它们并不相关。也就是说，如果一家云提供商遇到高峰，其他提供商通常会表现良好。

华为和腾讯同时出现高延迟峰值的一个例子:

[![](../Images/16d638c0263c6d7171926c3bd54a072d.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Ahbnvhne--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AThpSweZ2GqFONVh2RgkIBg.png) 

<figcaption>两个不同提供商(阿里巴巴和华为)同时经历大延迟峰值的示例结果。</figcaption>

您可以查看这段 3 小时[回放](https://solace.com/blog/welcoming-replay/)延迟结果的记录，自己做出判断:

[https://player.vimeo.com/video/333463050](https://player.vimeo.com/video/333463050)

同样，您可以在这里查看直播结果并触发自己的重播窗口:[](http://london.solace.com/multi-cloud/digital-silk-road.html)

 **### [](#gt-next-steps)>下一步

这些是分享的初步调查结果，调查可以继续进行。当华为云的巴黎地区可用时，增加它是一个悬而未决的步骤。

一旦这一点到位，这三家公司将在更公平的基础上尝试云提供商提供的额外服务。主要是能够在云区域之间购买专用的低延迟带宽，以进一步提高性能和连接性。

同时，我希望你觉得这是一个有趣的阅读。请在下面的评论区分享你的想法。

请关注我，获取更多类似的内容。

如果你喜欢这篇文章，你可能也会喜欢这篇: [**通过 BBC 新闻分析比较机器学习**](https://dev.to/solacedevs/comparing-machine-learning-through-bbc-news-analysis-38fa)

[![](../Images/50bb7a3b2a0f3dcacb46d4c8f547f2a5.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--yKE3vQZa--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AJsbT0qAjS84l3iBcPIidTQ.png) 

<figcaption>文章图片为‘通过 BBC 新闻分析比较机器学习’</figcaption>

*最初发表于*[*【https://www.linkedin.com】*](https://www.linkedin.com/pulse/multi-cloud-digital-silk-road-jamil-ahmed/)*。*****