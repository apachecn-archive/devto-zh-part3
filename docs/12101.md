# 可伸缩性问题:增长系统的隐藏挑战

> 原文:[https://dev . to/vaidehijoshi/scalability-problems-hidden-challenges-of-growing-a-system-1f 68](https://dev.to/vaidehijoshi/scalability-problems-hidden-challenges-of-growing-a-system-1f68)

到目前为止，这一系列文章都集中在分布式系统背后的技术和 T2 概念上。我们还探索了在我们分发系统后如何保持系统有效运行，我们已经看到了系统可以增长的不同的[维度](https://dev.to/vaidehijoshi/scalability-growing-a-system-in-different-directions-485j)。

但是，一旦我们理解了为什么一个系统甚至需要扩展，一旦我们确定了我们的系统应该如何扩展，我们该如何去做呢？事实证明，正如系统可以扩展的维度不同，实际上也有不同的扩展方法。但是在考虑如何扩展一个系统的过程中，一些意想不到的、隐藏的问题可能会从地毯下露出它们的小脑袋(这很典型，对吧？).

扩展任何系统的麻烦在于，一旦我们真正开始扩展它，就不可避免地会遇到一些隐藏的复杂性。既然我们已经熟悉了可伸缩性可以帮助我们解决问题的情况，那么现在我们应该更深入地了解当我们真正开始伸缩时，我们可能必须考虑和处理的问题。在这个过程中，我们会发现这是一个需要考虑的复杂过程，在这个过程中会遇到一些困难！最终，在后面的文章中，我们会考虑这些问题的一些解决方案；但首先，让我们看看我们在处理什么。

#### [](#problems-with-scaling)缩放问题

在[之前的一篇文章](https://dev.to/vaidehijoshi/scalability-growing-a-system-in-different-directions-485j)中，我们了解到有三种主要的方法来衡量系统的可伸缩性，我们称之为可伸缩性的三个**维度**:*大小*可伸缩性、*地理*可伸缩性和*管理*可伸缩性。作为快速复习，这三个维度有效地确保了随着用户和资源数量的增长，随着资源之间的物理距离的增长，以及随着系统管理开销大小的变化，系统本身不会因此而变慢或降低性能。

然而，我们尚未深入了解的是，在尝试扩展系统时，这些维度可能会带来一些问题。每个系统都有自己的一套限制，当我们试图扩展它时，我们必须处理这些限制，但今天，我们将讨论两大限制:**集中化**和**同步通信**。

<figure>[![](../Images/7e7d42a72dd5157fb65238a81111b57f.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--n4v1XSno--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AdPDsAYuaMvl3X5I56nKvjA.jpeg) 

<figcaption>我们在尝试规模化时可能会面临的问题。</figcaption>

</figure>

如果我们回想一下我们对规模可伸缩系统的了解，我们会想起，随着用户或资源数量的增加，我们的系统需要能够处理这种涌入。但是如果我们的系统是 ***集中式*** ，或者位于/从一个单一的中心位置控制，那么我们会遇到一些问题。如果一个系统是集中式的，当试图使它的规模可伸缩时，它会有一些限制。_

类似地，如果我们的系统是一个使用同步通信的系统，我们在试图使我们的系统在地理上可伸缩时会遇到一些问题。

***同步通信*** 是节点或资源之间的一种通信类型；在这种情况下，每当一个节点向另一个节点请求某个东西时，它都会“阻塞”(这意味着它会等待，不做任何其他事情)，直到收到响应。我们中的许多人都处理过客户机-服务器模型形式的同步通信，其中,**客户机**是信息的“请求者”,并等待直到“被请求者”,或**服务器**对其做出响应。

我们还记得，地理上可扩展的系统是一个即使在用户和/或资源之间的距离增加时也能运行的系统；然而，如果一个系统依赖于同步通信，那么在试图确保该系统可以在地理上伸缩时，它可能会导致问题。

但是，确切地说，为什么当我们试图发展一个系统时，系统的这两个特征会在道路上造成如此多的颠簸呢？让我们更深入地了解一下在尝试扩展时集中化和同步通信会出现什么样的问题，以及是什么使它们难以处理。

#### [](#when-one-node-has-too-much-control)当一个节点拥有过多控制权时

集中式系统看起来可能是不同的东西:它可能是负责运行系统的单个服务器或机器，或者(更有可能)它是在同一物理位置(比如数据中心)聚集在一起的一组机器，作为一个有凝聚力的单元一起工作。在这两种情况下，系统的主要控制和位置都在一个“中心”位置，因此有了集中系统的概念。

但是当单个服务器，或者甚至一组服务器位于一个地方时，有一些隐藏的问题只有在系统必须扩大规模时才开始显露出来。

> 无论主要的控制源能够处理什么，集中式系统都会受到限制。

<figure>[![](../Images/93cf5a79610a40b14189b17180b67c35.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Nzc6ysrO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2A5WKIhLeE9NqSq2BhwY7h2g.jpeg) 

<figcaption>当集权使得伸缩困难！</figcaption>

</figure>

想象一下，我们的系统只是一台机器上的一台服务器。如果我们的单服务器集中式系统突然收到大量请求，会发生什么？假设我们的单服务器系统每秒大概可以处理 100 个请求；如果它突然开始每秒接收 10，000 个请求，它真正能做的就只有这么多了。不管我们的设置是什么，如果有足够多的请求，我们将会遇到集中式系统的计算限制。

处理请求也是如此；如果我们的系统必须处理大量的数据——例如，必须同时对单个数据库进行写入或更新——它将不可避免地遇到其存储限制。在给定的时间内，实际上只能访问或写入这么多数据，如果超出了我们系统的存储限制，我们可能无法像预期的那样保存所有数据。

最后，还有网络的问题。当我们的系统由一个点集中和控制时，我们甚至更加依赖于用户和我们的集中服务器之间的网络来始终高效地运行。然而，网络会失败，会不可靠，有时并不是我们自己的错！集中式系统的**网络限制**意味着如果我们的服务器和我们的用户之间出现问题，整个系统可能会延迟——或者更糟，不可用。

鉴于我们对可伸缩性的了解，我们知道我们想要让我们的系统按大小伸缩。然而，即使是最先进和现代的中央系统也有其局限性。如果我们发现我们需要使我们的系统规模可伸缩，如果系统被设计成集中式的，我们可能会遇到一些其他的限制。

#### [](#when-youre-waiting-for-a-node-to-text-back)**等待节点回短信的时候**

同步通信并不完全是一件可怕的事情；事实上，有时候同步通信工作得非常好。系统各部分之间的通信实际上集中在它们所使用的网络类型上。

例如，如果一个系统的节点都位于同一栋建筑中，那么它们之间传递的信息就不需要传那么远。然而，如果一个系统的节点离得更远(例如，在国家的不同地方)，那么情况就完全不同了。我们刚刚描述的两种网络都有专门的术语。

<figure>[![](../Images/f79a41b8acd8373a96f1e01a42af7027.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--dctaGy8I--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AIZ_ReC6Iew-u0amL8BTpUw.jpeg) 

<figcaption>局域网与广域网。</figcaption>

</figure>

所有节点都生活在一栋建筑物内或一个相当小的区域内的网络被称为*局域网，或 ***局域网*** 。另一方面，节点可能分布得更广并跨越国家或不同大陆的网络被称为 ***广域网*** 或 ***广域网*** 。局域网是在物理上相互靠近的机器之间传输少量信息的理想选择；然而，广域网更适合于在物理上相距很远的机器之间发送大量数据。*

 *那么，这两个网络究竟是如何联系到同步通信的呢？好的，我们将回忆起同步通信意味着请求节点必须等待被请求节点以某种方式对其做出响应。

> 最终，当在广域网中使用同步通信时，围绕局域网构建的系统会遇到问题。

如果我们更深入地思考这个问题，它就开始变得有意义了:当我们所有的节点都在本地网络上，并且它们之间的通信不需要传播那么远时，一个节点在等待另一个节点的响应时“阻塞”可能并不那么明显。当我们的资源都在局域网环境中运行时，等待一个进程同步完成可能会非常快。然而，当我们系统的节点变得更远时——例如，如果我们添加一个在本地网络之外的节点，而使用广域网——请求和响应之间的“阻塞”时间可能会变得令人痛苦(或者甚至只是明显的！)慢。

<figure>[![](../Images/d31890457573407f8d38cd486ce0a778.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--UkRrIgp7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AjRzZSej-ZsLWLw9B2He69w.jpeg) 

<figcaption>当(广域)网络上的同步通信难以扩展时！</figcaption>

</figure>

另一个与 WAN 上的同步通信缓慢有关的问题是，广域网通常不如局域网可靠，可能会出现故障、经历中断，或者可用性或带宽有限。如果我们的系统使用同步通信，那么很可能在某个时候，当一个资源阻塞并等待另一个资源的响应时，网络本身会发生故障。

鉴于我们对地理可伸缩性的了解，我们知道如果我们通过添加另一个节点来扩展我们的系统，它应该能够类似地执行，即使这些节点在物理上彼此远离。然而，如果我们的系统被设计成使用同步通信，那么从地理角度来看，它可能不会像我们希望的那样扩展。

因此，也许我们学到的是，扩展可能不像“添加另一个服务器”或“增加我们的数据库节点的大小”那么简单。事实证明，我们必须考虑一下我们的系统是如何设置的，以及当需要扩展时，我们是否需要改变它的设计方式。扩展并不是一件容易的事情(我们甚至还没有涉及到扩展的所有问题——只有两个大问题！)，但通过一些深思熟虑和有益的技巧是有可能做到的。

在下一篇文章中，我们将学习一些在高效和有效地扩展分布式系统时可以使用的工具，以及如何管理最难以控制的系统的不可预见的增长！

#### [](#resources)资源

可伸缩性是一个写得很好的研究主题！您可以了解更多关于集中式系统和同步通信的问题。如果你很好奇，这里有一些很好的资源。

1.  [分布式系统简介](https://link.springer.com/content/pdf/10.1007%2Fs00607-016-0508-7.pdf)，马腾·范·斯汀&安德鲁·s·塔南鲍姆
2.  [关于系统可扩展性](https://resources.sei.cmu.edu/asset_files/TechnicalNote/2006_004_001_14681.pdf)，查尔斯·温斯托克&约翰·古德诺
3.  [以娱乐和盈利为目的的分布式系统](http://book.mixu.net/distsys/single-page.html)，Mikito Takada
4.  [分布式系统介绍(讲义)](http://cse.csusb.edu/tongyu/courses/cs660/notes/chap1.php)，佟丽玉博士

* * **