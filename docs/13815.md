# 带有尼康无线 DSLR 相机同步的照相亭

> 原文:[https://dev . to/akent/photo booth-with-Nikon-wireless-dslr-camera-sync-59n 8](https://dev.to/akent/photobooth-with-nikon-wireless-dslr-camera-sync-59n8)

快到情人节了，长话短说，我自愿为我孩子的学校班级聚会经营一个“照相亭”。道具和背景很简单，但是现在谁真的想用昂贵的宝丽来式胶片相机呢？所以我想出了另一个解决办法。如果我可以使用数码相机，将照片无线传输到我的笔记本电脑上，并在教室里已经有的大屏幕上以几乎实时的幻灯片形式显示出来，会怎么样？厉害！

我正好有一台尼康 D5500 DSLR 相机，内置 WiFi 功能。我从来没有真正使用过这个内置的 WiFi 功能，但事实证明，它非常适合这个用例。默认情况下，它运行自己的 WiFi 热点，你可以从你的手机或笔记本电脑连接。他们提供的手机和桌面应用都非常糟糕，几乎无法使用。幸运的是，开源拯救了我们！摄像机通过 IP (PTP/IP)与 PTP 对话。有一个名为 [gphoto2](http://gphoto.org/) 的程序/程序库附带了一个工具，可以轻松地将新照片直接同步到一个文件夹中。理论上，如果你的相机本身不支持 WiFi，你也可以使用东芝 FlashAir WiFi SD 卡等其他东西来传输图像文件。

假设您已经设置并启用了您的相机 WiFi 热点，并从您的计算机连接到它，然后您可以运行这个 gphoto 命令来等待来自相机的事件，包括等待任何已完成的照片捕获，并立即通过 WiFi 复制这些图像:

`gphoto2 --port ptpip:192.168.1.1 --keep --wait-event-and-download`

太好了！现在我们需要做的就是显示这些图像。我想要一个全屏的东西，一个可以直接显示最新图片的东西，这样在拍摄照片和在大屏幕上看到照片之间的反馈循环会尽可能的短。我给一个非常简单的使用 OpenGL python 框架 [pyglet](https://pyglet.org) 的 [python 脚本](https://gist.github.com/b90cabb6e80fe5d36a734f3267c3cbc5)添加了一些“显示最新图像”的逻辑，因为这是我能找到的在 MacOS 上全屏显示图像的最简单方法。

显示脚本使用的过程是:

*   每‘滴答’，检查是否有新文件出现在数据目录中。
*   对于每个新文件，给它分配到目前为止所有照片的平均浏览次数，减去一个小的加权因子。这使得它在新的时候可以更频繁地展示。随机选择这些新文件中的一个来显示。
*   如果没有新文件，从最少显示的照片中随机选择一个。

python [系列。计数器](https://pymotw.com/3/collections/counter.html)模块使得跟踪视图计数变得相当容易。

为了让照相亭更有趣，我还拿了一个简单的红外线遥控触发器，这样照片中的人就可以自己按下触发器。

所有这一切的最大好处是，孩子们可以直接将一些精彩的照片保存为数字格式，然后轻松地与父母和朋友分享。我希望他们都喜欢成为这个小照相亭创意的“顾客”!