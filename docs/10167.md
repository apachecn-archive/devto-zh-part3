# 编写一个(琐碎的)搜索引擎

> 原文:[https://dev . to/gangezilla/writing-a-trivial-search-engine-336n](https://dev.to/gangezilla/writing-a-trivial-search-engine-336n)

我最近被任命为一个专注于搜索的团队的技术主管，但对搜索了解不多。为了掌握搜索引擎的工作原理，我开始阅读信息检索简介。仅供参考，因为我不知道，搜索引擎和搜索属于研究领域称为信息检索。希望这能帮你省去一些在谷歌上疯狂搜索“搜索引擎是如何工作的？”。

读了几章后，我决定写一个简单的搜索引擎来理解我正在读的内容。[你可以在这里找到](https://basic-search.herokuapp.com/)。它索引了三部莎士比亚的作品，你可以在里面搜索🎉。有点问题(尝试搜索两个以上的术语🤷🏻‍♂️)，但我对一周的晚上都很满意。我建造它的目标是:

*   阅读一些文件
*   给这些文件编索引
*   弄清楚术语文档频率
*   为这些文件建立倒排索引
*   允许用户搜索多个搜索词并返回一些结果。
*   让我们来分解一下:

您可以在特定搜索引擎中搜索的材料是文档。所以我的搜索引擎有莎士比亚戏剧，因为谷歌允许你搜索网页。为文档编制索引包括将文档保存为您以后可以访问的形式。

在你索引了一个文档之后，你将会计算出每个单词的术语文档频率。这是一个特定术语在文档中出现次数的(长)列表。这是通过符号化和词干化分解文本来实现的。标记化是将文档中的单词分成单独的单词。词干提取是将一个单词提取到它的“词干”的过程，这样它就可以与其他相似的单词进行比较。例如，单词“叛逆”、“叛逆”、“反叛者”和“反叛”都回到词干单词“反叛”。你会在下面的例子中看到一些单词看起来有点奇怪。有许多词干提取算法，如[雪球](https://snowballstem.org/)和[波特](https://tartarus.org/martin/PorterStemmer/)词干提取器。作为这个项目的一部分，我做了一个[波特](https://github.com/Gangezilla/porter-port)算法的移植，如果你感兴趣，你可以在这里找到。词干分析器基本上是通过一系列越来越尖的正则表达式修饰来深入到单词的词干。《哈姆雷特》中的一个片段是这样的:

```
"mind": 16,
"mine": 33,
"miner": 1,
"minist": 2,
"ministr": 1,
"minut": 2,
"miracul": 1,
"mirror": 2,
"mirth": 2,
"mischanc": 2,
"mischief": 1,
"miss": 1, 
```

在计算出每个文档的术语文档频率之后，搜索引擎将建立倒排索引。这听起来比实际要可怕得多。倒排索引是您的文档的组合术语文档频率，以及哪些文档包含这些单词的记录。下面，关键字“doc_freq”是这些术语的组合文档频率，“postings _ list”是这些术语出现的文档 ID 的列表。这个倒排索引大概是这样的:

```
"deep": {
  "doc_freq": 13,
  "postings_list": [
    1,
    2,
    3
  ]
},
"deer": {
  "doc_freq": 8,
  "postings_list": [
    1,
    2,
    3
  ]
},
"defenc": {
  "doc_freq": 3,
  "postings_list": [
    1,
    2
  ]
} 
```

完成后，你可以开始搜索。我的搜索引擎有一个非常基本的搜索解析器。当你的用户输入一个查询，比如“哈姆雷特之剑”，它会被转换成“哈姆雷特和剑”，所以这两个词都会被搜索。对它的升级是一个布尔搜索解析器。这允许你的用户在他们的查询中使用一些布尔逻辑，比如:“哈姆雷特和剑或者猫和 been”。这可以与短语查询一起使用，短语查询是由双引号括起来的许多单词，它将匹配这些引号内的所有内容。对于布尔查询，这可能看起来像:“哈姆雷特和剑或猫”和“那是谁”。

在这一点上，用户将看到一些结果返回和我们的工作。阅读这些信息很有趣，但令人困惑。实现它，即使很简单，也是理解其工作原理的好方法。

有很多方法可以改进这一点。例如，更好的性能、索引更多的文档以及实现分级搜索系统。你可以在这里随意查看搬运工的[代码，在这里](https://github.com/Gangezilla/porter-port)查看[搜索引擎，或者在这里](https://github.com/Gangezilla/basic-search)查看[最终产品。](https://basic-search.herokuapp.com/)

感谢阅读！