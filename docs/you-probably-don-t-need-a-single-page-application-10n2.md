# 您可能不需要单页应用程序

> 原文：<https://dev.to/ukutaht/you-probably-don-t-need-a-single-page-application-10n2>

React、Angular、Vue.js、Elm 等前端框架的异军突起。使得单页应用程序在 web 上无处不在。对于许多开发人员来说，这些已经成为他们“默认”工具集的一部分。当他们开始一个新项目时，他们会使用他们已经知道的工具:后端的 REST API 和前端的 React/Angular/Vue/Elm。

这些工具有问题吗？绝对不行。事实上，我喜欢和他们一起工作。然而，只有当实际需求将我推向那个方向时，我才会选择这种架构。如果没有构建单页面应用程序的特定原因，我会每天都使用传统的服务器渲染架构。它更简单，可以让你移动得更快:

#### 1。无状态请求

传统的 web 服务器是无状态的。这意味着每个端点都可以独立地进行推理和测试。相比之下，SPAs 必须明确定义前端在整个会话期间如何加载、刷新和丢弃所有状态。这引入了新的缓存/同步问题，而这些问题在服务器渲染的世界中是不存在的。

#### 2。浏览器知道如何处理传统架构

如果您选择 SPA 路线，您总是需要额外的代码来模拟琐碎的浏览器功能。我花了很多时间来确保浏览器历史管理得当，加载动画看起来流畅，当用户浏览历史时恢复滚动位置，等等。乱七八糟。

#### 3。更少、更成熟的工具

像 Rails、Phoenix、Lavarel 等框架。已经存在了一段时间，它们非常稳定。我大约在 5 年前学习了 Rails，我的知识仍然完全适用。大约在同一时间，我还学习了 Gulp、CoffeeScript、BackboneJS 和 SASS，所有这些都被更新的工具所取代。不要太依赖 Javascript，避免 Javascript 疲劳症。

#### 4。免费搜索引擎优化

单页应用程序必须添加额外的基础设施和代码，以确保它们可以被爬虫索引。如果您需要对动态页面进行 SEO，使用服务器渲染架构会更容易实现。

所有这些都意味着单页面应用程序给开发人员带来了更多的复杂性和认知负荷。以我作为开发人员的经验来看，复杂性和认知负荷是软件错误和开发放缓的最大因素。

### 何时使用单页 app

正如我所说，大多数情况下的默认选择应该是传统的服务器呈现的应用程序。然而，有些需求可能会迫使您选择单页面应用程序架构:

*   核心功能是实时的(例如 Slack)
*   丰富的用户界面交互是产品的核心(例如 Trello)
*   许多状态在屏幕间共享(例如 Spotify)

这些产品必须使用单页架构才能正常工作。这就是为什么它是这些公司的正确选择。然而，许多基于网络的产品没有这些要求，这种复杂性是可以避免的。

### 混合解决方案

即使您的应用程序需要一些实时功能或丰富的交互，您也不需要对整个应用程序使用 SPA 范式。一个很好的方法是将小型前端应用嵌入到传统架构中。

Github 使用这种混合方法。他们网站的主干是一个传统的 rails 应用程序，但有些区域，如项目选项卡，是作为嵌入式前端应用程序构建的。这是一个完美的解决方案，结合了两者的优点。最棒的是，你可以用这种方法从简单开始，然后逐渐增加更复杂的 UI 交互。

我相信我目前的项目[似是而非](https://plausible.io/)会朝着这个方向发展。未来，应用程序的主 UI 将需要丰富的交互，但应用程序的其余部分可以保留服务器呈现的架构。

### 这一切都归结于权衡

与编程中的所有事情一样，在 SPA 与传统架构的困境中没有单一的答案。有些情况下，使用 SPA 是有意义的，因为您需要一个快速、实时的 UI。然而，我们应该认识到这是以发展速度为代价的。如果单页应用程序不是必需的，我们可以通过走传统路线来避免额外的复杂性并更快地移动。

为工作选择正确的架构会极大地提高工作效率，并最终取得成功。我们的目标应该是在我们的工具箱中拥有这两种架构，这样我们就可以在每种情况下使用最佳解决方案。