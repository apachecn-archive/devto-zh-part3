# 构建 web 应用程序时有哪些可访问性挑战？

> 原文：<https://dev.to/marcush/what-are-the-accessibility-challenges-when-building-web-apps-2a6>

web 应用程序是在浏览器中运行的计算机程序。很难进一步扩展一般定义。[维基百科](https://en.wikipedia.org/wiki/Web_application)说:

> 任何类型的动态网页和“web 应用程序”之间的一般区别并不清楚。最有可能被称为“Web 应用程序”的网站是那些与桌面软件应用程序或移动应用程序具有相似功能的网站。

但是不管它是动态网页还是单页应用程序，现代的“类似应用程序”的功能是用 JavaScript(有时是用框架)构建的，这个 JavaScript 应该对每个人都有效(并且是可访问的)。

也许你在过去读到过 JavaScript 不利于可访问性。虽然在构建数字产品时考虑到渐进增强总是好的，但是没有 JavaScript 的 就无法访问某些 web 项目。

现在，JavaScript 带来的具体问题是什么？

### 点击不是链接的目标

我承认这个标题是一种简化。当然，即使在“非动态网页”上，点击目标也比链接多。以表单中的提交按钮或输入元素为例。

然而现实是，许多网页提供的点击目标仅仅是- **点击**目标。你既不能通过键盘接触他们或与他们互动，也不能通过屏幕阅读器或语音输入软件等辅助技术来使用他们。为什么呢？因为，通常代码看起来像这样

```
<span @click="someClickHandler">To be or not to be a button</span> 
```

虽然你*可以*给任何元素分配一个点击处理程序，但这并不意味着你*应该这样做。*你应该做的是使用`<button>`元素，因为:

*   所有用户代理都将按钮视为交互元素——不管 web 文档是视觉上的、听觉上的还是其他的。这是 web 上交互元素的瑞士军刀，尤其是当你使用`<button type="button" />`来阐明你不想让这个按钮意外提交任何表单的时候。如果你想把你的 span“升级”成一个按钮——但只是考虑它的感觉，而不是它的功能——你需要添加`role="button"`(除了别的以外，请继续阅读)。
*   默认情况下，按钮在键盘上是可聚焦的(如果你想让我们的“span button”成为可聚焦的，你必须添加`tabindex="0"`)。
*   按钮可以通过点击或触摸激活，也可以通过击键`ENTER`或`SPACE`激活。所以不需要注册额外的事件监听器。点击时添加一个监听器就可以了，`ENTER`或`SPACE`击键将被中继。

Web 开发人员喜欢节省时间的快捷方式和工具——尽管可以节省宝贵的时间和代码行，但他们中的一些人仍然避免使用内置电池的交互元素。

#### 但造型

也许对按钮的厌恶与它们的默认风格有关。不同的浏览器和不同的操作系统有不同的风格，给它们一个一致的风格过去是很难的。但现在情况不同了。只需申请:

```
button {
    -webkit-appearance: none;
    margin: 0;
    padding: 0;
    border: none;
    border-radius: 0;
    font: inherit;
    color: inherit;
    background: none;
} 
```

#### 但是我可以使用与 href="# "的链接来实现同样的事情

为了决定是否使用`<a>`或`<button>`，问问你自己:与该元素交互是否会导航到一个新的地方(包括 URL 的改变)，或者它是否会改变你所在页面上的某些内容(例如:打开一个模态对话框，喜欢社交媒体平台上的一个状态，将一件商品添加到你的在线购物车)。

在导航的情况下，使用链接。如需修改，请使用按钮。

### 输入和控制

一个典型的网络应用程序的核心部分通常是输入数据——你输入文本、上传文件、做出选择、复选框、重新排列等等。

实际上，构建一个包容性的 web 应用程序意味着任何人都可以做上面提到的所有事情——不管他们使用什么技术。无论是视觉浏览器和鼠标，开关设备，让用户以触觉方式感知你的应用程序的盲文阅读器，还是将它转化为听觉体验的屏幕阅读器。

web 的创建者已经建立了“输入原语”,涵盖了许多输入情况——你已经知道它们了。在使你的应用程序可访问时，问问你自己——我能通过使用文本输入、文本区、选择或多选或复选框来解决我的问题吗？如果你的答案是——是的，但是它们不应该看起来“原始”——请注意，在过去的几年里，仅仅用 CSS 来设计它们变得越来越容易和简单。如果有必要的话，访问像 wtfforms.com 这样的网站来更新你的知识。

但是，即使在“输入原语”不能满足您的需求的情况下，web 标准的创建者也会用 ARIA(它代表:可访问的富互联网应用程序)来满足您的需求。关于输入和控制，维基百科是这样描述的:

> 这些用户界面控件[...]对于残疾用户来说通常是不可访问的，尤其是屏幕阅读器用户和不能使用鼠标或其他定点设备的用户。WAI-ARIA 通过向动态 web 应用程序添加角色、属性和状态信息，允许 web 页面(或页面的一部分)将自己声明为应用程序，而不是静态文档。

WAI-ARIA 已经存在了一段时间，如果你想了解推荐的方法，请查看 [ARIA 创作实践](https://www.w3.org/TR/wai-aria-practices-1.1/)，或者浏览一下它的 [FAQ](https://www.w3.org/WAI/ARIA/faq) (常见问题)给自己一个大概的了解。

### AJAX——异步改变和加载东西

在用户输入之后，Web 应用程序试图模仿本地应用程序的反应。一个“标准”网站在交互发生后(例如，一个链接或提交按钮)会加载(重新), web 应用程序不久前使用了一种叫做 AJAX 的方法。含义:异步获取或存储数据，而不触发网页重新加载。

因此，使用 AJAX 的 web 应用程序感觉很“爽快”，就像它的典范，原生应用程序一样。不幸的是，这种异步对于顺序使用 web 文档的辅助技术来说相当糟糕。让我们以屏幕阅读器为例——它的正常模式是从上到下阅读文档(实际上没有用户这样使用它，而是通过标题结构、地标、链接、控件等进行导航)。给定一个屏幕阅读器，用户与一个按钮进行交互，因此，在 web 应用程序中发生了一些事情，用户必须主动搜索网站上发生了什么变化。

#### 举个例子

想象一个具有“购物车”功能的电子商务网站——您浏览到该网站，可以将产品放入您的购物篮。让我们说这个“把东西放进你的购物车”的过程应该感觉*爽快*并且是用 AJAX 构建的——这样用户就不会在每次把商品放进购物车时被重定向到他们的购物车。因此，用户找到一个产品，点击大的“添加到购物车”按钮。随后，购物车部件得到更新，可能会在某个地方增加一个计数器标记——简而言之:视觉正常的用户可以看到他们的按钮点击会导致期望的结果。

我们的屏幕阅读器用户只是与“添加到购物车”按钮交互，然后没有明显的事情发生。也许是这样，也许是文档中某个地方的购物车小部件被填充了——但是也许交互失败了。除非屏幕阅读器用户在点击按钮后主动搜索可能的变化，否则他们不会发现发生了什么。对他们来说，这是一个非常恼人和令人沮丧的局面。

#### 解决策略

幸运的是，有两种策略可以避免这种烦恼:

*   交互后以编程方式移动焦点。除了少数例外，焦点不应该明确地移动，而是可以预测的，所以这必须根据具体情况来决定。以下选项通常更好:
*   宣布与 ARIA 现场区域交互的成功或失败。有了 live regions，web 开发人员可以在屏幕阅读器体验中加入一点异步性——以一种礼貌或更自信的方式中断阅读。在我们的购物车示例中，一条礼貌的消息“产品 A 已被添加到您的购物车中”可能就是这种方式。屏幕阅读器的虚拟焦点没有受到任何影响——阅读:用户仍然在文档中与交互前相同的位置——但是现在他们知道他们的按钮点击确实起作用了。[您可以在 MDN 的详细文档中了解更多关于实时区域的信息，这一强大功能使辅助技术的用户能够获得更好的 web 应用体验](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions)。

### 路线变更

有一种非常特殊的 web 应用程序:单页应用程序(SPA)。SPA 由一个单独的 HTML 文档组成(因此得名)——其他任何东西都是以异步方式加载的，从来没有真正离开页面。[引用维基百科](https://en.wikipedia.org/wiki/Single-page_application):

> [单页应用程序]通过动态重写当前页面而不是从服务器加载整个新页面来与用户交互。这种方法避免了连续页面之间用户体验的中断，使应用程序的行为更像桌面应用程序。

所以 spa 是异步的——因此所有关于通知用户客户端变化的策略都适用——但是还有一个特点。继续报价:

> 虽然可以使用位置哈希或 HTML5 历史 API 来提供应用程序中独立逻辑页面的感知和可导航性，但在该过程中的任何时候都不会重新加载页面，也不会将控制转移到另一个页面。

因此，单页面应用程序通过修改位置散列来模拟位置的变化——导航 SPA 感觉就像导航“静态页面”,但是更快，并且不需要任何服务器配置。这就是所谓的“路由”。

这实际上是一个关于可及性的话题。还记得上面的电子商务例子吗——用户点击一个按钮，但没有得到一个响应，是否发生了什么？路由的情况是一样的:一个屏幕阅读器用户与一个(路由)链接交互——什么也没发生；虽然，在大多数情况下，页面的大部分都发生了变化。

#### 无障碍路由的最佳实践:

*   这是少有的推荐移动焦点的场合之一。由于无障碍路由是一个相当新的话题，对可靠的最佳实践的研究仍在进行中——目前还不清楚应该将重点放在哪里:
    *   到文档的顶部？如果实现，这种用户体验将接近“真实页面加载”的体验
    *   到“路由容器”？这意味着将焦点发送到其内容已经被交换的元素。
    *   新加载内容的第一个明智的标题？这种方法的优点是用户可以直接访问所请求的内容
*   但是，不管确切的焦点目标是什么，路线转换后的焦点管理都应该有一定的延迟，以考虑装载时间
*   此外，最佳做法是在路线更改后更改文档的标题
*   最后但同样重要的是:当焦点管理不足以使你的单页应用程序的内部工作对你的用户透明时(例如，当外部数据需要在显示之前获取，焦点移动时)，考虑使用一个活动区域来通知用户他们的请求是成功的，但是你的应用程序需要多一点时间。

### 结论

总而言之，网络应用的特性可以总结为两点:

*   对你的应用程序的输入选项要非常清楚和透明。记住用户输入的视觉表现是不够的。例如:看起来像按钮的应该是按钮*语义上的*，而不仅仅是带有点击事件监听器的 span。对于边缘案例，请参考[咏叹调创作练习](https://www.w3.org/TR/wai-aria-practices-1.1/)(当然还有[accessible-app.com](https://accessible-app.com))。
*   对你的应用程序的输出要非常清楚和透明，尤其是当它没有伴随着一个完整的页面重新加载，尤其是当输出发生在一些用户输入之后。查阅 [WAI ARIA live region 文档](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions)了解无障碍通告，并偶尔访问【accessible-app.com】T2 了解更多关于无障碍路由的新兴最佳实践(和现成的框架解决方案)。