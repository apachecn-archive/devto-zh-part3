# Pirrigator，第 4 部分。

> 原文:[https://dev.to/neilgall/pirrigator-part-4-52ec](https://dev.to/neilgall/pirrigator-part-4-52ec)

抱歉，由于一些原因，我已经有一段时间没有在这里发布更新了。天气越来越好，我更倾向于到户外去享受。我会向任何人推荐同样的建议，不管你多么热爱你的编码时间。此外，我主要是在我的项目的电子部分工作，边走边做，并通过生锈的书工作。

电路几乎完成了。起初，我打算将电线连接到盒子外部的螺丝端子上，但这看起来笨重而脆弱，所以我订购了一堆 2.5 毫米的 DC 插孔，我将把它们安装在盒子周围，并用插入的电缆连接一切。应该更加稳定，尽管从 12V 电源到湿度传感器使用相同的连接器并不理想。我得确保我贴上了标签。

[![Circuit board image](../Images/c2805513ffbce6e6cd34877d68a3632b.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--MX4fRAzj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/f6rj4uqvi7yitg6pysgt.jpg)

板上有天气传感器、三个湿度传感器，其模拟输出馈入 MCP3008 ADC 芯片，以及三个 TIP120 达林顿晶体管，由 GPIO 线路控制，用于水阀。我增加了 LED 指示灯来显示阀门何时(应该)打开。在盒子的顶部是一个按钮，直接连接到 GPIO 线和地-我会在软件中添加一个功能，当按钮被按下时，直接打开和关闭水阀。手动控制很方便。

我真的很喜欢学 Rust。感觉很像 C，但是增加了强类型系统和现代编程特性的优势。编写迭代器适配器链、函数式风格，并将其编译成与命令式循环几乎相同的机器指令的能力确实令人印象深刻。我期待更多地使用它。

控制器的软件结构在我的脑海里越来越清晰——本质上是一个事件总线，各种模块可以在其上发布或订阅事件。然后，我将为所有不同的硬件和软件特性编写单独的模块，并使用外部配置文件来确定哪些模块被实例化。看起来这足以迫使我写一些类似真实世界的代码，同时随着夏天的过去，它也可以为行为调整而维护。在周末，我希望开始使用多线程 Rust 代码，这样我就可以开始构建应用程序的基本结构。