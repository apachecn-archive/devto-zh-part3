# 如何构建 Express 应用程序

> 原文:[https://dev . to/alexkondov/how-to-structure-express-applications-3o8j](https://dev.to/alexkondov/how-to-structure-express-applications-3o8j)

当我开始我的第一份工作时，我用的是 PHP。我们建立了 WordPress 项目-网站，电子商务和偶尔的插件。在我这样做了一段时间后，我有机会跳到一个 Laravel 项目上，建筑、结构和惯例的不同让我着迷。

像 Laravel 这样的框架会让你被宠坏，因为它们为你做了很多事情。预构建的机制实现了您在应用程序中需要的大多数东西，因此您可以专注于业务逻辑。这样固执己见的框架通过“牵着你的手”让你的生活变得更轻松。

然后我开始做一个快递项目。对于那些不知道的人来说，Express 是一个极简的 Node.js web 应用程序框架。与 Laravel 合作后，我第一次接触到它，这让我感到文化震惊。

一些框架带有预先设计的文件夹结构和指南，以便更好地理解它们。另一方面，Express 在一个空的 JavaScript 文件中有 6 行代码。该工具让您可以自由地在项目中只包含您想要的内容。

有许多库，你可以根据自己的需要拼凑起来。Github 托管了无数预先配置好的快速搭建项目。然而，关于构建应用程序的正确方法的问题仍然困扰着我。

## [](#structure-by-technical-role)由技术角色构成

由于 Express 是一个简约的工具，它不包括电池。许多例子采用 MVC 方法，并按照技术角色构建应用程序。这意味着将控制器、模型、视图、测试和其他工具分离到不同的文件夹中。

特别是对于较小的应用程序，这是一个很好的方法。在项目中找到自己的路很容易。例如，如果您需要调试某个路由处理程序，您知道您需要查看控制器。

当你在处理一个更大的应用程序时，这个时间会变短。具有更复杂业务逻辑的项目也带来了挑战。坚持传统的架构很难理解它所代表的领域。

文件夹变得臃肿，模型数量增加，适当的封装变得更加困难。该项目的新手会发现很难改变代码，因为他不确定它会影响应用程序的哪些部分。从事不同功能的人可能必须修改相同的效用函数。

在某种程度上，明智的做法是进一步按域划分文件夹。我们可以将包含产品特定逻辑的所有控制器移动到子文件夹中。然后我们可以对模型、视图和其他工具做同样的事情。之后，我们需要确保这些新的“模块”不会紧密地相互依赖。

这会慢慢演变成我们下面要讨论的结构。

## [](#structure-by-components)结构由组件组成

构建任何应用程序至少有两种方法。一种是按照技术角色对文件进行分组。另一种是根据它们所服务的**域**的部分来拆分它们。

应用程序的领域是它工作的专业领域。用更简单的话来说——它解决了现实生活中的问题。如果你正在构建一个会计应用程序，文章可能不会是你的领域的一部分。另一方面，发票会。

我越来越喜欢以领域为中心的应用程序结构。我们将不再需要用于控制器、模型和视图的顶层文件夹。取而代之的是，我们将按照领域——用户、评论、产品——对它们进行分组。这些文件夹中的每一个都将包含该应用程序的特定部分的所有控制器、模型和实用程序。

大多数时候，我们不会同时处理一个应用程序的很多部分。将一个项目模块化成组件使得独立工作变得容易。这种结构给了我们信心，与域的一部分相关的所有东西都在同一个地方。

就我个人而言，我喜欢这种结构，因为它提供了一个很好的项目鸟瞰图。你可以很容易地知道它是关于什么的，它由哪些组件组成。

## [](#what-does-your-architecture-scream)你的建筑叫什么？

今年早些时候，我终于决定阅读《清洁建筑》。我想更好地理解设计应用程序背后的核心原则。这本书里有一句话让我印象深刻:

> 那么，你的应用程序的架构在尖叫什么呢？当你查看顶层目录结构，以及最高层包中的源文件时；他们尖叫的是:**医疗保健系统**，还是**会计系统**，还是**库存管理系统**？还是他们尖叫: **Rails** ，或者 **Spring/Hibernate** ，或者 **ASP** ？

按照业务逻辑对代码进行分组的想法在[领域驱动设计](https://www.goodreads.com/book/show/179133.Domain_Driven_Design?ac=1&from_search=true)一书中有所涉及。它强调了不同领域中使用的应用程序不应该设计成相同的概念。

一个在金融行业运行的应用程序和一个在医疗行业运行的应用程序应该有不同的结构。它们的域如何操作的差异在代码库中应该是可见的。

我们需要根据我们的软件解决的现实世界的问题来构建。每个业务领域都面临不同的挑战，因此我们不应该设计相同的应用程序。

在[构建微服务](https://www.goodreads.com/book/show/22512931-building-microservices?ac=1&from_search=true)中我们可以找到类似的想法。作者谈到在我们的应用程序中寻找边界(接缝)。我们可以把我们的项目分成更小的模块。

如果我们需要的话，尽早构建我们的项目可以很容易地将它拆分到微服务中。

我在 React 应用程序中也使用了同样的方法。我没有将所有组件组合在一起，而是将它们放在模块中。每个模块都包含与之相关的所有组件、状态管理和实用程序。

当你查看一个模块时，你应该确信你需要的一切都在那里。

## [](#summary)总结

*   快速应用程序给了我们选择自己的应用程序结构的自由。这对于初学者或从事 MVC 框架工作的人来说可能是压倒性的。
*   将应用拆分成技术相关的部分是最直观的方法。虽然这没有什么错，但如果应用程序增长或变得更复杂，管理、增长和修改就会变得很困难。
*   在与领域部分相关的组件中构建应用程序是一个更好的方法。我们封装了应用程序的不同部分，使得将来构建服务更加容易。
*   组件架构有助于开发人员更好地理解应用程序的工作方式以及组成它的构件。