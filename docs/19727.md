# Wtf is git?

> 原文:[https://dev.to/johannestegner/wtf-is-git-5eh3](https://dev.to/johannestegner/wtf-is-git-5eh3)

## [](#introduction)简介

版本控制...开发过程的基石之一。

版本控制系统有很多，但在我的工作领域主要使用的是 Git。我经常使用 git，也经常和使用 git 的人一起工作。但是偶尔会出现一个以前没有使用过 git 的人。这篇文章旨在提供一些关于如何使用 Git 的基本信息，以及 Git 是什么的一般概念。它主要是为那些对某种版本控制系统有一些基础知识的人写的，但也希望能给那些从未使用过的人一些有用的东西。

一如既往，如果你发现任何奇怪的地方，请在评论中告诉我，我会尽快去看一看！

## [](#what-is-git)什么是 Git

Git 是一个版本控制系统，一个保存文件差异的程序——有点像检查点——它甚至创建了文件更改的历史。它不仅对创建变更历史有用，也是开发项目的核心部分之一。

项目中的每个开发人员都运行他们自己的 git 客户端，每次他们做出更改时，他们都会将更改提交到他们的本地 git 存储库中。每当他们觉得有必要或者觉得是时候这么做了，他们就把他们的本地更改推送到服务器，一个远程的服务器。
当一个开发者已经*推送*他们的变更时，其他开发者可以*将变更从所述远程*拉下到他们自己的代码库，然后推送他们自己的代码库！远程存储库将总是包含所有开发人员(推送的)文件变更！

大多数开发人员都知道 Git 是什么，我敢打赌，现在大多数开发人员都以这样或那样的方式使用它。但是许多开发人员只有机会学习它的基础知识，甚至更多的人不知道如何以一种好的方式使用 git 命令行界面(CLI)。现在，没关系，如果你不想使用 CLI，那就不要使用，使用 git GUI 并不是一件坏事！但是这篇文章的重点是提供一些关于如何使用 git CLI 以及如何提交、合并、推和拉的信息。

## [](#the-repository)储存库

### [](#initializing-and-cloning-a-remote-repository)初始化和克隆远程存储库

当项目第一次启动时，应该有人建立远程 git 存储库。
下面例子中的远程服务器将是 [github](https://github.com) (这是一种免费的公共项目类型的 git 远程服务器)，有很多站点可以注册免费托管 git 存储库，人们也可以托管他们自己的 git 服务器，但是 github 是最著名的一个，所以为了简单起见，在例子中使用 github。

最简单的方法是通过点击菜单中的“new repository”来设置它，并选择一个存储库名称(描述、自述文件和许可证是不言自明的，所以我将让您来尝试)。

当在远程上创建了存储库后，可以用*克隆*存储库。这可以通过使用`http`协议(甚至是 https)或`ssh`来完成。如果存储库是公共的，你不必在本地登录，但是如果是公共的，git 会告诉你如何登录！

克隆很容易通过下面的命令完成(在项目应该在的目录中):

```
git clone git@github.com:some_user/some_repository.git 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

等待一段时间(这取决于存储库有多大)后，存储库将被下载到您的本地文件夹中。

如果不进行`push`操作，对本地存储库的任何更改都不会出现在远程存储库上。

### [](#initializing-with-init)用 init 初始化

另一种启动项目的方法是从一开始就不要让它在远程。如果您还没有决定将存储库放在哪里，或者只是想在与其他人共享之前创建并启动，这将非常有用。

要初始化本地 git 存储库，可以使用下面的命令:

```
git init 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

现在，这会创建 git 需要的文件(放在项目目录的`.git`目录中),您现在可以进行更改并将它们提交到本地存储库。

在*你可以随时添加远程服务器。* 

 *```
git remote add origin git@github.com:some_user/some_repository.git 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*注意:origin 是默认遥控器的名称。*

现在，遥控器与克隆示例中的遥控器相同！

## [](#committing)提交

提交这个词对我来说有点混乱，因为我来自 SVN(另一个版本控制系统)背景。在 SVN，提交意味着您将更改提交给服务器。它并不意味着在 git 中。在 git 中，提交意味着将当前添加的文件更改“保存”到本地存储库中。

在提交之前，您必须添加您想要提交的文件。

添加文件是用`git add <file>`完成的，仅此而已。虽然在提交之前，我会建议您检查您的文件和上次提交的更改之间的差异，这样您就可以确保您没有做出一些您不打算做的更改(`git diff <file>`)。

添加您希望“保存”的更改后，使用提交命令。当您使用 commit 命令时，您应该总是留下一条消息。您留下的消息将存储在本地，并且每当您按下按钮时，将存储在远程，这将使您和任何可能的合作者更容易理解给定提交的含义。提交消息应该描述您所做的更改，不要太深入，但至少要让您或任何查看日志的人能够理解您的想法。

*永远留言！*

提交是用`git commit -m "Message"`命令完成的，完成之后，您将在代码中有一个“检查点”!

如果你觉得消息太长，说明你做了太多的修改，你就做错了*！*不过不要担心，大多数使用 git 的人都会这样做——老实说，我仍然不时地这样做——但是最佳实践是经常提交！

所以，总之:

```
# Edit file a.txt and b.txt
git add a.txt b.txt
git commit -m "Updated a.txt with something and changed b.txt with something else!" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#pulling-and-pushing)拉和推

*Push* 是用于将您的代码发送到服务器的单词。这通常发生在你已经做了足够的改变来完成一个特定的任务的时候，或者在某些情况下，在一天结束的时候或者在一个特定的时间，这取决于项目和团队(我将在后面的帖子中描述我个人对 git-flow 的看法，但是现在，让我们就此打住)。

*Pull* 这个词用于从服务器获取数据，并将其添加到您自己的代码库中。

### [](#push-without-pull)推而不拉？

一个很好的经验是，在没有首先检查服务器上是否有其他更改之前，永远不要推送您的更改。

当您将数据推送到存储库时，您在本地所做的所有更改都将针对服务器代码库进行尝试。幸运的是，git 在合并之前会做一些检查，这意味着，你实际上不能将会冲突的代码推送到服务器，它会让你知道，尽管如此，还是不要这样做。

所以在推之前，你应该做一个拉...

### [](#is-it-safe-to-pull)拉安全吗？！

不，拉并不总是安全的。

如果你拉，服务器上有与你的变更相冲突的变更，就会有**合并冲突**。合并冲突是可以的，这是你必须不时处理的事情，但是有尽可能避免它的方法。

### [](#tip-number-1-use-branches)技巧一:使用树枝！

小声明:这部分主要是个人喜好，其他人可能不同意，但这是我觉得最有效的方式，尤其是当我们的团队中有初级开发人员的时候！

总是在分支机构工作。

当你有任务时，创建一个分支。总有一个远程分支，团队会将他们所有的变更合并到其中，该分支通常是最好的起点，可以作为您的分支的基础。

用`git checkout <branch name>`命令检查分支，并确保它与遥控器同步(通过拉动)。如果您自己没有在分支中更改任何东西，那么拉应该是完全没问题的，不应该有合并冲突。然后，当它是最新的时，用`git branch <your new branch name>`从它创建一个分支。当分支被创建时，用`git checkout <your new branch name>`命令检查它，你将有你自己的分支，准备在！每当你完成你的任务，你提交你所有的改变。提交时，您要确保您的和其他分支代码之间没有冲突，然后您就可以合并了！在远程服务器上合并是可能的，在某些情况下更容易，因为它会给你很多关于合并冲突等的信息，但我更喜欢在本地做，在这篇文章中我会描述如何做。

总之:

```
git checkout develop    # Checkout the develop branch which will be used as base.
git pull origin develop # Make the develop branch up to date with remote.
git branch my-branch
git checkout my-branch  # Now the current branch will be 'my-branch'.
# Edit file a.txt and b.txt
git add a.txt b.txt
git commit -m "Updated a.txt with something and changed b.txt with something else!"
# At this point, the local repository have your changes in the my-branch branch! 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#diff)差异

`git diff`命令不仅用于显示当前更改和上次提交之间的差异，还可以用于显示两个分支之间的差异。
当你这样做的时候，你将会得到关于已经做了哪些冲突的变更的详细信息。有了这些信息，你就有可能在潜在的合并冲突发生之前就解决它们！

为了检查差异，您使用`git diff <your new branch name>..<the other branch>` ( *注意两个点*)，这将向您显示您的分支和其他分支在当前状态下的差异。

当你检查 diff 的时候，你可以看到你和其他分支在同一个地方的代码哪里有变化，那些地方就是合并冲突可能发生的地方。解决这些问题，你将永远不会看到冲突！

### [](#and-then-we-pull)然后我们拉..？

不...

在我们*区分*分支后，我们将其他分支合并到我们的分支中，我们确保我们的代码和远程代码在同一点 *+在新分支中所做的更改！*

我一直推荐人们使用`--ff-only`论证。`--ff`部分意味着“快速前进”(将所有提交添加到其他分支提交中，而不将提交合并在一起)。`only`部分让整个事情稍微安全一点。如果 git 不能快进(因为冲突),它会说它不能，代码会保持您第一次输入命令时的状态。我把它当作一次演习。如果它成功完成，我很高兴，如果没有，我知道这一点，并准备解决冲突！
如果有冲突，我通常会移除`only`并修复合并冲突。

```
git merge <other branch> --ff-only 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#oh-no-conflicts)哦不！冲突！

矛盾时有发生，也没关系！每当遇到矛盾，就要去处理。不要惊慌，这可能是一种痛苦，但它是可以解决的！

那么当冲突发生时该怎么做呢？嗯，你应该通过启动一个合并工具来手动合并。

合并工具是帮助你进行合并的工具(这个名字多少暗示了这一点)。当合并工具运行时，将创建一些文件。创建的文件将被命名为`filename.orig`，并且是备份文件。如果合并完成后它们仍然在文件夹中，可以移除它们，不应该将它们添加到源代码控制中。请记住，这是非常安全的，您仍然将您的更改保存在存储库中，因此如果没有做什么真正错误的事情，您将不会丢失您(或任何其他人)的代码。我个人更喜欢我的 IDE 附带的图形工具，但不是每个人都有 IDE，网上有免费的，默认情况下 git 中有一个 cli 工具。因此，每当您遇到冲突时，您可以通过键入`git mergetool`来启动默认工具。

merge-tool 会向你展示不同之处以及哪里有合并冲突。如前所述，冲突是代码的一部分，已经被你和其他人修改了。通常有一个选项来选择你的或者其他人的代码部分，但是你也可以两者都用，或者把它改成完全不同的！

合并冲突解决后，提交文件并恢复合并。

最后，你会有一个包含你的代码*和*其他分支代码的分支。这时你就可以推送(或者更确切地说，创建一个拉取请求)。

## [](#the-push-command)推送命令

当你完成合并时，确保团队中没有人有胆量在你合并的时候去推*T2】总是一个好主意！呵呵...再做一遍上面的套路来确定，看到没什么可合并的了，就可以推遥控器了。

如果你使用你自己的分支，并且将创建一个拉请求，只需用`git push origin <my branch name>`推这个分支，但是如果它是一个共享分支，使用它作为名字。当您最终将代码推送到服务器时，整个循环再次开始！*

## [](#last-words)最后一句话

希望上面的信息已经给了你一个如何 git 的想法。没那么难，也真的没那么可怕！

git 有很多命令和很多不同的方式，但这是绝对的基础，你*需要知道的部分*以一种体面的方式使用 git。
但是请记住，当谈到使用 git(或任何其他类型的开发工具)时，最重要的事情是尝试以和你的团队一样的方式使用它。并且*永远不要害怕问！提问并得到答案总比做错了而不得不修理东西要好！*

*这篇文章是从我的博客交叉发布的，可以在这里找到:[https://jite.eu/2017/12/19/git-intro/](https://jite.eu/2017/12/19/git-intro/)(包括一堆其他的文章！).**