# 使用 GitFlow 管理多个版本

> 原文:[https://dev . to/mindsers/managing-multiple-versions-with-git flow-3h 09](https://dev.to/mindsers/managing-several-versions-with-gitflow-3h09)

我最近写了一篇关于 GitFlow 的[帖子，解释了它是什么以及如何在大多数情况下使用它。](https://mindsers.blog/en/gitflow-methodology-practice/)

从那以后，我从读者那里得到了很多关于在特定情况下使用 GitFlow 的反馈。特别是在维护多个版本的项目的情况下。

让我们解释一下。

## 我开发并维护一个框架

正如我们所见，GitFlow 的基本运行在大多数情况下都是有效的。但是让我们来讨论一个特殊的案例，一个开发团队在一个最新的著名框架上工作。

这个团队使用 GitFlow，并且对它非常满意。事情正在进展，我们现在在第三版。

外部开发人员制作的每个新项目都是最新版本，但仍有项目使用以前版本的框架。

如果发现了安全漏洞，外部开发人员希望团队对项目的版本 3 和版本 2.7 进行修正。这很正常。

这个团队必须同时维护他们项目的两个版本。我们的问题来自于 GitFlow 严格的分支系统:

*   `feature`:从`develop`到`develop`
*   `release`:从`develop`到`develop`和`master`
*   `hotfix`:从`master`到`develop`和`master`

如果开发人员必须在 2.7 版本的框架上做`hotfix`(安全修复)，他们不能从 master 创建分支，因为他们已经在这个分支的版本 3 上了。

他们也不能重新应用对`master`和`develop`的修正，因为在版本 3 中代码可能已经完全改变并且可能不兼容。

如何在索引中表示项目的两个同步版本？

## [](#the-support-branch)支持分支

我还没告诉你关于 GitFlow 的一切。工作流程中有一个秘密规则可以解决我们的问题。

从`master`和`develop`派生的第四种类型的分支存在:`support`分支。

很简单:

*   从`master`开始创建`support`分支，格式如下`support/2.7.x`。起点必须是项目 2.7 版本的最后一次提交，而不是`master`分支的最近一次提交。
*   当你对 2.7 版本进行安全更新时，你从`support/2.7.x`创建一个`hotfix/2.7.1`分支，就好像它是`master`。事实上，它是维护的 2.7 版本的主人。
*   修复完成后，您将您的`hotfix`合并到`support`上。
*   您删除了`hotfix`分支，并在`support/2.7.x`分支上标记了`v2.7.1`。

在该项目中，我们有:

*   3.0 版本中的`master` = >
*   `develop`=>3.1 版本正在开发中
*   2.7 版本中的`support/2.7.x` = >
*   `feature/...`
*   `release/...`
*   `hotfix/...`

## [](#a-little-automation-)有点自动化？

是也不是。这项功能即使对人类来说很容易实现，但对机器来说很难实现自动化。

有些命令`git flow support ...`还在开发/测试/实验中。另外，它们没有被很好地记录。

你可以使用它，但你可能会遇到一些错误。如果你想冒险，那就去吧！它只会帮助开发，但尽量不要在关键项目上使用它...