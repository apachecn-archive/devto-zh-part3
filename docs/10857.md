# momento 设计模式[行为]

> 原文:[https://dev . to/its coders life/memento-design-pattern-behavioral-2j9a](https://dev.to/itscoderslife/memento-design-pattern-behavioral-2j9a)

**什么**？–memento 让我们可以拍摄一个对象的重要状态的快照。

当实现这种模式时，保持对象外部的安全状态是很重要的。对象的内部状态是不公开的，因此我们不会破坏封装。捕获的状态保存在 memento 对象中。稍后我们可以用这个保存的状态恢复对象。

在这个模式中有三个不同的角色:

[![DP-Memento.jpg](../Images/bc4e0795f9fd7153c3d09bba44ebbde7.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--7TQbOJQb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://itscoderslife.files.wordpress.com/2019/02/dp-memento.jpg%3Fw%3D656)

1.  发起者，这是我们想要恢复到给定状态的对象。它有两种方法:
    1.  createMemento 返回一个 Memento 实例，该实例包含将发起者重置到该状态所需的信息。
    2.  restore 方法采用 memento 参数，该参数包含以前保存的状态。还原方法会将发起者重置到此状态。
2.  纪念品很简单，它有一个状态。这可以是内置类型，也可以是可以保存发起者状态的自定义类型；它不包含任何进一步的逻辑。管理员提供保存和恢复功能。它要求发起者保存其状态或返回到先前保存的状态。
3.  管理员跟踪所有先前创建的纪念品。

> memento 捕获对象的重要状态，而不暴露其内部数据。如果需要，保存的状态可用于将对象重置为以前的状态。纪念品可用于实现撤消和重做操作。

例如:当玩家到达关卡时，游戏状态被保存。游戏的状态可以包括许多敌人或收集的硬币等。当玩家退出并稍后开始游戏时，会恢复上一个检查点的相同状态。

在所使用的撤销机制中可以使用 Memento 的另一个典型例子。

memento 模式将对象的重要状态捕获到 memento 中。这个纪念品可以在以后的某一天用来恢复该物品。如果发起者的内部状态没有向客户端公开，则模式实现正确。

缺点:保存和恢复复杂对象的状态可能很耗时。在实现 memento 模式时，您应该仔细考虑性能影响。另一个常见的问题是暴露发起者的内部细节，从而破坏封装。客户应该完全依靠看管人来保存和恢复发起者的状态。