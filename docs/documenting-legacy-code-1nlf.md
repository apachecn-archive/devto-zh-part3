# 记录遗留代码

> 原文：<https://dev.to/petermorlion/documenting-legacy-code-1nlf>

我之前提到过遗留代码的[特征之一是它缺少文档或者现有的文档质量低劣。现在让我提供一些关于如何记录遗留代码项目或任何相关项目的指导。](https://www.redstar.be/what-is-legacy-code/)

## 从概述开始

一个软件拥有的最小文档量必须是对软件做什么的描述。它试图解决什么问题？

下一步将是如何解决这个问题的高度概述。先不要记录本质细节。只要描述一下你的方法就可以了。

接下来，是系统的不同链接的全局图。你从哪里得到的信息？您要将输出发送到哪里？您是否使用外部服务？如果有，是哪个？

这应该是一个好的开始。如果您不能通过单击一个按钮来获得应用程序的概览，那么记录应用程序中的每一个代码文件是没有意义的。

## 向下钻取

获得正确的概述后，您可以开始深入了解更多细节。

第一步是绘制应用程序的不同组件以及它们之间关系的图表。此外，对于每个组件，记录该组件的职责。

根据应用程序的类型，组件的定义可能会有所不同。最好就此咨询你的团队。但是现在还不要深入到单个代码段的层次。只记录遗留应用程序的不同构件。

这已经为你的团队提供了很好的见解。尤其是当他们需要给遗留软件添加新功能的时候。职责概述将使他们有机会将新功能添加到正确的组件中。

该文档还将向您展示遗留代码问题的所在。可能有些组件已经不用了。或者他们之间的关系比任何人想象的都要复杂。

## 不过分

在记录了应用程序的所有组件之后，您可能想暂时停止。钻得太深并记录太多的细节是创建“遗留文档”的一种可靠方式这是您的文档不再有效的地方，即它们与代码不同步。

一旦有了非常详细的文档，随着代码的变化更新它就成了一项繁重的任务。文档更新被遗忘或出错只是时间问题。一段时间后，可能不清楚代码是否是错误的(例如，它包含一个 bug)或者文档是否不是最新的。这导致了问题、困惑的开发者、低效的讨论和纯粹的浪费时间和金钱。

但是，记录重要的具体细节是可以的。例如，在工业机器的自动化中，您可能想要提供关于机器的正常工作流程的图表。在订单处理应用程序中，您可以记录订单经历的不同阶段以及应用程序的行为方式。

## 记录特殊情况

您可以并且应该记录的细节是特例。特别是在遗留代码中，对于正常的流程来说，有许多奇怪的地方和例外。这些都是有充分理由的。重新发现这个原因并不容易，有时甚至是不可能的。但至少，您应该首先记录这些案例存在的事实。

## 其他要记录的东西

您还可以记录许多其他东西，这取决于它们对您的团队有多有用:

*   非功能性需求(如平台兼容性、性能、部署程序等)
*   与外部接口的合同
*   编码标准
*   特定领域术语的词汇表

## 自动化

这看起来工作量很大。通常都是这样。但是没有人告诉你要一次完成。当您的团队发现需要记录的事情时，您可以要求他们进行记录。

但是你应该要求他们做的一件事是尽可能自动化。使用现代工具，从不同的文档片段生成一个网站并不困难。还有一种软件可以为你生成应用程序组件的图表。编码标准可以自动实施。您可以编写能够作为测试自动运行的功能需求(用例)。

有许多需要自动化，让您的团队有更多的时间专注于遗留软件的工作。[联系我](https://www.redstar.be/contact/)如果您对项目中可以自动化的内容有疑问。

## 维护单据

最后，但重要的一点是:你和你的团队必须维护文档。尽可能多地自动化，仍然会涉及一些手工工作。

软件开发不仅仅是生产代码。文档也是其中的一部分。一个成熟和负责任的开发人员会花时间来更新文档，因为这将在将来节省时间和精力。尤其是在遗留代码项目中。

记录遗留代码的帖子[最先出现在](https://www.redstar.be/documenting-legacy-code/)[红星 IT 上——帮助管理者处理遗留代码](https://www.redstar.be)。