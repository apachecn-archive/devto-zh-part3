# CQRS 在产品设计中的应用

> 原文:[https://dev . to/psmyrdek/applying-cqrs-to-product-design-5d HC](https://dev.to/psmyrdek/applying-cqrs-to-product-design-5dhc)

你知道 CQRS 是什么吗？命令查询责任分离是各种后端系统中大量使用的架构模式，它基本上告诉您命令(状态的变化)应该与查询(读取数据的部分，即用于 UI 或报告的部分)分离。

工程师将这种模式应用到他们的项目中有多种原因，但是这两个可能是最值得一提的:

首先，CQRS 非常适合这个所谓的“单一责任原则”的概念——软件工程的基础之一。SRP 就是创造只做一件事的东西——没有混杂的顾虑，开车时不打电话，一次只做一件事。通过将 CQRS 模式应用到您的系统中，作为一个副作用，您遵循了 SRP 规则——您可以保持代码库更干净，使维护更容易，并让对项目的给定部分的推理没有任何麻烦。

其次，CQRS 帮助你以一种完全不同的方式组织你的系统，以达到读写的目的。例如，可能有用户每天运行大量报告的模块，因此它们的“读取部分”必须尽可能具有高性能。通过将查询从命令中分离出来，您可以在给定的时间点只专注于一件事情(报告查询),这样其他部分被错误破坏的风险就更小了。

软件工程师知道 CQRS 带来的大部分好处，所以也许我们可以把同样的概念借用到稍微不同的领域——比如说——设计？

## [](#commands-or-queries-reads-or-writes)命令或查询？阅读还是写作？

在我的生活中，我多次看到(甚至构建)试图同时完成太多事情的界面。想象一下你最喜欢的社交媒体平台的个人资料页面——你的名字旁边有一个“编辑个人资料”按钮，这个按钮可以将标签转换成表格和输入，你可以与之交互来更新你的个人资料:

[![](../Images/39297cbf316af016cc4ea9bc69204d61.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--_P6TZ31K--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/or32jwatmracobzn556v.png)

当然，在某些情况下，这种类型的 UI/UX 可以让您相对快速地完成更新数据的任务，但是它会破坏读写体验。为什么？想象一下，在某种知识来源中，可读性是最重要的。你的首要任务是让消费者以最有效的方式轻松地从这个神秘的东西中收集大部分知识，所以你必须花很多时间来设置所有的边距和填充，选择正确的字体大小、字体类型和字母间距。我们可以说“阅读模式”将是这个神秘事物最重要的特征。

其实也没那么神秘——这叫书。对于书籍和其他书面知识来源来说，可读性是必须具备的。

[![](../Images/2b6a55d16a64506dbb0d9710e1310d26.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--2PkZYC8S--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/91i3yewdtqadc85s1kak.png)

现在，假设您正在将帮助您写书的工具(如 MS Word)的相同 UI 模式应用于书本身。你需要引入完全不同的体验来为所有的按钮、标签、动作、通知和滚动条找到空间，而不是漂亮的行间距、漂亮的字体和有用的空白。MS Word 主要是完成作者的工作，而不是让读者的生活更轻松(这是 DTP 的职责)。

[![](../Images/4885eeda4552d10f213183c7d6046e17.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--IEXNeB_k--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/o017an9d3h319nu6u9cm.png)

当然这不是我们会推荐给朋友的那种书，对吗？

## [](#do-one-thing-well)做好一件事

这就是 CQRS 模式在设计中发挥作用的地方。对于软件工程师来说，将读写分离有助于创建更容易推理和调整的系统。对于设计师来说，这种概念上非常相似的方法有助于创造用户欣赏和理解的体验。

当我开始思考这个问题时，我想到的例子是 Wordpress。Wordpress 作为一个平台，包含了成千上万的布局，可以改善你创建的内容的外观、感觉和可读性。同一个 Wordpress 只包含一个文本编辑器，它与你的博客布局无关，但它帮助你创建赋予它力量的内容。上传新布局不会破坏编辑器。更新编辑器不会破坏布局。就这么简单。

您明白为什么我之前提到的例子(内联数据编辑)打破了读/写分离了吗？

*   如果我们想为只读数据和数据编辑器找到空间，我们需要牺牲这两者中的一个——可读性或健壮性。
*   如果我们想让人们使用 UI 的同一个部分执行两个动作，我们可能会使收集数据的工作流变得复杂，或者限制将数据上传/写入系统的工作流
*   如果有人必须实际实现这种 UI，可能很难区分呈现数据的组件和修改数据的组件。

知道了所有这些，我们如何解决编辑概要文件数据的问题呢？一个更简单的例子是创建一个专用页面，其中所有的表单和输入都只用于“编辑工作流”的目的。

[![](../Images/e1bd897e89368a0031ad38b33d06dbf9.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--RospmGFj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/7q7vrw3d0otgufd164i3.png)

相对较小的边距和填充、易于理解的操作调用、专用的加载指示器、空状态等等。从配置文件页面 UI 的角度来看没有限制，从数据呈现的角度来看没有限制，等等。纯剪辑体验。命令，而不是查询。

您可以从这种方法中获得的一个巨大好处是摆脱了以只读模式显示数据的所有限制。没有“我需要为编辑表单找到一个空间”，没有“如何在标签旁边隐藏这些输入”，没有“字体太大，无法编辑数据”。随意引入更大的字母间距、更大的字体大小和漂亮的页边距。没有附加编辑表单。考虑查询，而不是写。这就是我的看法。作为一名工程师，我不时地试图了解更多关于 CQRS 模式和它应用时带来的所有积极影响。

最近我发现了同样的想法和产品设计世界之间的联系，今天我想和你分享一下。当然，这不是“万能”的解决方案，在某些情况下，内联编辑表单比这里介绍的解决方案更好，但是我希望我的帖子可以帮助你重新考虑或平衡你在日常工作中做出的一些设计决策。

我真的很想知道你对此的看法。你觉得这样的视角有用吗？你认为内嵌编辑为用户提供了更好的体验吗？请在评论中告诉我！