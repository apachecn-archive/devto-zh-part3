# 避免使用 AWS 的简单电子邮件服务(SES)为 MailChimp 设置收件箱

> 原文：<https://dev.to/michael/avoid-setting-up-an-inbox-for-mailchimp-by-using-awss-simple-email-service-ses-477n>

MailChimp 已经成为电子邮件通讯的同义词。他们的服务功能丰富，并提供慷慨的免费层。当我想为一个副业项目创建时事通讯时，这是我选择的服务。但是使用 MailChimp 有一点很痛苦，那就是它需要一个经过验证的自定义域名，电子邮件。

什么是自定义域，电子邮件是一个电子邮件地址绑定到您自己的自定义域，而不是像`pizzaeatingdude@gmail.com`免费电子邮件。

真的，我不认为这是 MailChimp 的错，或者至少是他们所有人的错。我认为 Gmail 也有责任。曾经有一段时间，用谷歌为一个自定义域名设置电子邮件是免费的。那时候，在 MailChimp 上建立网站是一件轻而易举的事情，而且费用低廉。但是谷歌允许用户免费使用电子邮件的日子已经一去不复返了，现在他们每月收取 5 美元的附加功能的收件箱费用。

60 美元一年可能看起来不多，但对于一个试图保持敏捷和成本效益的独立黑客来说，这是很多的。另一个选择是 Zoho，当谷歌逐步淘汰他们的免费定制域名应用程序时，它作为一个选择而大放异彩。我在过去和他们一起建立了一些自定义域。尽管这项服务很慷慨，而且它完成了工作，但这也意味着又多了一个需要设置和管理的电子邮件帐户。

我想要的解决方案是一个托管自定义域收件箱的地方，这样我就可以使用 MailChimp 验证电子邮件，而不必管理新的收件箱，并保持相当低的成本。

考虑到这一点，我想我应该检查一下 AWS 的简单电子邮件服务，看看我是否可以利用它来满足我的需求。事实证明你可以。在较高层次上，您可以在 SES 上设置一个域，然后您可以设置一个规则，允许 SES 接收特定电子邮件地址的电子邮件，其作用类似于收件箱，然后您可以让该规则将所有邮件转储到 [S3](https://www.spellitout.xyz/s3-amazon-simple-storage-service/) 桶中，以便您可以阅读邮件的内容。

你可能读到这里会想，伙计，这太夸张了。可能是，但是它完全符合我的需要。我不想花很多钱来设置一个收件箱，我不想管理另一个收件箱，我想在 MailChimp 上验证我的帐户。使用 SES 的另一个好处是，我使用的是我已经拥有账户的服务 AWS。所以这意味着少了一件需要注册的事情。

## 避免使用 AWS 的简单电子邮件服务(SES)为 MailChimp 设置收件箱

首先，我要假设一些事情:

*   您已经有了 AWS 帐户
*   您已经有了简单的电子邮件服务设置，并且脱离了沙盒
*   您已经从注册商那里获得了一个自定义域名
*   你知道如何更新你的域名系统记录
*   您有一个 MailChimp 帐户

### 在 SES 上设置您的自定义域名

在 SES 中，你需要点击列在*身份管理*标题下的**域名**。然后点击**验证一个新域**。

当新域名的模式弹出时，在标记为 *Domain* 的字段中输入你想要验证的域名。您还需要**检查**选项以*生成 DKIM 设置*。最后点击**验证本域**按钮。

接下来是您需要为自定义域的 DNS 记录更新的各种值。这可以通过域名的注册商来完成。

给定的值是一个用于实际验证的 TXT 记录，两个用于设置 DKIM 的 CNAME 记录和一个用于接收发送到您的 SES 帐户的电子邮件的 MX 记录。

用这些记录更新 DNS 后，您的域现在应该得到验证。DKIM 验证可能需要更长的时间。

### “设置新收件箱”或在 SES 中设置电子邮件接收规则

现在你的域名已经通过验证，你可以在 SES 或者我喜欢称之为假收件箱中为它设置一个接收规则。这条规则的作用是允许电子邮件进入你想使用的地址，然后将邮件内容转储到 S3 桶中。

点击 SES 中*邮件接收*标题下的**规则集**链接。然后点击**创建规则**。首先，它会要求一个收件人—我使用了一个特定的用户，但在这个页面上还应该列出如何在各种变化中匹配地址的例子。输入您希望用于此规则的电子邮件用户，并点击**添加收件人**将其添加为收件人。然后点击**下一步**。

接下来，您将定义一个操作。我选择了 S3 行动。在选择操作时，您可以选择或创建一个新的 S3 存储桶来使用此规则。选择或创建新的存储桶。我没有考虑其他选项，而是点击**下一步**进入下一步。

在下一个屏幕上，您将被要求提供规则的更多细节。这里的选项肯定是可变的，建议以后再改。现在，我发现为了让 MailChimp 的验证邮件成功到达，你必须关闭一些东西。

在*规则名称*中填入有助于识别该规则的内容。然后你会想要检查这些选项:

```
Enabled                        [x]
Require TLS                    [ ]
Enable spam and virus scanning [ ] 
```

Enter fullscreen mode Exit fullscreen mode

虽然我怀疑是垃圾邮件和病毒扫描导致我的验证邮件被 MailChimp 退回，但我还是让 TLS 也处于选中状态，因为在验证完 MailChimp 帐户后，您将重新打开它们。

现在点击**下一步**，这将把你带到一个审查屏幕，然后点击**创建规则**。有了这个新的规则，你就有了一个低成本的收件箱，全部在你的 AWS 账户中。

### 设置 MailChimp 列表

在你的 MailChimp 账户中，点击顶部导航中的**列表**。然后点击**创建列表**。MailChimp 可能会问你是否更愿意使用标签而不是创建列表，但是点击**创建列表**，因为这才是我们真正为✌️准备的

在下一页，您需要填写列表的详细信息。特别是，显示 *Default From email address* 的字段，您将希望使用我们在 SES 中设置规则时使用的同一电子邮件地址。填写完所有细节后，点击**保存**。

现在，您应该已经创建了新列表。但是，在您开始发送此列表中的电子邮件之前，您需要验证您的电子邮件地址。要进行验证，请在您新创建的列表中进入**设置>列表名称和默认值**。

向下滚动，您应该会看到一个标有*活动默认值*的部分。这里你会看到一个类似于你之前创建列表时看到的字段，标签为*默认发件人电子邮件地址*，现在你的电子邮件已经填写完毕，还有一个小提示*你必须验证你有从 pizzaeatersunited.com 发件的权限*。您可以通过点击标签为*验证域*的提醒旁边的链接来完成。

现在，您应该在屏幕上看到一个模式，它解释了什么是验证过程以及它将发送验证电子邮件到的电子邮件。点击**发送验证邮件**。

立即发送一封验证电子邮件，你会看到另一个模式，要求你*输入刚刚发送的电子邮件中的验证码*。

切换回你的 AWS 账户，转到你指定的接收 SES 规则邮件的 S3 桶。您现在应该会看到一个文件，它应该与 MailChimp 发送的电子邮件相对应。虽然 S3 文件的标题将无法识别，但时间戳应该非常接近您系统上的时间。要在 S3 上阅读该文件的内容，您可以先将其下载到您的本地系统，然后在任何文本编辑器中打开该文件。

向下滚动文件内容，您会发现 MailChimp 要求的验证码。从邮件中复制并粘贴到 MailChimp 上标有*的模态字段，输入验证码*，然后点击**验证**🎉

现在你应该准备好你的 MailChimp 列表，开始收集读者，并为这些读者创造关系和价值。

### 安全 SES 规则

既然我们的 MailChimp 列表已经验证过了，我们就要回到 SES 规则，打开我们已经离开的选项— TLS 和扫描病毒和垃圾邮件。

为此，返回 AWS 并选择*简单电子邮件服务*，然后点击*电子邮件接收*下的**规则集**。接下来点击**查看活动规则集**。您应该会看到前面创建的规则被列出。单击规则名称以打开此规则的详细信息。在顶部，您应该看到要求 TLS 和启用垃圾邮件和病毒扫描的选项。所以现在你的规则应该这样设置:

```
Enabled                        [x]
Require TLS                    [x]
Enable spam and virus scanning [x] 
```

Enter fullscreen mode Exit fullscreen mode

一旦您选择了选项，点击**保存规则**，您的规则现在将被更新。

### 结论

哇哦，现在你已经有了一个新的 MailChimp 列表，它的发件人是一个自定义域电子邮件。你不必为了拥有另一个你可能不会管理的收件箱而注册另一个电子邮件服务。您还节省了一大笔钱，一切都在您的 AWS 帐户内管理。

虽然这个解决方案可以用来设置 MailChimp 列表，但肯定还有其他东西可以设置得更好。例如，设置一个简单的通知服务，每当有新邮件到达 S3 时就给我发邮件。或者设置一个 Lambda 功能，读取邮件内容，然后转发到我在免费 Gmail 账户上使用的个人电子邮件地址。在接下来的步骤中，我肯定会选择《云大师》，[凯尔·加尔布雷斯的大脑](https://twitter.com/michaelsoolee/status/1069045337518718978)，但现在我对这个设置很满意，现在我可以继续设置我希望将成为[的一个伟大的时事通讯](http://eepurl.com/dPF0uD)。

* * *

最初发布于[michaelsoolee.com](https://michaelsoolee.com/mailchimp-ses/)