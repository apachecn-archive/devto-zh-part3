# 讨论:您应该如何处理库代码中的错误？

> 原文:[https://dev . to/maxrimue/discuse-how-you-should-handle-errors-in-your-library-code-3d he](https://dev.to/maxrimue/discuss-how-should-you-handle-errors-in-your-library-code-3dhe)

我喜欢在空闲时间从事开源项目，因此在过去创建了一些 JavaScript 模块。大多数时候，它们就像真正的小型图书馆，只有一个用途。因为关于一个库的要点是在其他地方被使用，很可能在其他地方是其他人的代码，代码库，项目，你能想到的。因此，记录你的 API 当然是非常重要的(我发誓，这是我一直尽力做到的！😄).尽管如此，在创建一个库 API 时，我经常会有这样一个问题:

### [](#what-if-something-goes-wrong)出了问题怎么办？

让我们在这里想一个场景来说明我的问题。最近，我一直在开发一个小小的 JS 库，它接受一个带有时间和时区的字符串，并返回一个对象，提供 UTC 和本地时间的转换版本。用法如下所示:

```
import tizo from 'tizo';

tizo("19:30 cest").utc;
// → '[ 17, 30 ]' 
```

正如你所看到的，在上面的例子中提供了时区`cest`。我一直在想的是，如果传递给库的时区不存在怎么办？是因为它实际上不存在，还是`tizo`不知道它。

**我这里看到的两种方式是:**

1.  **“硬错误”，明显中断执行，例如通过承诺拒绝、错误抛出或`process.exit(1)`**
2.  **一个“软错误”，无论如何都尽力而为，例如返回一个说明错误的字符串，忽略有问题的参数，使用默认值等**

你怎么想呢?让我知道！