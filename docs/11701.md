# 整理代码:KonMari 风格

> 原文:[https://dev . to/kaydacode/整理你的代码-konmari-style-3b64](https://dev.to/kaydacode/tidying-up-your-code-konmari-style-3b64)

如果你最近在网飞、互联网上或与任何人交谈过，你可能听说过玛丽·近藤或“整理秀”，也就是和玛丽·近藤一起整理。玛丽的方法(KonMari)专注于在整理过程中激发快乐。正如 best 在她的[网站上所说](https://konmari.com/pages/about)

> “KonMari Method 鼓励分类整理，而不是按位置，从衣服开始，然后是书籍、纸张、杂物，最后是感性物品。只保留那些能打动心灵的东西，丢弃那些不再能激发快乐的东西。感谢他们的服务，然后让他们走。”

软件的架构经常被比作房子的结构——房子的基础和建筑块。那么，将我们的代码与我们家中的杂乱进行比较难道没有意义吗？一些家庭有更多，更少，但几乎总是有改善的空间。玛丽·近藤专注于创造一个能激发快乐的有条理的家。我们开始吧！我们可以从整理专家那里得到什么，以使我们的代码更好地成形并激发快乐？

第一步:识别快乐。对一些人来说，这可能是抱着一只小狗的感觉，但对技术专家来说，这可能是打开一个文件并能够轻松导航的感觉。确定什么能让你在阅读代码时感到快乐，并致力于在你自己的代码库中获得这种感觉。

注意:采取敏捷的方法，让这个过程为你的团队/工作流程服务。

正如 KonMari 所做的那样，让我们开始按类别分解事物。

**挑战:**打开你的项目，按类别整理东西。对于大多数代码库，我认为这是特性驱动的，但是使用对你的团队最有效的。

对于 KonMari 方法中的每个类别，Marie 要求房主收集符合该类别的物品，将它们放在房间中央，然后分别拿着每个物品。能激发快乐的东西放在“保留堆”里，不能激发快乐的东西放在“丢弃堆”里。

**挑战:**我们不能到处去删除难看的代码，但是让我们找出一件真正困扰你或你的团队的代码库的事情(方法、文件等)，并从它开始。
这个挑战的想法不是去重新编写你的整个应用程序，而是随着时间的推移找到需要改进的地方。从最困扰你的事情开始，专注于它，当你准备好的时候，继续下一个项目。

*   将大函数分解成较小范围的方法。
*   更新变量名和函数名以提供更多信息。
*   进行小规模、频繁的变更和提交，以便于跟踪。
*   简化相似或重复的代码。
*   为了更进一步，我建议查看一下[清洁代码](https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882/ref=sr_1_2?keywords=clean+code&qid=1550847596&s=gateway&sr=8-2)和[通过重构阅读](https://bambielli.com/posts/2016-08-21-read-by-refactoring/#)中的实践。

在将这些基础知识应用到我一直在做的回购中后，我开始看到其他需要改进的地方。更干净的代码表明，以前没有测试过的逻辑并不容易编写测试。

挑战:看看你重构了什么，确保有适当的单元/ UI 测试，添加任何缺失的，并删除任何不必要或多余的测试。一个好的经验法则是首先测试逻辑。任何 if 语句、数据突变等。

我发现的最后一个大的改进是删除不必要的视图。当你有很多贡献者的时候，事情会随着时间变得混乱。这只是发展的事实。使用一个视图调试器，可以让你看到你的应用程序的层，可以让你大开眼界，知道什么是多余的或者从来没有被使用过的。

**挑战:**识别有一个子视图的超级视图，使超级视图变得无关紧要。识别隐藏且从不显示的视图。识别从未添加的视图等。清理这些视图将有助于应用程序的性能和维护。

同样，请随意修改它以适应您的工作流程和团队风格。不要重写应用程序，而是尝试将一件小事融入到你目前正在做的工作中。随着时间的推移，小的改进会越来越多。我对应用来自《Marie，Clean Code and Read by Refactoring》的灵感的结果非常满意，我想你也会如此。如果你尝试了，一定要回来分享它是如何进行的！

重构快乐！