# 如何像专业人士一样在生产中调试？

> 原文:[https://dev . to/vaidhyanathan 93/how-to-check-and-fix-production-issue-in-10-minutes-3 flm](https://dev.to/vaidhyanathan93/how-to-check-and-fix-production-issue-in-10-minutes-3flm)

[![Debug in production ](../Images/d25afa2b3ce6d1c5d342c739578d49ad.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--6CO2bRjw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/hh2ys7h5qfm23gvqkjf5.jpg)

如果您正在开发面向客户的产品，那么您可能已经经历了生产问题。对于其他人来说，生产问题是生产中的高级错误，在很大程度上影响了客户。

然后他们的生产问题发生了，因为忽略了测试用例，没有测试用例或者环境问题等等。

当出现生产问题时，我会遵循以下事项。您的团队成员/支持人员/Twitter/其他来源可能会通知您该问题。

# [](#step-1-classify-the-issue010-seconds)第一步:对问题进行分类(0-10 秒)

检查和分类的问题是什么类型。该问题通常属于以下类别之一。

1) DOS -人们可能会抱怨存在连接超时问题
2)响应缓慢-几乎所有/某些类型的请求都很慢，这可能会导致第一种情况
3)行为不当-产品无法正常工作
4)登录问题-基于会话的问题。高错误率——这些是只有开发人员知道的隐性问题。

# [](#step-2-check-your-monitoring-tool1-5-mins)第二步:检查你的监控工具(1 - 5 分钟)

几乎所有的组织都会有一些监控服务器的工具。如果你是一个新的创业公司/产品，没有使用任何工具，这是检查它的正确时间。

按以下顺序检查统计数据

## [](#average-transaction-time)平均交易时间

DOS 和慢速请求。检查所有请求是慢请求还是特定类型的请求。如果所有请求都很慢，那么这是当前应用服务器/依赖服务(如 MySQL、Redis、Kafka 等)的问题。因此，请检查相应机器的以下信息

## [](#machine-status)机器状态

包括检查 CPU(> 80%)、空闲内存(<10%), Active threads/ process(>分配的 90%)、处理前的请求等待时间(< 2s), GC Time(If you use GC based language >10 秒)、空闲磁盘大小(< 5%)、堆内存(

1.  如果出现上述任何情况，请采取以下必要步骤。
2.  高 CPU -等待一段时间/检查需要很长时间的线程/进程。这将始终是代码问题或增加机器大小
3.  自由内存-总是代码问题。检查上次部署或增加机器大小
4.  活动线程-活动线程太多是因为太多的请求受到下游/代码问题的影响。相应地检查 5。GC 时间-你的代码是问题所在。检查日志以查看 GC 发生的位置。获取一个线程转储并检查它。6.空闲磁盘大小——你的代码在机器中写了一些东西，但没有被清除。检查您的应用服务器的文件夹式磁盘使用情况。
5.  头内存-你的代码使用了很多对象，没有清除。
6.  依赖服务——检查上面你的应用程序依赖的所有服务，如 MYSQL、Redis 等

上述大多数情况都可以通过还原您的代码来解决。

## [](#logs5-10-mins)日志(5 - 10 分钟)

如果以上结果一无所获，监控你的日志中最近的错误。它会让你对正在发生的事情有一个大概的了解。如果您正在使用一些日志工具，请使用 dashboard 查看错误模块或区域。

所有上述检查应该揭示所有需要修理的必要的东西。如果没有，请立即咨询您团队中的专家。

# [](#step-3-check-affected-areas1-10-mins)步骤 3 -检查受影响的区域(1 - 10 分钟)

检查受问题影响的区域。如果是面向客户，则立即通知受影响的客户或受严重影响的客户。下游服务有可能受到影响。检查以下列表，并在受影响的区域打勾

1.  数据库/缓存/下游服务数据损坏
2.  数据未发送到下游
3.  复制滞后

# [](#step-4-fix-the-issue-amp-deployment-3-30-mins)第 4 步:解决问题&部署(3 - 30 分钟)

如果问题很严重，通过制作快速补丁来解决问题，并更新所有服务器。它应该是坚实的，可能需要批准。如果不是，试着运行所有的测试并解决主要问题。
针对下游相关问题编写一个脚本来纠正数据。如果数据完全损坏，请使用备份进行恢复，但需要客户关注。

# [](#step-5-rca-and-test-case)第五步:RCA 和测试用例

放下整齐的 RCA，通知团队。写下所有这些场景的测试用例。

这就是我所遵循的，它使我能够在 10 - 20 分钟内解决生产中的问题。

**如果你遵循一些好的实践。让我知道。**