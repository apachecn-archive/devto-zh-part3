# 我厌倦了由不可靠的测试导致的不可靠的 CI/CD 管道

> 原文：<https://dev.to/blockjon/im-sick-of-unreliable-cicd-pipelines-caused-by-flaky-tests-g0g>

如果你有一个 200 名工程师的公司，他们每个人每周浪费 1 小时等待重试古怪的测试，你可能每年损失 500，000 美元。我甚至无法告诉你，在我工作过的大多数公司，部署失败的频率是多少。

我已经开始着手减少 80-90%的古怪测试。我正在开发一个通用的片状测试管理工具，任何人都可以使用，不管你如何运行测试，你使用什么编程语言，或者你使用什么测试框架。如果你的代码库中有一些奇怪的测试，这篇文章是为你准备的。

当你公司的一个测试出现问题时，你通常会发现自己处于这样一个位置，几十个工程师都在试图同时解决同一个问题，但都是孤立的。每个人都认为他们不知何故破坏了一个测试，只有在 Slack 中的某个人意识到他们都在修复相同的东西之后，团队才意识到你承受了多大的损失。

大约 5 个月以来，我一直在研究一种我称之为“弹性”的东西。如果你想尝试一下，我邀请你来看看。

Flaptastic 可以立即检测到单元测试何时失效，这样您就可以避免浪费时间去修复您没有破坏的代码。它使用模式匹配来判断测试失败是因为它有价值，还是根本原因是测试问题。

“杀手”特性是一个复选框，它将立即禁用所有特性分支和拉请求中的任何单元测试。换句话说，在一个测试被标记为跳过之前，你不需要等待每个人都改变基础。Flaptastic 的独特方法允许对每个人立即禁用单元测试。

我找不到和它完全一样的东西。我听说过谷歌使用的一个内部工具，它有点类似，但没有设置为与现有项目集成。到目前为止，尝试过这种方法的人都很喜欢。我们这次不收费，因为我们想把重点放在使它尽可能有用，并得到正确的功能上。

如果你在一家大公司有古怪的单元测试，请联系我，我会和你一起帮助提出一个策略来增加你的测试健康，即使你最终不使用这个工具。

如果你想使用 Flaptastic，你唯一的要求就是你的代码存储在 GitHub 上，如果你的团队使用 Slack 的话还有加分。