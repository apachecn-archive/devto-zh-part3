# Git 基础——你需要的唯一介绍！

> 原文：<https://dev.to/areknawo/git-basics-the-only-introduction-you-ll-ever-need-6d2>

**这篇文章摘自[我的博客](https://areknawo.com)，所以请务必查看更多最新内容。**

Git 是一个大概所有程序员都知道的**版本控制系统** (VCS)。它使管理您的项目、文件以及对它们所做的更改变得更加容易和直观。但是，由于它是一个庞大而复杂的系统，初学编程的人可能很难学会它。建立回购协议是一个简单的部分——但之后的事情可能有点棘手。这就是为什么在今天的帖子中，我们将从头开始复习 Git 的基本**概念**和**功能**！我们将探索您需要知道的一切，以便在日常工作中最好地利用 Git。我们开始吧！

# 版本控制系统

让我们从理解 Git 背后最基本的概念开始，一些通常被认为是理所当然的东西——版本控制系统(VCS)。它是什么，为什么 Git 实际上是它的多种实现之一？为了简单起见，用一个例子解释一下——假设您正在创建一个只有一个文件的项目。在这样的场景中，版本控制帮助你**记录**和**存储你在整个时间**对你的文件**所做的变更**。每当您更改文件中的某些内容并保存它时，您就提交了一个更改。VCS 还能让你给你的修改添加评论，让事情有条不紊，并在给定的修改发生之前知道你想把你的文件恢复到什么状态。

所以，描述了这段时间内的变化，你可以稍后再回来-简单。但是，假设你想和你的朋友一起做你的项目。因为您只有一个文件要处理，并且在不同的时间处理，所以管理这样的开发可能有点问题。别担心——VCS 也能帮上忙！它有助于跟踪特定用户对特定文件所做的更改，这样你就可以决定如何在合并过程中将它们合并成一个文件。通过这种方式，VCS 现在可以存储有关特定更改、提交时间和用户操作的数据。

上面介绍给你的概念是 VCS 背后非常基本的想法。它是 Git 和其他类似工具实现的核心。当然，Git 还存储了更多的数据，但是我希望您明白这一点。

# 去吧

现在，让我们回到 Git 本身。正如我提到的，它只是最受欢迎和最广泛使用的 VCS 之一。它的流行肯定是由于它的一些最重要的优势。首先，它是**分布式的**，这意味着你实际上没有一个活跃的互联网连接，只是在你的本地机器上运行 Git。这仅仅归功于它的架构和**性能**。按照我们的思路，与 VCS 的其他实现相比，使用 Git 相对容易。

# 入门

理论已经过时，是时候真正使用 Git 了。为了简单起见，我们将在我们的本地机器上进行，因此，如果您还没有安装 Git，那么您必须安装 Git。大多数 Linux 发行版通常内置 Git，在其他情况下，你可以从其 [**官方网站**](https://git-scm.com/) 下载它(顺便查看文档)。

```
git init projectName
cd projectName 
```

Enter fullscreen mode Exit fullscreen mode

上面的命令将初始化由`projectName`指定的目录中的 Git 项目(如果还不存在的话将被创建)。如果不指定任何名称，将在当前目录下创建 Git repo。做完这些，我们要进去了！

在我们继续之前，我想先做一个简短的声明。事实上，在现实世界的项目中，Git 项目通常存储在**平台**上，比如带有 **GUI** web 客户端的 GitHub，或者类似 [GitKraken](https://www.gitkraken.com/) 的东西。不过，为了简单起见，我们只使用命令。那是因为我觉得这样最容易掌握基本概念和相关命名。同样的道理也适用于那些只会让事情变得更简单的 GUI 工具。

# 凭证

如前所述，Git 存储关于提交给定变更的用户的信息。但是，为此，它需要一些关于贡献者的附加信息。这就是为什么在我们开始处理任何文件之前，我们首先必须设置我们的**凭证**——在大多数情况下，**姓名**和**电子邮件**就足够了。

```
git config --global user.name "User"
git config --global user.email "user@user.com" 
```

Enter fullscreen mode Exit fullscreen mode

使用上面的命令，我们能够全局设置我们的名字和电子邮件地址，这意味着它将用于我们从我们的机器上进行的任何提交。`user.name`设置用户名称(一个用于在线使用)和`user.email` -他的公共电子邮件。也就是说，`git config`命令通常用于设置 Git 内部使用的不同变量，但是这里(以及大多数情况下)名称和电子邮件是我们继续前进所需要的。

# 处理文件

假设您已经有了或者刚刚创建了一个新文件，其中包含一些您想要提交到 Git 存储库中的内容。你可以这样做:

```
git add . 
```

Enter fullscreen mode Exit fullscreen mode

使用上面的命令，我们将所有的文件(你可以用整个目录或一个文件一个文件地指定它们)添加到某个容器中，也就是说，我们**准备我们的更改**，让 Git 注意到它们已经被更改——创建、更新或删除。这一步通常由现代代码编辑器自动管理，如内置 Git 支持的 VS Code。您必须知道我们的更改还没有提交。目前，Git 只知道它们已经被制造出来了。为了实际提交它们，也就是保存到我们的 Git 回购历史中，我们将不得不使用另一个命令:

```
git commit -m "Commit message" 
```

Enter fullscreen mode Exit fullscreen mode

`git commit`命令不需要将任何文件或目录作为参数，因为它们已经因为之前的 add 命令而已知。相反，这里我们可以传递一些关于当前提交本身的附加信息。在这个例子中，我使用了许多有用选项中的一个(太多了，无法一一列举)- `-m` ( *消息*)向我的当前提交添加一些文档，就像我们之前讨论的那样。一个很好的技巧是，如果你有一些长消息要写，你可以使用多个 m 选项，因为它们将被连接成单独的段落。但是，这肯定是 GUI 使事情变得更容易的一个例子。

# 协作

虽然使用 Git 肯定有助于您跟踪您的个人项目，但是当在**协作**中使用时，可以体验到它的真正威力。GitHub 和其他由 Git 支持的平台上有无数的开源项目就是很好的例子。让我们看看它是如何工作的...

## 树枝

多人在同一个项目中工作的问题表现为管理重叠的变更，同时又不干扰彼此。Git 对此也有一个解决方案——它被称为**分支**！

分支，把 Git 看作一棵树，帮助人们有他们单独的版本来工作。分支可以基于彼此，主分支称为*【主】*，在您第一次*【无分支】*提交后创建。

```
git branch -c my-branch 
```

Enter fullscreen mode Exit fullscreen mode

您可以使用带有一些附加选项的`git branch`命令来管理您的分支。这些例子包括`-c`、`-m`、`-d`，分别代表复制、移动和删除。前两个选项使命令接受两个参数，默认情况下使用当前分支。如果您出于任何原因想要一个全新的分支，您不必使用任何附加选项。

## 结账

在创建了一个新的分支之后，您必须“移动”到给定的分支，以便能够应用您从现在开始提交的所有操作。要改变你当前的分支，你需要使用`git checkout`命令。

```
git checkout my-branch 
```

Enter fullscreen mode Exit fullscreen mode

## 合并

最后，由多人完成的变更需要某种程度上**合并**在一起。为此，Git 提供了一个直观的命令- `git merge`。通过一个简单的调用，您可以将提供的分支与当前分支合并。为了使过程更容易，Git 会在每次文件更改之间发生冲突时询问您，或者在不需要时自动进行。

```
git merge my-branch 
```

Enter fullscreen mode Exit fullscreen mode

# 遥控

虽然 Git 在本地工作得非常好，但是在协作时，需要将您的存储库存储在每个项目协作者都可以访问它的地方，以使开发过程更容易。为此，您需要一个**远程存储库**，存储在您的 Git 服务器或 GitHub 或 GitLab 等平台上。

## 克隆

访问远程回购最常见的方式是克隆它。为此，您可以使用众所周知的`git-clone`命令。

```
git clone https://github.com/vuejs/vue.git 
```

Enter fullscreen mode Exit fullscreen mode

该命令自动创建所有的**远程分支**并检出主分支(通常称为*“主”*)。

## 遥控

如果你想多玩玩遥控器，你可以用遥控指令。

```
git remote 
```

Enter fullscreen mode Exit fullscreen mode

如果不提供额外的子命令或选项，remote 命令将列出您的**遥控器原点**的所有名称，例如，克隆后，唯一可访问的遥控器名称是*“原点”*。

如果您想将给定的 remote 添加到某个现有的存储库中，而不是仅仅克隆它，您可以使用`git remote add`命令。只需为您的新遥控器传递一个简短的名称，它的原始网址，你就完成了！

```
git remote add vue https://github.com/vuejs/vue.git 
```

Enter fullscreen mode Exit fullscreen mode

## 推&拉

要访问来自远程源的数据，你需要先**获取**它。一个简单的命令叫做`git fetch`。

```
git fetch 
```

Enter fullscreen mode Exit fullscreen mode

作为一个参数，您可以传递想要获取的远程源的名称。默认等于*“原点”*。

通过使用`git fetch`,您可以检索其他合作者提交的变更和分支。然后，您必须(很可能)通过使用`git merge`将其与您自己的本地更改合并。事实证明这是很常见的事情，Git 为此提供了一个**快捷方式**，以`git pull`命令的形式，自动获取远程分支并将其与当前本地分支合并。

```
git pull 
```

Enter fullscreen mode Exit fullscreen mode

如果你不能**将变化**应用到远程源，那么访问远程源将毫无意义。要将您的更改从当前分支推送到远程分支，您可以使用`git push`命令。

```
git push origin master 
```

Enter fullscreen mode Exit fullscreen mode

`git push`接受两个参数——第一个参数指向远程起点的名称，第二个参数选择远程起点的分支来推动变更。很直接，是吧？

我个人认为，远程起源入门对于初学者来说可能有点难。看到遥控器和分支之间的明显区别很重要，这在一开始可能有点困难。只要记住遥控器是...远程并包含其中的分支。

## Rebase

如果您已经对您的本地副本进行了多次提交，那么在这种情况下，您可能希望将它们全部应用于在此期间被其他合作者更改的当前代码库。这就是`git rebase`命令发挥作用的地方。它**将您在给定分支(默认为当前分支)中完成的所有提交**重新建立基础，并将它们应用到主分支之上。

```
git rebase 
```

Enter fullscreen mode Exit fullscreen mode

# 信息

我们知道 Git 不仅存储文件，还存储很多数据，那么，我们如何**访问**它呢？Git 为此也提供了很多有用的命令！大概最重要的一个就是`git status`。通过使用它，您可以接收关于 Git repo 的当前状态的基本信息，比如当前暂存的文件。您也可以传递路径(文件或目录)作为参数来限制您的结果。

```
git status 
```

Enter fullscreen mode Exit fullscreen mode

另一方面，`git log`输出所做的全部**变化历史。这包括一些重要的数据，如**提交 ID** ，这在以后可能会非常有用。由于这个命令的结果可能相当巨大，你总是可以通过可选的 path 参数来限制你的结果。** 

```
git log 
```

Enter fullscreen mode Exit fullscreen mode

当访问前面提到的提交 ID 或分支名称等时。你可以使用它和`git diff`命令来显示当前工作树和给定实体之间的实际**差异**。它非常有用，被所有 Git GUI 工具所利用。

```
git diff my-branch 
```

Enter fullscreen mode Exit fullscreen mode

最后，除了分支、提交和远程，Git 还为您提供了**标签**。与分支不同，它们不是为了处理并发工作流，而是为了**记录项目的给定状态**。这对于**标记**代码库的不同构建、版本和发布非常有用。你的标签可以有自定义名称，可以用`git diff`区分，用`git tag`从当前工作树中创建。

```
git tag custom-tag 
```

Enter fullscreen mode Exit fullscreen mode

# 变化

## 藏物

当然，除了上面提到的添加、存储和检索信息的好处之外，Git 还允许您做更多的事情。这包括明显的变化，如删除和编辑，但也创建仓库。你可以通过`git stash`命令来使用它们。它们允许你创建当前工作(WIP)的临时记录，以后再回来。

```
git stash 
```

Enter fullscreen mode Exit fullscreen mode

上面最基本的命令创建了一个新的存储，稍后可以通过:
看到

```
git stash list 
```

Enter fullscreen mode Exit fullscreen mode

为了恢复给定的存储(甚至在不同的提交之上)，你需要使用`git stash apply`命令，并通过引用 ID、整个 reflog 语法或其他方式指定存储([见文档](https://git-scm.com/docs/git-stash))。关于 stash 引用和 ID 的信息，您需要查看`git stash list`命令的输出。

```
git stash apply stash@{0}
# the same as
git stash apply 0 
```

Enter fullscreen mode Exit fullscreen mode

一般来说，存储提供了一个很好的方法来创建当前工作流的*【脏】*快照，只是为了以后再使用它们。它们也可以被广泛地操作，因为，使用上面的命令，我们仅仅触及了表面。

## 复位&恢复原状

自然地，对文件的更改，甚至是删除都可以以一种可预测的方式进行(用`git add`)和提交。但是，您可能最终需要改变 Git 本身的某些方面，而不是改变文件。我的意思是希望，比如说**解除**你的阶段性变化或者类似的事情。

最简单的方法就是把你的文件重置到它之前的状态，在这个过程中有效地解除它的状态。为此，我们将使用`git reset`命令取消所有当前暂存的更改。当然，你也可以以路径的形式给它提供一个参数，使你的操作更加集中，或者提供一个提交 ID 来**重置**你的文件到给定的状态。

```
git reset 
```

Enter fullscreen mode Exit fullscreen mode

Git 被证明非常有用的另一个时候是当你需要及时返回并且**回复一些你以前做过的提交**。显而易见的`git revert`命令允许您这样做，只需指定提交 ID。然后，可选地，它将引导您完成恢复冲突内容的过程。

```
git revert fc95eb54362878829042ac2c6b3a34bd208b2c04
# example commit ID 
```

Enter fullscreen mode Exit fullscreen mode

请记住，提交会存储对不同文件所做的更改——包括不同代码行(loc)的位置和其他细节。这样，如果在这段时间内进行了更多的提交，恢复给定的提交仍然可能会产生与以前不同的文件。

# 告诫

在快速浏览完 Git 基础知识之后，我想指出两点，在我看来是关于 Git 的非常重要的细节。

首先，您需要知道，与许多其他 VCS 实现相比，Git 关注的是内容而不是文件。这意味着 Git 对您的代码有更好的了解。它不仅跟踪文件的位置，还跟踪文件中 loc 的位置。这是使用 Git 时经常被认为是理所当然的事情，但你必须知道这只是一个额外的非常**有用的特性**。

第二，你不应该把 Git，事实上还有任何其他的 VCS，仅仅看作是一种形式的备份。当然，它们允许你存储文件的过去版本，但是正是这些变化的精确存储使得 VCS 独一无二。你知道谁，为什么，什么时候做了改变。这使得 Git 更类似于 T2 日报，而不是单独的备份。

# 想要更多？

Git 是 VCS 的一个非常好的设计和有趣的实现。对于初学者来说很容易掌握，同时仍然为高级的 T2 专业版用户提供大量的功能。也就是说，尽管本文已经做了非常全面的介绍，但是 Git 中仍然有无数的选项、命令和许多不同的产品。在项目越来越大的世界里，VCS 是一个必要条件。令人欣慰的是，Git 只是让这种必要性变成了更好、更好、更快、更无缝、更受欢迎的选择。

那么，**你喜欢这篇文章**吗？如果你想在这个博客上以类似的形式或其他方式阅读更多关于 Git 的内容，请告诉我，下面是**的回应**。另外，请在下面的评论区**留下你的想法。请**一如既往地分享文章**如果你觉得它有帮助，并考虑**在 Twitter 上关注我****[**在我的脸书页面**](https://www.facebook.com/areknawoblog) 关注 [**我的个人博客**](https://areknawo.com) 。感谢阅读，祝**有美好的一天**！****