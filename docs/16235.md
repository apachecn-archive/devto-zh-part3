# C 语言中的函数指针

> 原文:[https://dev.to/noah11012/function-pointers-in-c-3ah0](https://dev.to/noah11012/function-pointers-in-c-3ah0)

我的上一篇文章是关于一个大多数初学者第一次面对时都觉得很有挑战性的话题:[双指针](https://dev.to/noah11012/double-pointers-in-cc-2n96)

那么，在这篇文章中，我们将看看另一类指针:函数指针

本质上，函数指针就像它们的普通对应物:一个保存对象内存地址的变量。函数指针完成了这个角色，但是它们引用的对象有一个特殊的性质:它们是可调用的。当一个对象可调用时，可以使用操作符`()`。C 中唯一可调用的对象是函数，但在 C++中，一些附加的对象是重载调用操作符的类。

定义函数指针的语法被认为是语言中比较古怪的部分，一些初学者觉得很难理解。所以，我们将从一个基本的例子开始:

```
void (*function_pointer)(void); 
```

为了更好地帮助我们学习函数指针的语法，我们将慢慢地梳理它。马上蹦出来的一件事就是`*function_pointer`周围出现了大括号。这些括号很重要，没有它们，它的意思完全不同。除去括号，它意味着一个没有输入并返回一个`void`指针的函数。

```
void *function_pointer(void); 
```

使函数指针成为指针的另一个原因是符号`*`的使用。所有的指针都有它们，函数指针也不例外，但它们都在大括号内。其他的都可以读成一样。为了帮助读取函数指针，去掉括号和`*`，像读取普通函数一样读取它。

示例:

```
int *(*function_pointer)(int *, double *); 
```

拆下支架和`*`。

```
int *function_pointer(int *, double *); 
```

更干净，更容易用我们的眼睛解析！我们现在知道这个函数指针指向一个接受一个`int *`和一个`double *`并返回一个
`int *`的函数。

现在，就像其他学到的东西一样，函数指针有什么用呢？

函数指针可以作为参数传递给另一个函数。这些函数指针被称为回调。例如，假设我们有一个函数，它从互联网上下载一些东西，并带有一个函数指针。当下载完成或发生错误时，我们希望执行回调。

```
void download_file(const char *file, void (*callback_function)(int status_code)); 
```

使用我们去掉大括号和`*`的方法，我们得到一个函数指针，它指向一个接受`int`但不返回任何东西的函数。

可以使用函数指针的另一个例子是事件编程。事件编程最简单的形式就是当事件发生时，这样做。函数指针的完美位置！

假设我们有一个 GUI 小部件库，并且有一个函数可以设置一个回调函数，当检测到一个按钮被点击时就会调用这个函数。

```
struct Button;

void button_set_click_event(Button *button, void (*on_click)(Button *button)); 
```

我相信现在您已经可以解析回调指向的内容了。

## [](#summary)总结

函数指针的概念很容易学习，但是语法不是最棒的，当试图分析它们时会让人感到困惑。我希望这篇文章对你有所帮助，你可能有的任何困惑现在都消失了。