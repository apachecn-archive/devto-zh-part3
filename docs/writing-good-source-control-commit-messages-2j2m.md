# 我如何编写源代码管理提交消息

> 原文：<https://dev.to/rachelsoderberg/writing-good-source-control-commit-messages-2j2m>

伴随着提交到源代码控制的好消息的概念似乎是人们要么完全遵循要么完全放弃的事情之一。幸运的是，我现在的工作主要是一个人，如果我的提交信息没有帮助，我只能怪自己，但我仍然试图遵循一些规则，以在未来保持清醒。这些不是行业规则，只是我自己的标准，帮助我维护我和我的团队的代码库。

#### 规则 1:好的信息从好的故事卡片开始

有些人称之为故事卡，或任务，或任何其他名称，指的是必须从一个不太容易管理的主要任务(又名史诗)中完成的工作的一部分。不管你怎么称呼它们，许多项目都有某种形式的任务列表，我将这个列表用于我的提交消息，供以后参考。一些项目管理工具，如吉拉或 Mingle，会自动将卡片分配到一个数字上，这个数字会随着你的进展而递增。不幸的是，我们在工作中使用的工具没有这样的功能，但我会手动为每个卡片标题添加一个数字，以获得相同的好处。每张故事卡都应该有一个基本的标题，解释需要发生的事情。关于解决方案和其他必要信息的描述可以更深入。

当我写下我的提交信息时，我从我提交的作品的故事卡片编号开始(你没看错——我试图每次提交一张卡片！)在提交消息中提供卡号的好处是能够准确引用所做的事情。如果您需要回到一周前，找出导致新 bug 出现的更改，您可以查看过去一周的提交消息，并查看哪些卡被处理，然后前往您的故事板进行进一步调查。

#### 规则 2:好的信息是描述性的

考虑一下，你被分配了一个任务，要检查一个开发伙伴上个月的提交。也许浏览这些变化可以让你知道是什么导致了这个刚刚出现的疯狂的新 bug。你打开源代码控制管理器，看到类似这样的内容:
2019 年 4 月 18 日——提交材料
2019 年 4 月 15 日——asdf
2019 年 4 月 5 日——在周五的会议之前
2019 年 4 月 4 日——做了材料
2019 年 4 月 1 日——产品卡

当然，您可以查看每次提交中更改的每个文件，以了解发生了什么...但是如果有更好的方法呢？如果每条源代码控制消息都向您简要介绍了为该提交所做的更改，会怎么样呢？此外，如果他们更频繁呢？4 月 5 日到 4 月 15 日之间可能会发生很多事情！我试着每天至少做一次承诺；如果我在短时间内做了很多重大的改变，一天几次。

重要的是给每条提交消息增加一些价值，不管你是否希望将来你或同事(或替代者)阅读它们。这个简单的行为可以节省大量的时间，让他们能够一目了然地引用每一组主要的变更，而不需要检查每一个。

#### 规则 3:好的信息解释什么，而不是如何或为什么

通过卡号将你的提交信息链接到你的故事板的另一个好处是不必重复你自己。如果你的卡片是描述性的，展示了解决问题的步骤，创造特征，等等。，你不需要在你的源码控制中写第二遍那些东西，因为如果你跟着卡号走就能找到！

您的源代码管理消息应该包含一些信息——我尝试提供一个句子来简要解释所做的更改。一些例句可能是“添加客户项目选择清单”或“从主页删除折扣按钮”。对于跨越较长时间段的卡，我将进行几次提交，并简要更新这段时间内发生的工作:“为 Salesforce 登录功能实现绑定创建”。

如果有人需要追溯到上周出现的 bug 的源代码控制，他们可以通过阅读消息来鸟瞰这段时间发生的变化。如果他们看到一条突出的消息，可能与代码的问题部分有关，他们可以很容易地引用这个数字，并在相关的故事卡中查看更详细的视图。故事卡将向他们提供改变的方式和原因。

#### 好的信息看起来像...

那么好的源代码控制提交是什么样子的呢？以下是我最近参与的主要项目中的几个提交示例:
Card #213 -更新了报表格式
Card #213 -添加了报表和第一个报表以获取和更新所有未处理的订单
Card #208 -更新了折扣查询
Card #205 -在关闭/电子邮件对话表单中仅需要 SOM _ sales orderid
Card # 204-在 SalesOrder XML 创建之前移动了 SOM_UserDef5 和 SOM_FOB 更新

TLDR:在进行源代码管理提交时，我尽量让我的消息简短、有描述性，并保持常规的格式风格。我还努力在每次提交时保留一个主要的变更集或卡片，以避免混淆变更集和消息。