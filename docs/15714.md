# 测试自动化的 10 个技巧

> 原文:[https://dev.to/juperala/10-tips-for-test-automation-2pc3](https://dev.to/juperala/10-tips-for-test-automation-2pc3)

***迷失在测试自动化中？以下是我挑选的 10 个让你的自动化项目保持在正确轨道上的技巧。*T3】**

开始测试自动化很容易。互联网上有许多自动化工具和框架以及大量资料可供使用。有了这些，即使没有测试自动化开发经验的测试人员也可以相对快速地启动并运行他们的第一个测试。

然而，一个小而简单的自动化项目往往会变得越来越复杂。随着时间的推移，将会添加新的测试，支持各种产品变体和版本的需求变得明显，测试环境和工具会发生变化，人们会离开和加入项目，并且会发生许多其他不可预见的变化。如果没有规划和明确的重点，自动化项目很容易变得臃肿和偏离轨道，导致大量的维护负担，最终将减少自动化带来的好处。

这篇文章将给出十点建议，帮助你开始自动化项目并保持在正确的轨道上。这个列表并不完整，但是强调了许多自动化项目中常见的问题和挑战。

# [](#automation-is-a-tool-for-testing-not-a-replacement)自动化是测试的工具，而不是替代品

IT 行业普遍的误解是所有的测试都应该自动化。在现实中，没有 100%的测试自动化——或者至少不划算。

自动化测试仅仅是确保软件按预期工作的检查。因此，自动化是一个很好的工具，用于检查当添加新产品特性时没有什么被破坏，以及新特性按照规范工作。然而，在实践中，检查产品的每一个可以想象的细节是没有意义的，因为这最终会使你的测试套件不可维护。当涉及到识别未知和未指定的产品行为时，自动化也提供非常有限的支持或不提供支持。

在给定的环境和约束条件下，了解开发的功能是否真正满足客户的需求仍然需要大量的人类思考、交流、合作和探索。创建自动化，使测试人员能够专注于本质，而不是做非常适合自动化的重复性任务。

探索性测试和智能自动化策略是寻找 bug 的杀手组合。通过让自动化处理重复性的任务，让测试人员专注于批判性思维和脑力劳动。专注于能给你的团队带来最大价值的自动化。T3】

# 你的测试是一个产品

许多公司拥有定义良好的开发高质量软件产品的过程和实践，但是当涉及到开发和维护测试资产时，可能缺乏几乎所有的质量控制。与全职软件开发人员相比，具有有限软件开发和编码经验的测试人员也可以开发和维护测试资产。

虽然测试通常不会随产品发布一起交付给客户，但是测试的生命周期可以与产品的生命周期一样长。今天编写的测试可能会在产品交付后使用数年，以确保未来的维护更新和发布。

为了确保您的测试资产是可靠的、可维护的和易于扩展的，应该实施良好的软件开发实践。同样要关注选择正确的自动化工具和框架来支持你的测试需求。

在测试资产开发中需要考虑的一些事情:

*   版本控制、分支、标记、将测试链接到产品版本。
*   统一和一致的编码约定。
*   自描述测试代码命名(类、方法、变量、提交)。
*   可配置性与硬编码值和幻数。
*   质量实践和学习:代码评审，结对编程和 mob 编程。

编写测试自动化是软件开发——就这样对待它。专注于拥有易于维护的高质量测试资产，并遵循良好的开发实践。测试套件的价值在于提供关于产品的信息。不可靠和不明确的测试套件会产生错误信息，这比根本没有测试更糟糕。T3】

# [](#there-is-no-i-in-automation)自动化中没有“我”

任何测试的价值都在于向利益相关者提供关于产品的信息。记住，自动化不应该只是你个人的追求。

在开始自动化之前，获得团队和组织的承诺。一起定义自动化的预期目标和范围，并将这些包括在您的团队 DoD 中(完成的定义)。在开发人员和测试人员的支持下，作为一个团队一起工作，实现你的目标。

确保自动化测试的结果总是最新的，并且对您的团队和其他利益相关者可用，这样他们就有最新的信息来支持开发决策。只自动化提供有意义信息的测试；自动化没人关心的东西是没有意义的。

从自动化中获得最佳价值需要整个团队和组织的承诺。一起努力。创建测试，为您的利益相关者带来价值和有意义的信息。T3】

# [](#solid-base)坚实的基础

大多数开始涉足自动化的测试人员通常都有使用 UI (GUI)自动化工具的第一次经历。在 web 上下文中，通常是 Selenium WebDriver 或一些测试框架在幕后使用 Selenium。这非常有意义:作为一名测试人员，您显然希望端到端地测试整个应用程序，安装所有的螺母和螺栓。Selenium 是一个很好的工具，它提供了大量的资源和例子。

唉，最终你会发现 UI 测试是最难自动化的测试之一。首先，他们可能在项目进度方面有问题。通过用户界面测试产品意味着你需要一个有效的用户界面。然而，这经常会受到不断的变化，微调，并可能在项目的最后定稿。有时，即使是最小的 UI 更改也会破坏您的自动化脚本，需要过多的维护和重构工作来跟上最新的 UI 设计。其次，在整个系统就绪的情况下，基于 UI 的端到端测试的实现有一个趋势，那就是执行起来更慢，而且更脆弱，因为有更多的移动部分。设置测试环境和测试开发通常成本也更高，因为需要配置和管理的部分更多。

团队通常过于看重在真实环境中使用产品 UI 进行端到端的测试。目标是在功能实现的范围内尽早开始自动化。向左移动。拥有大量具有详细粒度的精确测试，保持从测试到开发的快速反馈循环，并致力于开发对不相关的变化健壮的测试。从单个单元到 API，最后到 UI 层，在每一层都有相关的测试。通常这种方法被描述为测试金字塔，这个想法最初是由 Mike Cohn 和其他几个人提出的，在这里你应该有坚实的单元和集成测试基础，检查测试中要覆盖的大部分内容。

测试金字塔的概念也有些争议，是社区中众多讨论的主题。我个人的意见是把它作为指导方针，但不要把它看得太严格，当作不能违反的规则。举例来说，自动化的端到端测试比集成测试多并不是错误的。同样，可靠的单元测试覆盖所需要的成本和努力在需要详尽使用 mocking 的环境中会令人吃惊——测试执行速度并不反映测试实现速度。瞄准左移，不要只局限于一个级别的测试，调整你的工作方式，在你的领域和环境中找到测试的正确平衡。

***创建单元和集成测试的坚实基础，以捕捉产品的大部分变化，并伴随着验证整体功能的一组较小的正面和负面端到端测试。用探索性测试填补空白。*T3】**

# [](#dont-fall-in-love-with-your-code)不要爱上你的代码

经常可以看到测试资产充满了过时的信息，比如未使用的类和方法、注释掉的代码行、过时的配置文件和过时的测试用例。

拥有过时的代码和测试数据会使项目难以学习、遵循和工作。实施良好的编码实践，保持代码库没有过时和不推荐的代码，这些代码可能成为错误信息和技术债务的来源。养成日常习惯，从存储库中清理过时的测试资产。

***避免技术债务和误解的风险。如果测试资产——无论是代码、配置、测试还是其他任何东西——变得过时，就彻底淘汰它。您有版本控制工具来跟踪旧版本，以防您需要恢复到旧版本。*T3】**

# [](#as-weak-as-your-test-data)和你的测试数据一样弱

要测试删除银行帐户，您需要先创建一个银行帐户。要测试用户登录，您需要创建一个注册用户信息。几乎所有的测试都依赖于测试数据的使用。如何创建用于测试目的的数据取决于测试范围和上下文。在单元和集成测试中，可以使用合适的模拟接口和在测试设置时初始化的内存数据库来生成测试数据，而系统级测试可能依赖于用 SQL 脚本填充的真实数据库，等等。

特别是对于复杂系统的端到端测试，自动创建真实的测试数据可能并不总是微不足道的，并且您可能会在您的自动化测试中使用手动创建的测试数据。虽然使用手工创建的测试数据在某些情况下可能是一个适用的解决方案，但是它通常有许多限制，可能会在以后对您不利。除非定期维护，否则手动创建的数据可能会过期，如果其他测试依赖它，您可能无法编辑或删除它，并且使用相同的数据运行多个测试可能会导致剥落和意外的行为。最坏的情况是使用共享的测试数据，比如自动化和探索性测试都使用的数据，这可能会不可控制地改变它的状态。

找到自动创建测试数据的方法。每个测试都应该依赖于在测试执行时可能使用、修改或删除的唯一数据。在测试执行之前，确保测试数据始终处于已知状态。还记得用生产使用中预期的真实数据集大小来测试产品。

***自动化的成功取决于测试数据的质量。避免使用手动配置、共享或不可控的测试数据。找到在测试环境中模拟、填充或虚拟化数据源的方法，以适合您的测试需求。*T3】**

# [](#works-on-my-computer)在我的电脑上工作

我打赌每个人都听过有人反驳“在我的电脑上工作”？在调查和修复与各种测试环境配置中的差异相关的问题上浪费了太多的时间，导致软件行为异常。

这些问题通常是手动设置和配置测试环境的结果，导致不同环境之间的配置差异。手动配置非常耗时，容易出现人为错误，不可重复，并且缺乏对以前配置的回滚支持。因此，在你的环境中起作用的可能在你同事的看似相似的环境中不起作用，反之亦然。

另一个挑战是不稳定的测试环境，在测试设置和执行过程中可能会随机失败。不稳定的环境会在错误的测试结果方面产生错误信息，耗尽测试的可信度，并且分析这些错误会占用实际测试工作的宝贵时间。在最坏的情况下，这些环境问题可能会抵消自动化带来的好处。

找到自动设置和管理测试环境的方法。使用配置管理和虚拟化工具(例如 Docker、Puppet 等。)来创建基础设施即代码配置，该配置可以在整个开发过程中使用，以便为不同的阶段和需求设置可重复的开发和测试环境。

***专注于创建一个从开发人员工作站到生产环境的管道，环境以类似的方式工作。避免手动配置，使用合适的工具为测试环境的创建、配置和部署创建自动化脚本。*T3】**

# [](#timing-is-everything)时机决定一切

世界是异步的。无论您的测试是期待来自本地 GUI、web 应用程序(浏览器)、API 还是专有接口的响应，预期的事件都很可能以异步方式发生。如果您的测试没有为此做好准备，它们可能会变得不可靠，并由于测试中的应用程序的未知响应时间而意外失败。

这方面的典型例子是基于 Selenium WebDriver 的浏览器测试，除非使用正确的 web 元素状态的适当等待，否则该测试非常不可靠。如果测试没有在尝试与元素交互之前等待元素出现并可见，测试可能会意外失败。这些类型的问题通常通过在交互之前添加固定延迟(睡眠)来解决。虽然这是一种常见的做法，但这是一种糟糕的方法，它使得测试执行缓慢，没有稳定性的保证，除非使用过长的延迟。在这种情况下，首选的解决方案是设置一个显式等待，直到元素准备好进行交互。

不管使用什么样的测试工具和环境，重要的是理解时间处理对你的测试的影响，以及如何正确地减轻它们以避免测试失败。识别测试交互中的异步事件，并应用解决方案来处理它们，没有固定的延迟。

***在你的测试中，知道预期会发生什么，然后等待。不要依赖于固定的延迟，这会降低测试的执行速度，而且不能保证稳定性。*T3】**

# [](#simplify-isolate-the-unknown)简化、隔离未知

当开发自动化测试时，尽可能保持简单。保持测试简短，避免在单个测试(套件)中添加太多内容。创建专注于产品特定特性的测试套件。

创建原子的和有重点的测试。原子测试是顺序独立的，不依赖于其他测试的执行或结果。使用合适的安装和拆卸功能来保持产品处于已知状态，以实现原子性。每个测试应该只有一个测试焦点。测试失败应该明确地识别出产品中有问题的部分，而不需要过多的结果分析。

测试还应该对测试范围之外的变化有弹性。避免在您定义的测试范围之外使用产品特性，这些特性可能会受到意外变化的影响。例如，如果您正在测试一个嵌入的应用程序，它是一个更大的 web 门户的一部分，那么创建只关注那个特定应用程序的测试。当与测试中的应用程序进行交互时，创建一些选择器，这些选择器对于当前测试范围之外的门户页面中可能发生的变化具有弹性。

保持你的测试简单。测试应该直接告诉产品的哪个部分失败了。避免没有已知范围的模糊散弹枪测试。创建对定义的测试范围之外发生的变化有弹性的原子测试，以避免测试维护工作和假阴性。T3】

# [](#dont-repeat-yourself)不重复自己

当处理多个项目，或者甚至是包含多个测试用例的单个项目时，避免编写重复的测试代码。如果在多个测试套件和项目中使用相同的测试步骤或功能，则将该功能模块化为它自己的测试库，该测试库可以被导入并在其他项目中重用。

创建可重用的测试模块和库有很多好处。首先，创建新的项目将变得更加容易，因为你将拥有越来越多的可重用功能，而不是总是从头开始。第二，当产品功能改变时，它将简化测试资产的维护。当功能发生变化时，只需要在测试代码中的一个点上进行更改，而不是重构所有相关的测试项目和测试用例。

当您开始为您的产品创建可重用的测试库时，不要忘记在您的团队和组织中记录和交流这些库的可用性。否则，就有个别团队创建重复测试库的风险，从而导致混乱和额外的维护工作。

***重用，重用，再重用。开发测试模块和库来统一你的测试行为。避免重复代码和在多个地方修复相同问题的需要。*T3】**

# [](#final-thoughts)最后的想法

开始测试自动化可能会让人感到不知所措。如果您是一名没有早期编程经验的自动化测试人员，在并行学习编码和自动化基础知识时，学习曲线会特别陡峭。但是不要停下来。坚持下去，学习并记住没有人在一开始就是大师。

好消息是，有很好的资源和社区来支持您的自动化之旅。当遇到困难或不确定继续的最佳方式时，寻求帮助。在互联网上查看可用的文档、教程和资源，阅读一本书，或者在测试社区(如测试部)中提问。

也可以查看一下你附近的培训和商业课程。有许多具有自动化专业知识的优秀服务和公司来支持、指导和确保在您的组织中成功采用测试自动化。

***开始，继续，连接。有很棒的社区、活动、培训&合作伙伴来支持您的自动化挑战。*T3】**

* * *

*这是转贴自 [Bitfactor 博客](https://bitfactor.fi)* 的两篇原创文章