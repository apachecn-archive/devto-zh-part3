# 今天我学到了关于谷歌云平台的知识

> 原文：<https://dev.to/mryap/what-i-learnt-today-about-google-cloud-platform-ccj>

### 计费

在 GCP，虚拟机以一秒为间隔计费。

虚拟服务器每分钟的单位成本取决于服务器的特性，如虚拟服务器的数量、内存量以及运行虚拟机的区域，这些都会影响成本。一天中的时间不是一个因素，您在虚拟机上运行的应用程序类型也不是一个因素。

您希望估计 GCP 资源的成本，您将使用计算引擎和 Kubernetes 引擎服务来获得有关您将使用的虚拟机的信息。

以下命令将停止名为 web-server-1 的虚拟机。

```
gcloud compute instances stop web-server-1 
```

`gcloud compute instances`，表示您正在使用虚拟机，后跟`stop`命令和虚拟机的名称。

您的管理团队正在考虑 3 家不同的云提供商。您被要求总结计费和成本信息，以帮助管理团队比较云之间的成本结构。关于 GCP 的虚拟机成本，您会提到以下哪一项？

虚拟机以一秒钟为增量计费，成本随机器类型中的 CPU 数量和内存量而变化，您可以创建定制的机器类型，可抢占虚拟机的成本比标准虚拟机低 80%，Google 为持续使用提供折扣。

### 云记忆器

Cloud Memorystore 是唯一一款设计用于在内存中缓存数据的 GCP。云 SQL 是一种关系数据库服务，可能是后端数据库的一个好选择。Cloud Spanner 是一个全局关系数据库，当您需要一个全局一致的数据库时，它是一个很好的选择。云数据存储是一个文档数据库，适用于产品目录、用户配置文件和其他半结构化数据。

云内存存储用例:您的部门正在部署一个具有数据库后端的应用程序。您关心数据库服务器上的读取负载，并希望内存中有可用的数据，以减少响应查询的时间，并减少数据库服务器上的负载。

### Dataproc

Dataproc 被设计为在批处理和流模式下执行工作流，这使得选项 A 是正确的。Bigquery 是一种数据仓库服务。数据存储是一个文档数据库。AutoML 是一个机器学习服务。

### IAM

所有者、编辑者和查看者是谷歌云平台中的三个原始特权。

是对用户的抽象。它们还可以表示代表人类用户或 GCP 中的虚拟机运行的进程的特征。身份与虚拟机 id 无关。角色是可以授予身份的权限集合。

组织、文件夹和项目是用于管理组织层次结构的组件。存储桶、目录和子目录用于组织存储。

### 网络

`subnet`不是`gcloud`创建防火墙的参数。`source-ranges`用于指定规则适用的网络流量来源。

### gcloud 命令

假设有一个运行 Cloud SQL 的 mysql 数据库叫做 ace_exam_mysql 来连接一个运行 Cloud SQL 的 MySQL 数据库。命令是

```
gcloud sql connect ace_exam_mysql --user = root. 
```

正确的命令从`gcloud sql`开始，而不是从`gcloud connect`开始。需要术语 sql 来标识 GCP 服务。命令行不需要密码；将提示用户输入。

### 堆栈驱动日志记录

要查看 App Engine 项目的管理活动、系统事件和数据访问，可以使用 Stackdriver 日志记录服务来查看审计日志

### 云功能

您想要创建一个云函数来将音频文件转换成不同的格式。音频文件将被上传到云存储中。您希望在文件上传完成后立即开始转换。您将在云函数中指定哪个触发器来使它在文件上传后执行？

安:t0]

### 部署

可以在云控制台的“创建部署”页面中设置部署的哪些参数？

您可以指定容器映像、集群名称和应用程序名称以及标签、初始命令和名称空间。

### 监控

您刚刚创建了一个虚拟机，您希望监控该虚拟机，并在 CPU 平均利用率连续五分钟超过 75%时向您发送一封电子邮件。要实现这一点，您需要对虚拟机做些什么？

```
Install the monitoring agent on the virtual machine 
```

### 安全

您正在运行管理客户个人信息的应用程序，并且希望利用 GCP 虚拟机可用的增强安全功能。在创建虚拟机以获得这些增强的安全功能时，您会启用哪个选项？

```
Shielded VM is a set of enhanced security mechanisms, including Secure Book, Virtual Trusted Platform Module (vTPM), and Integrity monitoring. Integrity monitoring and secure boot are included with Shield VM and are not enabled separately. 
```

### 关于云存储的 4 件事

*   云存储桶可以有保留期。
*   云存储不提供对存储在存储桶中的文件内的数据的块级访问。
*   云存储旨在实现高耐用性。
*   生命周期配置不能用于将存储类别从区域更改为多区域。(一旦存储桶被创建为区域或多区域存储桶，就不能更改为其他存储桶)

### App 引擎

您正在 App Engine 中运行生产应用程序。您希望升级应用程序，但希望将中断服务的风险降至最低。最好的方法是创建新版本的服务，将一小部分流量路由到该版本，并监控错误或其他问题。利用应用引擎版本和流量分流能力。如果有问题，您可以在向少量用户展示新版本的同时发现它。

### 可抢占的虚拟机

可抢占的虚拟机可以在任何时候关闭，但如果它们运行超过 24 小时，就会被关闭。

### BigQuery

要从命令行估计 BigQuery 扫描的数据量，请键入

```
bq --location=[LOCATION] query --use_legacy_sql=false --dry_run [SQL_QUERY] 
```

正确的 bq 命令结构，包括`location`和`--dry_run`选项。此选项计算估计值，而不实际运行查询。

您收到了来自物联网(IoT)系统的大量数据集。您希望使用 BigQuery 来分析数据。您将使用什么命令行命令来使数据可用于 BigQuery 中的分析？

```
bq load --autodetect --source_format=[FORMAT] [DATASET].[TABLE] [PATH_TO_SOURCE] 
```

在所有选项中都正确指定了 autodetect 和 source_format 参数以及源路径。

一个客户询问在 GCP 部署数据仓库的建议。客户希望最大限度地减少花费在系统管理上的时间。大多数使用数据仓库的分析师都知道 Microsoft Excel、SQL 和 Python。他们希望数据仓库基础设施能够按需增长，而不需要数据库管理员修改数据库配置。我可以推荐什么 GCP 服务？

BigQuery 是一个数据仓库和分析数据库管理服务，可以最大限度地减少管理开销。不需要配置存储；这是由谷歌管理的。BigQuery 使用 SQL 作为查询语言。云存储是一种对象存储系统，不适合数据仓库。数据存储是一种对象存储，不适合使用 SQL 进行分析。Bigtable 不适合数据仓库中的大型分析查询。Bigtable 不支持 SQL。

### 堆栈驱动程序

哪种 Stackdriver 服务最适合识别应用程序代码中的瓶颈？

*   Cloud Trace 是一个分布式跟踪应用程序，它提供了代码不同部分运行时间的详细信息

*   监控用于在资源未按预期运行时通知 DevOps 工程师。

*   日志记录用于收集、存储和查看日志数据，尽管日志条目可能有助于诊断瓶颈，但它并不是专门为此而设计的。

*   调试用于生成快照和注入日志点。