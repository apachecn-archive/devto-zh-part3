# 为 95%而不是 5%优化您的编程决策

> 原文：<https://dev.to/nickjj/optimize-your-programming-decisions-for-the-95-not-the-5-2n42>

**本文最初发布于 2018 年 11 月 26 日:[https://nickjanetakis . com/blog/optimize-your-programming-decisions-for the-95%](https://nickjanetakis.com/blog/optimize-your-programming-decisions-for-the-95-percent-not-the-5-percent)**

* * *

几周前，我在 HackerNews 上看到了一个有趣的帖子，标题是 *" [我为什么要写 33 个 VSCode 扩展，以及我如何管理它们](https://news.ycombinator.com/item?id=18386883) "* 。

这个标题真的吸引了我的注意，所以我做了我们大多数人都会做的事情，在阅读文章之前直接查看评论。

##### 这就是我发现这个评论的地方:

> 我在添加插件或扩展环境时遇到的问题是，最终我不得不处理同事的非扩展默认安装。我最终过于依赖插件。

阅读这本书真的击中了我的要害，因为很久以前我也是这么想的。

##### 但后来我偶然发现了这样的评论:

> 我非常不喜欢那种认为你应该 100%的时间束缚自己以适应可能影响你 5%时间的潜在情况的推理。
> 
> “我不使用多显示器，因为有时我只带一台笔记本电脑”。
> 
> “我不定制我的 shell，因为有时我必须通过 ssh 连接到服务器”
> 
> “我不定制我的编辑器，因为有时我不得不使用同事编辑器”。

我们在这里，因为我认为这是一个真正被低估的话题。

## “假设”条件

很多年前，我记得避免使用 Bash 别名，因为你知道，如果我 ssh 到一个服务器，它可能没有这些别名，然后我就完了！

我正在为那 5%的人优化我的开发环境，而它所做的只是将事情设置成一场持续的斗争。

疯狂的是，当时我觉得这很有意义。说服自己同意上面列出的一些以及更多的报价是非常容易的。

但是针对 5%的优化是针对“假设”场景优化的一个例子。

你竭尽全力确保你所做的事情足够通用，可以在任何地方工作，但你真正做的是在 95%的情况下让事情变得更难，但那 95%才是最重要的。

#### 它影响你写的代码

这也不仅仅与开发环境决策相关。这是影响你写的代码的东西。

如果您试图从一开始就编写完全通用的东西，因为*“如果我制作另一个应用程序，它需要注册用户怎么办？”*那么你通常会使你最初的实现变得更糟。

如果没有对你正在开发的东西有一个深刻的理解，也没有花时间根据真实的经验提出好的抽象概念，当你甚至还没有为一个用例进行编程的时候，你只是在黑暗中希望你的通用用户系统能为所有的情况工作。这怎么可能呢？

#### 它影响你如何设计你的应用

当你盲目追随谷歌和其他大公司的做法时，你是在以一种稍微不同的方式为那 5%的人优化。

你不只是让你的应用程序启动并运行，然后看看它是如何进行的，而是尝试做出决策，以便你的应用程序可以由分散在 5，000 名开发人员中的 100 个不同团队开发。

与此同时，在几乎所有新项目的情况下，都是你自己开发应用程序。

#### 它会影响您部署应用的方式

当您试图优化您的部署策略，以便从第一天起每秒处理 10 亿个请求时，您只是让自己陷入了一个基于理论的研究的无限循环。

它通常包括花费几个月的时间来研究如何建立一个神秘而完美的自动修复、自动扩展、多数据中心的 Kubernetes 集群，但它没有任何结果，因为这些解决方案不够通用，无法在没有大量特定于应用程序的细节的情况下适用于所有情况。

你有没有想过为什么谷歌，网飞，GitHub 等等。仅提供有关其部署基础架构的零星信息？这是因为它优化了他们获得更好工具的机会。

让人们对他们的开源项目感兴趣，还有什么比让这些工具看起来尽可能有吸引力，然后用*来支持它更好的方式呢？“我们用它来服务一个月 200 亿次页面浏览，所以你知道它是有效的！”*。

这肯定是一个令人信服的故事，但它绝不是简单的插入一个像 Kubernetes 这样的工具，并拥有一个完美的集群，当涉及到你的应用程序时，它应该以你想象的方式工作。

很容易看到一个基于玩具示例的演示，并看到它的工作，但所有这些都使工具从外面看起来像天堂。这不是故事的全部。

一旦你开始尝试让它为一个真正的应用程序工作，或者更具体地说，为你的应用程序工作，这一切都会分崩离析，直到你花时间真正了解扩展一个应用程序需要什么(这不仅仅是挑选工具)。

创建这些工具的公司已经投入了多年的时间，并且拥有这些知识，但是这些知识是特定于它们的应用的。

他们可能会利用特定的工具来简化流程，像 Kubernetes 这样的工具绝对有价值，但这些工具并不是全部。

如果把你的应用程序放在一个 40 美元/月的数字海洋服务器上，让你实现零停机部署，并在数万人使用你的应用程序的情况下每月处理 200 万次页面浏览，而不用担心 Kubernetes 或试图颠倒你的整个应用程序架构来使用“无服务器”技术，会怎么样？

#### 我以前也是这样做的

我在这篇文章中说了很多“你”，但我并没有特别针对你，也没有把你当成整个编程社区。

我已经做了和上面写的所有事情类似的事情，但是用了不同的工具和不同的决定，因为技术已经随着时间的推移而改变了。

我清楚地记得这一切也是什么时候在我脑海中发生的。那是大约 8 年前 Node 第一次出现的时候。

我记得使用 PHP、编写应用程序、发布应用程序、做自由职业者等都相当开心..但后来我看了 Ryan Dhal 在 Node 上的演讲(他创建了 Node ),我开始连续喝了大约 6 个月的 kool-aid。

像*这样的想法:“天哪，事件循环！”*、*“OMG 网页秤！”*、*“1 语言用于后端和前端？闭嘴，拿走我的钱。”现在我的脑海里一天到晚都在嗡嗡作响。*

因此，我所做的只是阅读有关 Node 的书籍，几乎不写任何代码，直到最终我开始写代码，虽然我学到了相当多的编程模式，并且作为一名开发人员总体上有所提高，但我意识到 Node 位并不重要。

这主要是因为后端和前端开发总是会有上下文切换，即使您对两者使用相同的语言，并且许多语言都有帮助并发的解决方案。

那 6 个月是我一生中最没有收获和最不开心的日子。不是因为 Javascript 太难了，而是因为当你置身事外，什么都不做，还在想“如果……会怎样”，这真的会让你付出代价。

我仍然很感激我经历了那个阶段，因为它真的让我大开眼界，彻底改变了我对所有事情的看法——甚至是编程以外的事情。

##### 过早优化是万恶之源

唐纳德·克努特在 1974 年写道:

> 过早优化是万恶之源。

针对 5%进行优化是一种过早的优化。也许对您的开发环境选择来说没那么重要，但对其他情况来说肯定如此。

将你的决定建立在优化 95%的基础上，保持简单，然后看看效果如何。换句话说，在真正需要的时候进行优化，而不是因为“如果”而优化。

**您针对这 5%进行了哪些优化？下面让我知道。**