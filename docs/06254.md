# 今年要回答的关于微服务的五大问题

> 原文：<https://dev.to/rsachenko/five-big-questions-about-microservices-to-answer-this-year-28i5>

试想一下:到 2022 年，90%的新应用将使用微服务。好吧，也许那个数字有点夸张，但即便如此，你也不能忽视它。

围绕微服务的争论引发了我作为软件工程师在帮助企业主为他们的项目寻找最佳解决方案以及开发基于微服务的应用程序时所面临的一系列问题。如果你还需要一些澄清，这里是我的五大常见问题(FAQ)列表——根据我的个人经验和深入研究得出的答案。

## **是什么让微服务如此受欢迎？**

在某种程度上，这项技术的流行归功于早在 2009 年就开始从传统的整体数据中心迁移到基于云的微服务的网飞。当时“微服务”这个词甚至还不存在——这个词是在 2012 年创造的，并在 2014 年被广泛使用，此前阿德里安·科克罗夫特公开分享了他在网飞担任云架构师的经历。 ***“由松散耦合的元素组成的面向服务的架构，这些元素具有有界的上下文”*** 科克洛夫特先生是这样定义新模型的。今天，网飞赢得了奥斯卡，全球约有 1 . 37 亿名订户。显然，如果没有微服务向数百万观众全天候传输数字内容，这样令人印象深刻的扩张是不可能的。亚马逊、易贝、推特、优步和贝宝等科技巨头都遵循了网飞的道路，他们的成功故事激励着其他人。

## **微服务如何帮助商家成功？**

***松散耦合的元素，阿德里安·科克罗夫特提到的*** ，给予组织持续增长的强大基础。与传统的整体方法相反，松耦合允许您单独开发、测试、发布、部署、集成、维护和更新每个服务，而无需对代码的其余部分进行更改。

换句话说，系统的每一个部分都作为一个独立的业务单元运行特定的流程。比如你想用微服务打造一个[餐厅 app](https://da-14.com/blog/how-to-build-food-delivery-app) ，就意味着每一个功能部分(餐厅管理、菜单列表、订单管理、支付系统等)都会有自己的生命周期和生态系统。

## **这样的做法有什么实际好处？**

**1)更富有成效的发展。**在微服务生态系统中，每个产品团队都专注于一个特定的独立模块，遵循众所周知的亚马逊原则“你构建它，你运行它”。较小的服务可以开发得更快，而一个团队不会等待另一个团队发布他们的部分代码。

**2)更快的扩展和更短的上市时间。**您可以按需添加新服务或更新和扩展现有服务，而不会影响整个系统。新特性的发布速度更快，风险更低，因为您不需要重新部署整个应用程序，也不会出现停机。

**3)更好的独立零件质量。**在孤立的代码片段中找到并消除 bug 比在一个巨大的整体应用程序中寻找故障源更容易。更重要的是，如果一个模块出现故障，特定的服务失败，在大多数情况下，整个系统将继续运行。

4)在技术方面更加灵活。您可以用 Java 构建一个服务，用 JavaScript 构建另一个服务，然后切换到 Python——这取决于可用工程师的专业知识和特定模块的需求。开发团队可以自由地[为每个新的微服务选择一个新的堆栈](https://da-14.com/blog/how-to-choose-technology-stack-application-development)。

5)可重用性。登录系统或文件上传器等小型服务可以在公司内部共享。

## **微服务真的是‘微’吗？**

实际上，它们的大小差别很大。正如企业软件设计大师 Martin Fowler 所解释的，“微服务是一个标签，而不是描述”。

有时候，一个小型的微服务是由一个人来设计、部署和支持的。然而，大量的微小组件会导致不希望的(和不必要的)项目复杂性。通常，一项服务的团队规模应该是[六到八名专家](https://www.sam-solutions.com/blog/microservices-architecture-for-enterprises-benefits-of-implementation/)，这符合亚马逊对两个披萨团队的定义(一个可以吃两个披萨的团队)。

## **为什么微服务可以变成噩梦？**

你已经知道小服务是如何帮助大公司变得巨大和强大的，但众所周知的是“伴随着巨大的力量而来的是巨大的责任”。温斯顿·丘吉尔、富兰克林·罗斯福和蜘蛛侠在不同时期提出的想法仍然与现代技术相关。

微服务带来的一系列重大责任包括:

1)公司重组。迁移到微服务需要整个商业文化和结构的全球性改变。您需要创建自主的“构建并运行”团队，而不是紧密束缚的部门，该团队对微服务从开发到部署的整个生命周期拥有完全的所有权。这种权力下放需要时间，而且并非在所有情况下都有回报。此外，教会一个团队敏捷、独立和负责并不总是容易的。

2)管理多个独立单位。你可以把好的基于微服务的软件看作一个蚁群，每个成员都独立工作，但是朝着一个共同的目标。然而，与昆虫不同，代码片段没有天生的本能来决定正确的行为。如果组织、部署和管理不当，数百个单独的部分可能会变成一场噩梦。您需要高水平的专业知识来从一开始就想出体系结构，并用松散耦合的元素构建一个健壮的系统。

有一些现代的开源解决方案(如 [Kubernetes](https://kubernetes.io/) )可以帮助编排微服务并对其进行监控和扩展。然而，使用 Kubernetes 环境的公司仍然面临着各种各样的[挑战](https://thenewstack.io/top-challenges-kubernetes-users-face-deployment/)，涉及:

*   安全(46%)；
*   网络(42%)；
*   仓储(41%)；
*   监控(38%)；
*   复杂性(37%)。

**3)处理微服务之间的通信。**作为一个单一的成熟机制，微服务需要通过 HTTP REST APIs(同步通信模型)或消息队列服务(异步通信模型)进行交互。由于网络延迟和处理消息所需的时间，这种持续的“交谈”会导致较差的性能。你应该仔细选择流量类型，以减少不利因素。虽然异步方法更复杂，但它受益于较低的延迟。

4)高失败风险。越来越多的组件通过网络进行交互，这就产生了更多的出错点。

**5)支持问题。**有了微服务架构，你就有了几十个甚至上百个片段，生活在不同的环境中，使用不同的语言、API、数据库、配置文件等。这种多样性使得支持应用程序变得棘手。是的，在理想情况下，对微服务的更改不应该影响其他独立组件。然而在实践中，一个地方的更新有时需要同时重建几个服务以保持它们的兼容性。

## **你现在真的需要微服务吗？**

答案取决于你的商业抱负和你公司的实际规模。尽管面临各种挑战，微服务架构已被证明是提供大量服务的企业、大型部门或业务单位的绝佳解决方案。快速扩展和快速进行客户驱动的变更的能力带来了显著的竞争优势。

然而，如果你管理一家小公司，想要建立一个简单的商业解决方案或者计划一个快速启动来验证你的商业想法，经典的整体方法将更适合你的目标。

最大的错误是，仅仅因为每个人都在谈论一项热门技术的美好未来，就盲目地接受它的宣传和追随。即使是著名的微服务倡导者也建议谨慎，并承认只有当您的系统大到在自身重量下开始崩溃时，微服务才有回报。否则，坚持使用具有良好模块化的整体架构，而不是其中的独立服务。