# 聊天-BaaS:聊天后端即服务

> 原文：<https://dev.to/karsens/chat-baas-chat-backend-as-a-service-1khk>

[![baas](img/e4951d25b2b5763573d263bded589d18.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--dN5sNCs1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/ievgxhvzeczybt1bhi76.jpg)

聊天很普遍。通过 [Communify](https://communify.cc) ，我正在解决一个许多软件公司已经解决、正在解决、并将会解决的问题。我是为 React 解决的——Native+Node JS+graph QL+MySQL，在 Linux 上。非常好的组合。

如果我能为聊天创建一个 BaaS，并且一劳永逸地解决这个问题，会怎么样？

已经有很多聊天室了。检查 https://sendbird.com/。如果你读了他们的博客，你也会找到其他人。但是它超级贵，我不知道他们是否采取了正确的方法。

因此，在这篇文章中，我将详细阐述我认为创建聊天工具的正确方法。

# 型号，前端和后端

每个聊天帖子都有{用户(id，姓名，头像，pushtoken)，频道，群组，信息(类型，文本，喜欢等。)、createdAt、updatedAt }并且每个频道具有{ id、频道、组、用户、createdAt、updatedAt、lastMessage、lastMessageText 等...}

整个前端超级方便。我可以开源整个聊天列表的前端，聊天，聊天细节，行动，以及一切，并将其耦合到一个默认的 BaaS，人们可以创建一个帐户，每月免费获得 100 万条消息，并为更多支付更多。

最酷的事情是，我将前端开源为一个组件，这是一个数据耦合和导航耦合的本地组件。你只需要给你的令牌，它与你的后端连接。

在后端，它有一些查询和变化:

查询:服务器信息，文章，订阅，我的订阅；
突变:createPost，likePost，createSub，createPM，deleteSub，toggleSub，setRead，upsertSub。

在前端，它实际上可以处理所有的推送通知。这是一件大事。如果他们使用这个，大量的代码可以留给创业公司。用户模型是非常轻量级的，并且可以由初创公司自己扩展。

BaaS 很酷的一点是你可以为它创建多个前端。我也可以创建一个应用程序，你可以创建自己的“应用程序”。然后，它在应用程序中创建整个聊天界面。使用 react-native-web，我还可以在 web 上公开聊天界面。

这个想法可能会占用我代码库的很大一部分。就其本身而言，这是一个大的创业公司，这只是一个小的重构，让我自己去创造和开始使用...由于许多应用程序的最大部分是聊天，这是一个缩短编程时间以创建有用应用程序的好方法。

这个应用程序在 1000 年后仍然有用。想想吧！

# 缩放

如果你想到瓶颈在哪里，那就更酷了。我认为，如果这是一个真正好的产品，你不需要营销或任何东西。没有销售。我认为，如果这是一个真正好的产品，你所需要的就是良好的规模。它是如此的普遍，以至于特性是你可以完成的。经过几年的编程，它已经具备了你所需要的一切。所以特性不是一个瓶颈，你需要很多人来完成。还剩下什么？缩放。所以扩展是瓶颈。那么，我们如何成功扩展呢？最棒的是，每一个想要使用它的平台都是独立于其他平台的。所以他们必须独立扩展。另一件很棒的事情是，即使是扩展也可以自动化。数据库可以自动创建。对于小客户来说，每个数据库一台服务器就可以做几台后端服务器。这可以自动化。一旦我们有需要分片的超级大客户，他们有两个选择:

1)向我们支付专家的费用，使切分流程自动化

2)将他们的应用拆分成单独的社区，例如基于位置的社区。

因此，如果我掌握了基本的 CI 自动化，我可以自动化每个社区大约 1 万名在线用户，甚至更多。

这是个好主意。

# 该不该做？

我认为，如果 Communify 没有像我预期的那样迅速恢复，看看这个可能是一个聪明的想法。看起来 MessageBird 做得非常好。首先，概念验证应该很简单。只需在 communify 的服务器之外，自动为每个后端用户创建一个新的 SQLite，并创建一个漂亮的 onboarding 页面，询问您的应用程序名称，并在 web 上显示您的应用程序。它应该只是一个屏幕，你可以把它放在你的 RN-app 中。超级简单。如果这证明是成功的，我可能会为应用程序创建更多的积木。更多的小老板。例如一个用于时间线。一个给朋友。一个页面。一个相册。可能性是无限的。

为了进一步了解为 Communify 创建一个 BaaS 是否真的那么容易(可能有些东西我没有看到，因为我没有看代码),我应该看看后端代码，看看我是否真的考虑到了所有的连接....

# 加入我吧！

你读完之后觉得这是个好主意吗？那就加入我吧，我需要帮手！截至目前，我有这么多的东西，我想建立，但只是这么少的时间！然而，我已经有了一个很好的开始。我基本上已经有了所有的代码(前端和后端)，我只需要重写一点，让它看起来很花哨。让我知道你是否感兴趣，或者让我知道你是否有兴趣使用我的部分代码库！一切都可以商量！

此文最初发表于[我的网站](https://karsens.com/chat-baas/)
关注我的 [GitHub](https://github.com/EAT-CODE-KITE-REPEAT/)