# 要记住的测试

> 原文:[https://dev.to/geraldosantos/a-test-to-remember-41ca](https://dev.to/geraldosantos/a-test-to-remember-41ca)

我所在的团队曾经遇到过一个关于单元测试的非常有趣的材料。如何以更相关的方式来做，测试什么是重要的。

虽然这很有趣，但另一件事引起了我的注意。演讲者指出了考试的名称。他揭示了一些沿用至今的惯例，即*应*、*给*、*当*、*然后*的组合。

看看这个[测试示例](https://www.agilealliance.org/glossary/gwt/)及其背后的约定，我想从我的`BankAccount`类中测试`Withdraw`方法。

因此...

*   鉴于我的银行账户有存款，而且我最近没有取钱
*   当我试图提取的金额少于我卡的限额时
*   然后，撤回应该完成，没有错误或警告

好的。记住这一点。

你是团队的新工程师，接下来几天你将在`BankAccount`班工作。安德鲁，一个比你早开始几个月的家伙，正在向你展示诀窍。你做了很多笔记，以确保了解细节。

突然，Andrew 需要参加一个会议，让你看着编辑。他让你继续玩代码，看架构，写下你可能会有的问题，等他回来。

你对你正在看的类中的`Withdraw`方法特别好奇。你觉得你有点明白了，但不完全明白。抓头和皱眉不断加剧。

最终你会找到一个单元测试，这就是你所看到的。

```
public void Given_BankAccountInCredit_When_WithdrawIsMade_Then_ShouldSucceed() 
```

当你在做这件事的时候，你听说你的一位同事在周末的万智牌锦标赛中表现出色，正因为如此，她决定今天带蛋糕去办公室。

那是蒂娜，她是在`BankAccount`班工作的工程师之一。

你拿到一块(或多块，我不是在评判)蛋糕后去找蒂娜，然后你问她:

> “嘿，蒂娜，顺便谢谢你的蛋糕！问题，我不完全确定`Withdraw`方法应该在`BankAccount`类中做什么。请你给我解释一下好吗？”
> 
> “当然，老兄。事情是这样的。”
> 
> “鉴于我的银行帐户有存款，并且我最近没有取款，当我试图提取少于我的卡限额的金额时，取款应该不会出现错误或警告。”
> 
> “就这些，还有问题吗？”
> 
> “所以，它取钱。”
> 
> “是啊。”
> 
> “酷，谢谢。”

请不要想从账户里取钱是多么的琐碎，请原谅我。我认为在解释代码的作用时，没有必要让代码有这样的噪音。我知道给事物命名很难，但这并不是给读者增加难度的借口。惯例是好的，它们帮助我们在混乱中建立秩序。接下来是成熟，用你学到的东西进行实验是可以的，超越仅仅是*这是规则所说的*。

想象一下，阅读成百上千个这样编写的测试，过滤所有这些单词以理解发生了什么。想象一下，一个新成员加入团队，不得不经历所有那些嘈杂的测试名称。

当有机会向某人解释某事时，你不会故意选择最困难和复杂的方式来让那个人理解你正在澄清的事情。我知道有一个关于用简单的方式解释事情的子编辑，但是还没有发现一个关于用困难的方式做同样的事情。

如果我要创建这样一个测试，它会是这样的:

```
public void Withdraw_Removes_Money_From_Account() 
```

没有`Shoulds`，没有`Givens`，`Whens`，`Thens`为了约定俗成。这个名字用尽可能少的词语表达了一切。

需要更具体的场景？厉害！您的测试应该是特定的，这样您代码中的逻辑就可以是通用的。

```
public void Withdraw_Removes_Money_From_Account()
public void Withdraw_Fails_When_Account_Is_Blocked()
public void Withdraw_Fails_When_Amount_Exceeds_Daily_Limit()
public void Withdraw_Fails_When_Amount_Exceeds_Total_Balance() 
```

就是这样，测试确切地说明了发生了什么，我选择使用的惯例是**编写人类可读的测试**。

[有个家伙曾经说过:](https://en.wikiquote.org/wiki/Martin_Fowler)

> 任何傻瓜都能写出计算机能理解的代码。优秀的程序员编写人类能够理解的代码。

你同意吗？您和/或您的团队如何编写测试名称？
想分享更多例子？

感谢阅读，和平！